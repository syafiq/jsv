(n?"":Graph.xmlDeclaration+"\n"+Graph.svgFileComment+"\n"+Graph.svgDoctype+"\n")+mxUtils.getXml(K);null!=x&&x(K);return K});g.mathEnabled&&this.editor.addMathCss(u);if(null!=x)this.embedFonts(u,mxUtils.bind(this,function(K){F?this.editor.convertImages(K,mxUtils.bind(this,function(M){E(M)})):E(K)}));else return E(u)};EditorUi.prototype.embedFonts=function(d,g){this.editor.loadFonts(mxUtils.bind(this,function(){try{null!=this.editor.resolvedFontCss&&this.editor.addFontCss(d,this.editor.resolvedFontCss),
this.editor.embedExtFonts(mxUtils.bind(this,function(k){try{null!=k&&this.editor.addFontCss(d,k),g(d)}catch(n){g(d)}}))}catch(k){g(d)}}))};EditorUi.prototype.exportImage=function(d,g,k,n,x,u,D,F,I,G,U,q,v){I=null!=I?I:"png";if(this.spinner.spin(document.body,mxResources.get("exporting"))){var E=this.editor.graph.isSelectionEmpty();k=null!=k?k:E;null==this.thumbImageCache&&(this.thumbImageCache={});try{this.editor.exportToCanvas(mxUtils.bind(this,function(K){this.spinner.stop();try{this.saveCanvas(K,