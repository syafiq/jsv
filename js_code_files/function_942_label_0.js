EditorUi.prototype.createPageMenuTab=function(b,e){b=this.createControlTab(3,'<div class="geSprite geSprite-dots"></div>',b);b.setAttribute("title",mxResources.get("pages"));b.style.position="absolute";b.style.marginLeft="0px";b.style.top="0px";b.style.left="1px";var f=b.getElementsByTagName("div")[0];f.style.display="inline-block";f.style.marginTop="5px";f.style.width="21px";f.style.height="21px";mxEvent.addListener(b,"click",mxUtils.bind(this,function(c){this.editor.graph.popupMenuHandler.hideMenu();
var l=new mxPopupMenu(mxUtils.bind(this,function(y,C){var z=mxUtils.bind(this,function(){for(var g=0;g<this.pages.length;g++)mxUtils.bind(this,function(k){var n=y.addItem(this.getShortPageName(this.pages[k]),null,mxUtils.bind(this,function(){this.selectPage(this.pages[k])}),C),x=this.pages[k].getId();n.setAttribute("title",this.pages[k].getName()+" ("+(k+1)+"/"+this.pages.length+")"+(null!=x?" ["+x+"]":""));this.pages[k]==this.currentPage&&y.addCheckmark(n,Editor.checkmarkImage)})(g)}),A=mxUtils.bind(this,
function(){y.addItem(mxResources.get("insertPage"),null,mxUtils.bind(this,function(){this.insertPage()}),C)});e||z();if(this.editor.graph.isEnabled()){e||(y.addSeparator(C),A());var J=this.currentPage;if(null!=J){y.addSeparator(C);if("sketch"==Editor.currentTheme||"simple"==Editor.currentTheme)null!=this.getLinkForPage(J)&&(y.addItem(mxResources.get("link")+"...",null,mxUtils.bind(this,function(){this.showPageLinkDialog(J)})),y.addSeparator(C)),1<this.pages.length&&(this.menus.addSubmenu("movePage",
y,C,mxResources.get("move")),y.addSeparator(C));var d=this.getShortPageName(J);y.addItem(mxResources.get("removeIt",[d]),null,mxUtils.bind(this,function(){this.removePage(J)}),C);y.addItem(mxResources.get("renameIt",[d])+"...",null,mxUtils.bind(this,function(){this.renamePage(J,J.getName())}),C);e||y.addSeparator(C);y.addItem(mxResources.get("duplicateIt",[d]),null,mxUtils.bind(this,function(){this.duplicatePage(J,mxResources.get("copyOf",[J.getName()]))}),C)}}e&&(y.addSeparator(C),A(),y.addSeparator(C),
z())}));l.div.className+=" geMenubarMenu";l.smartSeparators=!0;l.showDisabled=!0;l.autoExpand=!0;l.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(l,arguments);l.destroy()});var m=mxEvent.getClientX(c),t=mxEvent.getClientY(c);l.popup(m,t,null,c);this.setCurrentMenu(l);mxEvent.consume(c)}));return b};