urlParams["remote-selection"]){var T=null!=b.currentPage?b.currentPage.getId():null;if(null==T||null!=R.pageId&&R.pageId==T){p();for(p=0;p<R.removed.length;p++){var W=R.removed[p];if(null!=W){var X=S[W];delete S[W];null!=X&&X.destroy()}}for(p=0;p<R.added.length;p++)if(W=R.added[p],null!=W){var Y=A.model.getCell(W);null!=Y&&(S[W]=A.highlightCell(Y,k[L].color,6E4,70,3))}}}}e.file.fireEvent(new mxEventObject("realtimeMessage","message",O))}}catch(Z){null!=window.console&&console.log("Error:",Z)}}function y(O,
V){if(!K&&SimplePeer.WEBRTC_SUPPORT){var p=new SimplePeer({initiator:V,config:{iceServers:[{urls:"stun:54.89.235.160:3478"}]}});p.on("signal",function(B){P("sendSignal",{to:O,from:I,signal:B})});p.on("error",function(B){delete G[O];EditorUi.debug("P2PCollab: p2p socket error",B);!E&&V&&p.destroyed&&D[O]&&(EditorUi.debug("P2PCollab: p2p socket reconnecting",O),y(O,!0))});p.on("connect",function(){delete G[O];null==U[O]||U[O].destroyed?(U[O]=p,D[O]=!0,EditorUi.debug("P2PCollab: p2p socket connected",
O)):(p.noP2PMapDel=!0,p.destroy(),EditorUi.debug("P2PCollab: p2p socket duplicate",O))});p.on("close",function(){p.noP2PMapDel||(EditorUi.debug("P2PCollab: p2p socket closed",O),z(u[O]),delete U[O])});p.on("data",t);return G[O]=p}}function C(O,V){z(V||u[O]);null!=O&&(delete u[O],D[O]=!1)}function z(O){var V=k[O];if(null!=V){var p=V.selection,B;for(B in p)null!=p[B]&&p[B].destroy();null!=V.cursor&&null!=V.cursor.parentNode&&V.cursor.parentNode.removeChild(V.cursor);clearTimeout(V.inactiveTO);delete k[O]}}