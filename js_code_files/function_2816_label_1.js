EditorUi.prototype.createPageMenuTab=function(b,g){b=this.createControlTab(3,'<div class="geSprite geSprite-dots"></div>',b);b.setAttribute("title",mxResources.get("pages"));b.style.position="absolute";b.style.marginLeft="0px";b.style.top="0px";b.style.left="1px";var k=b.getElementsByTagName("div")[0];k.style.display="inline-block";k.style.marginTop="5px";k.style.width="21px";k.style.height="21px";mxEvent.addListener(b,"click",mxUtils.bind(this,function(d){this.editor.graph.popupMenuHandler.hideMenu();
var t=new mxPopupMenu(mxUtils.bind(this,function(G,H){var I=mxUtils.bind(this,function(){for(var e=0;e<this.pages.length;e++)mxUtils.bind(this,function(f){var n=G.addItem(this.getShortPageName(this.pages[f]),null,mxUtils.bind(this,function(){this.selectPage(this.pages[f])}),H),p=this.pages[f].getId();n.setAttribute("title",this.pages[f].getName()+" ("+(f+1)+"/"+this.pages.length+")"+(null!=p?" ["+p+"]":""));this.pages[f]==this.currentPage&&G.addCheckmark(n,Editor.checkmarkImage)})(e)}),D=mxUtils.bind(this,
function(){G.addItem(mxResources.get("insertPage"),null,mxUtils.bind(this,function(){this.insertPage()}),H)});g||I();if(this.editor.graph.isEnabled()){g||(G.addSeparator(H),D());var N=this.currentPage;if(null!=N){G.addSeparator(H);if("sketch"==Editor.currentTheme||"simple"==Editor.currentTheme)null!=this.getLinkForPage(N)&&(G.addItem(mxResources.get("link")+"...",null,mxUtils.bind(this,function(){this.showPageLinkDialog(N)})),G.addSeparator(H)),1<this.pages.length&&(this.menus.addSubmenu("movePage",
G,H,mxResources.get("move")),G.addSeparator(H));var c=this.getShortPageName(N);G.addItem(mxResources.get("removeIt",[c]),null,mxUtils.bind(this,function(){this.removePage(N)}),H);G.addItem(mxResources.get("renameIt",[c])+"...",null,mxUtils.bind(this,function(){this.renamePage(N,N.getName())}),H);g||G.addSeparator(H);G.addItem(mxResources.get("duplicateIt",[c]),null,mxUtils.bind(this,function(){this.duplicatePage(N,mxResources.get("copyOf",[N.getName()]))}),H)}}g&&(G.addSeparator(H),D(),G.addSeparator(H),
I())}));t.div.className+=" geMenubarMenu";t.smartSeparators=!0;t.showDisabled=!0;t.autoExpand=!0;t.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(t,arguments);t.destroy()});var v=mxEvent.getClientX(d),B=mxEvent.getClientY(d);t.popup(v,B,null,d);this.setCurrentMenu(t);mxEvent.consume(d)}));return b};