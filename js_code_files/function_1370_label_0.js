PageSetupDialog.addPageFormatPanel=function(a,b,f,e){function g(ba,T,P){if(P||x!=document.activeElement&&B!=document.activeElement){ba=!1;for(T=0;T<F.length;T++)P=F[T],Q?"custom"==P.key&&(n.value=P.key,Q=!1):null!=P.format&&("a4"==P.key?826==f.width?(f=mxRectangle.fromRectangle(f),f.width=827):826==f.height&&(f=mxRectangle.fromRectangle(f),f.height=827):"a5"==P.key&&(584==f.width?(f=mxRectangle.fromRectangle(f),f.width=583):584==f.height&&(f=mxRectangle.fromRectangle(f),f.height=583)),f.width==P.format.width&&
f.height==P.format.height?(n.value=P.key,d.setAttribute("checked","checked"),d.defaultChecked=!0,d.checked=!0,h.removeAttribute("checked"),h.defaultChecked=!1,h.checked=!1,ba=!0):f.width==P.format.height&&f.height==P.format.width&&(n.value=P.key,d.removeAttribute("checked"),d.defaultChecked=!1,d.checked=!1,h.setAttribute("checked","checked"),h.defaultChecked=!0,ba=h.checked=!0));ba?(u.style.display="",r.style.display="none"):(x.value=f.width/100,B.value=f.height/100,d.setAttribute("checked","checked"),
n.value="custom",u.style.display="none",r.style.display="")}}b="format-"+b;var d=document.createElement("input");d.setAttribute("name",b);d.setAttribute("type","radio");d.setAttribute("value","portrait");var h=document.createElement("input");h.setAttribute("name",b);h.setAttribute("type","radio");h.setAttribute("value","landscape");var n=document.createElement("select");n.style.marginBottom="8px";n.style.borderRadius="4px";n.style.border="1px solid rgb(160, 160, 160)";n.style.width="206px";var u=
document.createElement("div");u.style.marginLeft="4px";u.style.width="210px";u.style.height="24px";d.style.marginRight="6px";u.appendChild(d);b=document.createElement("span");b.style.maxWidth="100px";mxUtils.write(b,mxResources.get("portrait"));u.appendChild(b);h.style.marginLeft="10px";h.style.marginRight="6px";u.appendChild(h);var m=document.createElement("span");m.style.width="100px";mxUtils.write(m,mxResources.get("landscape"));u.appendChild(m);var r=document.createElement("div");r.style.marginLeft=
"4px";r.style.width="210px";r.style.height="24px";var x=document.createElement("input");x.setAttribute("size","7");x.style.textAlign="right";r.appendChild(x);mxUtils.write(r," in x ");var B=document.createElement("input");B.setAttribute("size","7");B.style.textAlign="right";r.appendChild(B);mxUtils.write(r," in");u.style.display="none";r.style.display="none";for(var C={},F=PageSetupDialog.getFormats(),H=0;H<F.length;H++){var E=F[H];C[E.key]=E;var N=document.createElement("option");N.setAttribute("value",
E.key);mxUtils.write(N,E.title);n.appendChild(N)}var Q=!1;g();a.appendChild(n);mxUtils.br(a);a.appendChild(u);a.appendChild(r);var S=f,R=function(ba,T){ba=C[n.value];null!=ba.format?(x.value=ba.format.width/100,B.value=ba.format.height/100,r.style.display="none",u.style.display=""):(u.style.display="none",r.style.display="");ba=parseFloat(x.value);if(isNaN(ba)||0>=ba)x.value=f.width/100;ba=parseFloat(B.value);if(isNaN(ba)||0>=ba)B.value=f.height/100;ba=new mxRectangle(0,0,Math.floor(100*parseFloat(x.value)),
Math.floor(100*parseFloat(B.value)));"custom"!=n.value&&h.checked&&(ba=new mxRectangle(0,0,ba.height,ba.width));T&&Q||ba.width==S.width&&ba.height==S.height||(S=ba,null!=e&&e(S))};mxEvent.addListener(b,"click",function(ba){d.checked=!0;R(ba);mxEvent.consume(ba)});mxEvent.addListener(m,"click",function(ba){h.checked=!0;R(ba);mxEvent.consume(ba)});mxEvent.addListener(x,"blur",R);mxEvent.addListener(x,"click",R);mxEvent.addListener(B,"blur",R);mxEvent.addListener(B,"click",R);mxEvent.addListener(h,"change",
R);mxEvent.addListener(d,"change",R);mxEvent.addListener(n,"change",function(ba){Q="custom"==n.value;R(ba,!0)});R();return{set:function(ba){f=ba;g(null,null,!0)},get:function(){return S},widthInput:x,heightInput:B}};