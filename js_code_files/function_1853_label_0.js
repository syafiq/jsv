e.file.fireEvent(new mxEventObject("realtimeStateChanged"))}catch(B){N=B,e.file.fireEvent(new mxEventObject("realtimeStateChanged"))}};this.destroy=function(){if(!E){EditorUi.debug("P2PCollab: destroyed");E=!0;for(sessionId in k)z(sessionId);null!=this.mouseListeners&&A.removeMouseListener(this.mouseListeners);null!=this.selectionChangeListener&&A.getSelectionModel().removeListener(this.selectionChangeListener);null!=this.shareCursorPositionListener&&b.removeListener(this.shareCursorPositionListener);
null!=this.cursorHandler&&(mxEvent.removeListener(A.container,"scroll",this.cursorHandler),A.getView().removeListener(mxEvent.SCALE,this.cursorHandler),A.getView().removeListener(mxEvent.TRANSLATE,this.cursorHandler),A.getView().removeListener(mxEvent.SCALE_AND_TRANSLATE,this.cursorHandler),b.editor.removeListener("pageSelected",this.cursorHandler),b.removeListener(this.cursorHandler));null!=d&&(d.close(1E3),d=null);for(var O in U)null!=U[O]&&U[O].destroy();e.file.fireEvent(new mxEventObject("realtimeStateChanged"))}}}