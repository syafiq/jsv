0<ia.length&&b.pickFolder(b.mode,function(va){b.createFile(ia,W,null!=R&&0<R.length?R:null,null,function(){b.hideDialog()},null,va,null,null!=T&&0<T.length?T:null)},b.mode!=App.MODE_GOOGLE||null==b.stateArg||null==b.stateArg.folderId)}}function I(ia,va,sa,na,oa,Ca,da){null!=X&&(X.style.backgroundColor="transparent",X.style.border="1px solid transparent");P.removeAttribute("disabled");W=va;R=sa;T=Ca;X=ia;Y=na;Z=da;ea=oa;X.style.backgroundColor=y;X.style.border=C}function G(ia,va,sa,na,oa,Ca,da,ja,
pa,xa,Da){function Ga(Ha,Ta){null==Ra?(Na=Ha,Na=/^https?:\/\//.test(Na)&&!b.editor.isCorsEnabledForUrl(Na)?PROXY_URL+"?url="+encodeURIComponent(Na):TEMPLATE_PATH+"/"+Na,mxUtils.get(Na,mxUtils.bind(this,function(Oa){200<=Oa.getStatus()&&299>=Oa.getStatus()&&(Ra=Oa.getText());Ta(Ra,Na)}))):Ta(Ra,Na)}function wa(Ha,Ta,Oa){if(null!=Ha&&mxUtils.isAncestorNode(document.body,ka)){Ha=mxUtils.parseXml(Ha);Ha=Editor.parseDiagramNode(Ha.documentElement);var Xa=new mxCodec(Ha.ownerDocument),Wa=new mxGraphModel;
Xa.decode(Ha,Wa);Ha=Wa.root.getChildAt(0).children;b.sidebar.createTooltip(ka,Ha,Math.min((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-80,1E3),Math.min((window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-80,800),null!=sa?mxResources.get(sa,null,sa):null,!0,new mxPoint(Ta,Oa),!0,function(){Va=null!=b.sidebar.tooltip&&"none"!=b.sidebar.tooltip.style.display;I(ka,null,null,ia,da,Da)},!0,!1)}}function Ba(Ha,Ta){null==ia||Ja||
b.sidebar.currentElt==ka?b.sidebar.hideTooltip():(b.sidebar.hideTooltip(),null!=Ka?(Ta='<mxfile><diagram id="d" name="n">'+Graph.compress('<mxGraphModel><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="2" value="" style="shape=image;image='+Ka.src+';imageAspect=1;" parent="1" vertex="1"><mxGeometry width="'+Ka.naturalWidth+'" height="'+Ka.naturalHeight+'" as="geometry" /></mxCell></root></mxGraphModel>')+"</diagram></mxfile>",wa(Ta,mxEvent.getClientX(Ha),mxEvent.getClientY(Ha))):(b.sidebar.currentElt=
ka,Ja=!0,Ga(ia,function(Oa){Ja&&b.sidebar.currentElt==ka&&wa(Oa,mxEvent.getClientX(Ha),mxEvent.getClientY(Ha));Ja=!1})))}var ka=document.createElement("div");ka.className="geTemplate geAdaptiveAsset";ka.style.position="relative";ka.style.height=Aa+"px";ka.style.width=ma+"px";var Ra=null,Na=ia;null!=sa?ka.setAttribute("title",mxResources.get(sa,null,sa)):null!=na&&0<na.length&&ka.setAttribute("title",na);var Ja=!1,Ka=null;if(null!=Ca){ka.style.display="inline-flex";ka.style.justifyContent="center";
ka.style.alignItems="center";oa=document.createElement("img");oa.setAttribute("src",Ca);oa.setAttribute("alt",na);oa.style.maxWidth=Aa+"px";oa.style.maxHeight=ma+"px";Ka=oa;var Sa=Ca.replace(".drawio.xml","").replace(".drawio","").replace(".xml","");ka.appendChild(oa);oa.onerror=function(){this.src!=Sa?this.src=Sa:(this.src=Editor.errorImage,this.onerror=null)};mxEvent.addGestureListeners(ka,mxUtils.bind(this,function(Ha){I(ka,null,null,ia,da,Da)}),null,null);mxEvent.addListener(ka,"dblclick",function(Ha){F();
mxEvent.consume(Ha)})}else if(!xa&&null!=ia&&0<ia.length){var La=function(Ha){P.setAttribute("disabled","disabled");ka.style.backgroundColor="transparent";ka.style.border="1px solid transparent";N.spin(ca);Ga(ia,function(Ta,Oa){N.stop();null!=Ta&&(I(ka,Ta,va,null,null,Da,Oa),Ha&&F())})};oa=pa||TEMPLATE_PATH+"/"+ia.substring(0,ia.length-4)+".png";ka.style.backgroundImage="url("+oa+")";ka.style.backgroundPosition="center center";ka.style.backgroundRepeat="no-repeat";if(null!=sa){na=document.createElement("table");
na.setAttribute("width","100%");na.setAttribute("height","100%");na.style.background=Editor.isDarkMode()?"transparent":"rgba(255,255,255,0.85)";na.style.lineHeight="1.3em";na.style.border="inherit";Ca=document.createElement("tbody");pa=document.createElement("tr");xa=document.createElement("td");xa.setAttribute("align","center");xa.setAttribute("valign","middle");var Qa=document.createElement("span");Qa.style.display="inline-block";Qa.style.padding="4px 8px 4px 8px";Qa.style.userSelect="none";Qa.style.borderRadius=
"3px";Qa.style.background="rgba(255,255,255,0.85)";Qa.style.overflow="hidden";Qa.style.textOverflow="ellipsis";Qa.style.maxWidth=Aa-34+"px";mxUtils.write(Qa,mxResources.get(sa,null,sa));xa.appendChild(Qa);pa.appendChild(xa);Ca.appendChild(pa);na.appendChild(Ca);ka.appendChild(na)}mxEvent.addGestureListeners(ka,mxUtils.bind(this,function(Ha){La()}),null,null);mxEvent.addListener(ka,"dblclick",function(Ha){La(!0);mxEvent.consume(Ha)})}else na=document.createElement("table"),na.setAttribute("width",
"100%"),na.setAttribute("height","100%"),na.style.lineHeight="1.3em",Ca=document.createElement("tbody"),pa=document.createElement("tr"),xa=document.createElement("td"),xa.setAttribute("align","center"),xa.setAttribute("valign","middle"),Qa=document.createElement("span"),Qa.style.display="inline-block",Qa.style.padding="4px 8px 4px 8px",Qa.style.userSelect="none",Qa.style.borderRadius="3px",Qa.style.background="#ffffff",Qa.style.overflow="hidden",Qa.style.textOverflow="ellipsis",Qa.style.maxWidth=
Aa-34+"px",mxUtils.write(Qa,mxResources.get(sa,null,sa)),xa.appendChild(Qa),pa.appendChild(xa),Ca.appendChild(pa),na.appendChild(Ca),ka.appendChild(na),oa&&I(ka),mxEvent.addGestureListeners(ka,mxUtils.bind(this,function(Ha){I(ka,null,null,ia,da)}),null,null),null!=ja?mxEvent.addListener(ka,"click",ja):(mxEvent.addListener(ka,"click",function(Ha){I(ka,null,null,ia,da)}),mxEvent.addListener(ka,"dblclick",function(Ha){F();mxEvent.consume(Ha)}));if(null!=ia){var Ua=document.createElement("img");Ua.setAttribute("src",
Sidebar.prototype.searchImage);Ua.setAttribute("title",mxResources.get("preview"));Ua.className="geActiveButton";Ua.style.position="absolute";Ua.style.cursor="default";Ua.style.padding="8px";Ua.style.right="0px";Ua.style.top="0px";ka.appendChild(Ua);var Va=!1;mxEvent.addGestureListeners(Ua,mxUtils.bind(this,function(Ha){Va=b.sidebar.currentElt==ka}),null,null);mxEvent.addListener(Ua,"click",mxUtils.bind(this,function(Ha){Va||Ba(Ha,Ua);mxEvent.consume(Ha)}))}ca.appendChild(ka);return ka}function U(){function ia(Ba,