ba=mxUtils.bind(this,function(){f.refresh();f.view.validateBackground();this.updateTabContainer();this.hideShapePicker()});this.addListener("darkModeChanged",ba);this.addListener("sketchModeChanged",ba);this.addListener("currentThemeChanged",mxUtils.bind(this,function(){this.updateButtonContainer();this.refresh()}));f.addListener("enabledChanged",mxUtils.bind(this,function(){f.isEnabled()||this.hideShapePicker()}));d=this;mxWindow.prototype.fit=function(){if(Editor.inlineFullscreen||null==d.embedViewport)mxUtils.fit(this.div);
else{var J=parseInt(this.div.offsetLeft),V=parseInt(this.div.offsetWidth),T=d.embedViewport.x+d.embedViewport.width,ca=parseInt(this.div.offsetTop),Y=parseInt(this.div.offsetHeight),p=d.embedViewport.y+d.embedViewport.height;this.div.style.left=Math.max(d.embedViewport.x,Math.min(J,T-V))+"px";this.div.style.top=Math.max(d.embedViewport.y,Math.min(ca,p-Y))+"px";this.div.style.height=Math.min(d.embedViewport.height,parseInt(this.div.style.height))+"px";this.div.style.width=Math.min(d.embedViewport.width,
parseInt(this.div.style.width))+"px"}};if(!this.editor.chromeless||this.editor.editable)if("simple"==Editor.currentTheme||"sketch"==Editor.currentTheme)ba=Editor.currentTheme,Editor.currentTheme="",this.doSetCurrentTheme(ba,0,mxUtils.bind(this,function(){"1"==urlParams.embedInline&&this.initializeInlineEmbedMode()}));mxClient.IS_IE||mxClient.IS_IE11||"0"==urlParams.dark||"atlas"==Editor.currentTheme||"1"==urlParams.embed&&"1"!=urlParams.dark||(ba=!1,window.matchMedia&&this.isAutoDarkMode()?ba=window.matchMedia("(prefers-color-scheme: dark)").matches: