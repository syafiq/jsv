mxGraphView.prototype.validateBackgroundStyles=function(){var D=this.graph,M=null==D.background||D.background==mxConstants.NONE?D.defaultPageBackgroundColor:D.background,R=null!=M&&this.gridColor!=M.toLowerCase()?this.gridColor:"#ffffff",G="none",L="";if(D.isGridEnabled()||D.gridVisible){L=10;mxClient.IS_SVG?(G=unescape(encodeURIComponent(this.createSvgGrid(R))),G=window.btoa?btoa(G):Base64.encode(G,!0),G="url(data:image/svg+xml;base64,"+G+")",L=D.gridSize*this.scale*this.gridSteps):G="url("+this.gridImage+
")";var Q=R=0;null!=D.view.backgroundPageShape&&(Q=this.getBackgroundPageBounds(),R=1+Q.x,Q=1+Q.y);L=-Math.round(L-mxUtils.mod(this.translate.x*this.scale-R,L))+"px "+-Math.round(L-mxUtils.mod(this.translate.y*this.scale-Q,L))+"px"}R=D.view.canvas;null!=R.ownerSVGElement&&(R=R.ownerSVGElement);Q=!Editor.isDarkMode()&&("simple"==Editor.currentTheme||Editor.useSimpleBackgroundForSketch&&"sketch"==Editor.currentTheme);null!=D.view.backgroundPageShape?(D.view.backgroundPageShape.node.style.backgroundPosition=
L,D.view.backgroundPageShape.node.style.backgroundImage=G,D.view.backgroundPageShape.node.style.backgroundColor=M,D.view.backgroundPageShape.node.style.borderColor=D.defaultPageBorderColor,D.container.className="geDiagramContainer geDiagramBackdrop",R.style.backgroundImage="none",R.style.backgroundColor="",D.container.style.backgroundColor=Q?D.simpleBackgroundColor:""):(D.container.className="geDiagramContainer",R.style.backgroundPosition=L,R.style.backgroundImage=G,!Q||null!=D.background&&D.background!=
mxConstants.NONE?R.style.backgroundColor=M:(R.style.backgroundColor=D.simpleBackgroundColor,D.container.style.backgroundColor=""))};mxGraphView.prototype.createSvgGrid=function(D){for(var M=this.graph.gridSize*this.scale;M<this.minGridSize;)M*=2;for(var R=this.gridSteps*M,G=[],L=1;L<this.gridSteps;L++){var Q=L*M;G.push("M 0 "+Q+" L "+R+" "+Q+" M "+Q+" 0 L "+Q+" "+R)}return'<svg width="'+R+'" height="'+R+'" xmlns="'+mxConstants.NS_SVG+'"><defs><pattern id="grid" width="'+R+'" height="'+R+'" patternUnits="userSpaceOnUse"><path d="'+