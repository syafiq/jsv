function(qa){qa=(v?"":Graph.xmlDeclaration+"\n"+Graph.svgFileComment+"\n"+Graph.svgDoctype+"\n")+mxUtils.getXml(qa);null!=x&&x(qa);return qa});f.mathEnabled&&this.editor.addMathCss(A);if(null!=x)this.embedFonts(A,mxUtils.bind(this,function(qa){H?this.editor.convertImages(qa,mxUtils.bind(this,function(sa){aa(sa)})):aa(qa)}));else return aa(A)};EditorUi.prototype.embedFonts=function(d,f){this.editor.loadFonts(mxUtils.bind(this,function(){try{null!=this.editor.resolvedFontCss&&this.editor.addFontCss(d,
this.editor.resolvedFontCss),this.editor.embedExtFonts(mxUtils.bind(this,function(g){try{null!=g&&this.editor.addFontCss(d,g),f(d)}catch(v){f(d)}}))}catch(g){f(d)}}))};EditorUi.prototype.exportImage=function(d,f,g,v,x,A,J,H,O,F,ea,ja,ia){O=null!=O?O:"png";if(this.spinner.spin(document.body,mxResources.get("exporting"))){var aa=this.editor.graph.isSelectionEmpty();g=null!=g?g:aa;null==this.thumbImageCache&&(this.thumbImageCache={});try{this.editor.exportToCanvas(mxUtils.bind(this,function(qa){this.spinner.stop();