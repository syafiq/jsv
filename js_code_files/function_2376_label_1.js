StorageFile.listFiles=function(b,d,f,c){b.getDatabaseItems(function(l){var m=[];if(null!=l)for(var t=0;t<l.length;t++)"."==l[t].title.charAt(0)||null!=d&&l[t].type!=d||m.push(l[t]);f(m)},function(){null==b.database?f(StorageFile.listLocalStorageFiles(d)):null!=c&&c()},"filesInfo")};StorageFile.deleteFile=function(b,d,f,c){b.removeDatabaseItem([d,d],f,function(){null==b.database?(localStorage.removeItem(d),f()):null!=c&&c()},["files","filesInfo"])};StorageLibrary=function(b,d,f){StorageFile.call(this,b,d,f)};mxUtils.extend(StorageLibrary,StorageFile);StorageLibrary.prototype.type="L";StorageLibrary.prototype.isAutosave=function(){return!0};StorageLibrary.prototype.saveAs=function(b,d,f){this.saveFile(b,!1,d,f)};StorageLibrary.prototype.getHash=function(){return"L"+encodeURIComponent(this.title)};StorageLibrary.prototype.getTitle=function(){return".scratchpad"==this.title?mxResources.get("scratchpad"):this.title};