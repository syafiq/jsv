this.unitListener=function(F,I){z.setUnit(I.getProperty("unit"))};k.addListener(mxEvent.SIZE,e);k.container.addEventListener("scroll",c);k.view.addListener("unitChanged",this.unitListener);b.addListener("pageViewChanged",this.pageListener);b.addListener("pageScaleChanged",this.pageListener);b.addListener("pageFormatChanged",this.pageListener);this.setStyle=function(F){A=F;J.style.background=A.bkgClr;x()};this.origGuideMove=mxGuide.prototype.move;mxGuide.prototype.move=function(F,I,G,U){if(f&&4<F.height||
!f&&4<F.width){if(null!=z.guidePart)try{g.putImageData(z.guidePart.imgData1,z.guidePart.x1,z.guidePart.y1),g.putImageData(z.guidePart.imgData2,z.guidePart.x2,z.guidePart.y2),g.putImageData(z.guidePart.imgData3,z.guidePart.x3,z.guidePart.y3)}catch(p){}var q=z.origGuideMove.apply(this,arguments);try{g.lineWidth=.5;g.strokeStyle=A.guideClr;g.setLineDash([2]);if(f){var v=F.y+q.y+C-this.graph.container.scrollTop;var E=0;var K=v+F.height/2;var M=C/2;var H=v+F.height;var N=0;var P=g.getImageData(E,v-1,C,
3);n(E,v,C,v);v--;var O=g.getImageData(M,K-1,C,3);n(M,K,C,K);K--;var V=g.getImageData(N,H-1,C,3);n(N,H,C,H);H--}else v=0,E=F.x+q.x+C-this.graph.container.scrollLeft,K=C/2,M=E+F.width/2,H=0,N=E+F.width,P=g.getImageData(E-1,v,3,C),n(E,v,E,C),E--,O=g.getImageData(M-1,K,3,C),n(M,K,M,C),M--,V=g.getImageData(N-1,H,3,C),n(N,H,N,C),N--;if(null==z.guidePart||z.guidePart.x1!=E||z.guidePart.y1!=v)z.guidePart={imgData1:P,x1:E,y1:v,imgData2:O,x2:M,y2:K,imgData3:V,x3:N,y3:H}}catch(p){}}else q=z.origGuideMove.apply(this,
arguments);return q};this.origGuideDestroy=mxGuide.prototype.destroy;mxGuide.prototype.destroy=function(){var F=z.origGuideDestroy.apply(this,arguments);if(null!=z.guidePart)try{g.putImageData(z.guidePart.imgData1,z.guidePart.x1,z.guidePart.y1),g.putImageData(z.guidePart.imgData2,z.guidePart.x2,z.guidePart.y2),g.putImageData(z.guidePart.imgData3,z.guidePart.x3,z.guidePart.y3),z.guidePart=null}catch(I){}return F}}mxRuler.prototype.RULER_THICKNESS=14;mxRuler.prototype.unit=mxConstants.POINTS;