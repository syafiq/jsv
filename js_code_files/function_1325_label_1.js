f&&f(ea)}),null,null,v,null,A.shadowVisible,null,A,x,null,null,null,"diagram",null)}catch(ea){null!=f&&f(ea)}};EditorUi.prototype.getEmbeddedSvg=function(d,f,g,v,x,A,J,H,O,F,ea,ja,ia){H=null!=H?H:!0;ea=null!=ea?ea:0;J=null!=O?O:f.background;J==mxConstants.NONE&&(J=null);A=f.getSvg(J,F,ea,null,null,A,null,null,null,f.shadowVisible||ja,null,ia,"diagram");(f.shadowVisible||ja)&&f.addSvgShadow(A,null,null,0==ea);null!=d&&A.setAttribute("content",d);null!=g&&A.setAttribute("resource",g);var aa=mxUtils.bind(this,
function(qa){qa=(v?"":Graph.xmlDeclaration+"\n"+Graph.svgFileComment+"\n"+Graph.svgDoctype+"\n")+mxUtils.getXml(qa);null!=x&&x(qa);return qa});f.mathEnabled&&this.editor.addMathCss(A);if(null!=x)this.embedFonts(A,mxUtils.bind(this,function(qa){H?this.editor.convertImages(qa,mxUtils.bind(this,function(sa){aa(sa)})):aa(qa)}));else return aa(A)};EditorUi.prototype.embedFonts=function(d,f){this.editor.loadFonts(mxUtils.bind(this,function(){try{null!=this.editor.resolvedFontCss&&this.editor.addFontCss(d,