function(p,B){return Graph.processFontStyle(n.apply(this,arguments))};var x=mxSvgCanvas2D.prototype.updateTextNodes;mxSvgCanvas2D.prototype.updateTextNodes=function(p,B,L,Q,S,R,T,W,X,Y,Z){x.apply(this,arguments);Graph.processFontAttributes(Z)};var u=mxText.prototype.redraw;mxText.prototype.redraw=function(){u.apply(this,arguments);null!=this.node&&"DIV"==this.node.nodeName&&Graph.processFontAttributes(this.node)};Graph.prototype.createTagsDialog=function(p,B,L){function Q(){for(var ba=T.getSelectionCells(),
fa=[],za=0;za<ba.length;za++)T.isCellVisible(ba[za])&&fa.push(ba[za]);T.setSelectionCells(fa)}function S(ba){T.setHiddenTags(ba?[]:W.slice());Q();T.refresh()}function R(ba,fa){Y.innerText="";if(0<ba.length){var za=document.createElement("table");za.setAttribute("cellpadding","2");za.style.boxSizing="border-box";za.style.tableLayout="fixed";za.style.width="100%";var ra=document.createElement("tbody");if(null!=ba&&0<ba.length)for(var Aa=0;Aa<ba.length;Aa++)(function(ma){var ha=0>mxUtils.indexOf(T.hiddenTags,
ma),Pa=document.createElement("tr"),ya=document.createElement("td");ya.style.align="center";ya.style.width="16px";var Ea=document.createElement("img");Ea.setAttribute("src",ha?Editor.visibleImage:Editor.hiddenImage);Ea.setAttribute("title",mxResources.get(ha?"hideIt":"show",[ma]));mxUtils.setOpacity(Ea,ha?75:25);Ea.style.verticalAlign="middle";Ea.style.cursor="pointer";Ea.style.width="16px";if(B||Editor.isDarkMode())Ea.style.filter="invert(100%)";ya.appendChild(Ea);mxEvent.addListener(Ea,"click",
function(qa){mxEvent.isShiftDown(qa)?S(0<=mxUtils.indexOf(T.hiddenTags,ma)):(T.toggleHiddenTag(ma),Q(),T.refresh());mxEvent.consume(qa)});Pa.appendChild(ya);ya=document.createElement("td");ya.style.overflow="hidden";ya.style.whiteSpace="nowrap";ya.style.textOverflow="ellipsis";ya.style.verticalAlign="middle";ya.style.cursor="pointer";ya.setAttribute("title",ma);a=document.createElement("a");mxUtils.write(a,ma);a.style.textOverflow="ellipsis";a.style.position="relative";mxUtils.setOpacity(a,ha?100:
40);ya.appendChild(a);mxEvent.addListener(ya,"click",function(qa){if(mxEvent.isShiftDown(qa)){S(!0);var ta=T.getCellsForTags([ma],null,null,!0);T.isEnabled()?T.setSelectionCells(ta):T.highlightCells(ta)}else if(ha&&0<T.hiddenTags.length)S(!0);else{ta=W.slice();var la=mxUtils.indexOf(ta,ma);ta.splice(la,1);T.setHiddenTags(ta);Q();T.refresh()}mxEvent.consume(qa)});Pa.appendChild(ya);if(T.isEnabled()){ya=document.createElement("td");ya.style.verticalAlign="middle";ya.style.textAlign="center";ya.style.width=
"18px";if(null==fa){ya.style.align="center";ya.style.width="16px";Ea=document.createElement("img");Ea.setAttribute("src",Editor.crossImage);Ea.setAttribute("title",mxResources.get("removeIt",[ma]));mxUtils.setOpacity(Ea,ha?75:25);Ea.style.verticalAlign="middle";Ea.style.cursor="pointer";Ea.style.width="16px";if(B||Editor.isDarkMode())Ea.style.filter="invert(100%)";mxEvent.addListener(Ea,"click",function(qa){var ta=mxUtils.indexOf(W,ma);0<=ta&&W.splice(ta,1);T.removeTagsForCells(T.model.getDescendants(T.model.getRoot()),
[ma]);T.refresh();mxEvent.consume(qa)});ya.appendChild(Ea)}else{var Fa=document.createElement("input");Fa.setAttribute("type","checkbox");Fa.style.margin="0px";Fa.defaultChecked=null!=fa&&0<=mxUtils.indexOf(fa,ma);Fa.checked=Fa.defaultChecked;Fa.style.background="transparent";Fa.setAttribute("title",mxResources.get(Fa.defaultChecked?"removeIt":"add",[ma]));mxEvent.addListener(Fa,"change",function(qa){Fa.checked?T.addTagsForCells(T.getSelectionCells(),[ma]):T.removeTagsForCells(T.getSelectionCells(),
[ma]);mxEvent.consume(qa)});ya.appendChild(Fa)}Pa.appendChild(ya)}ra.appendChild(Pa)})(ba[Aa]);za.appendChild(ra);Y.appendChild(za)}}var T=this,W=T.hiddenTags.slice(),X=document.createElement("div");X.style.userSelect="none";X.style.overflow="hidden";X.style.padding="10px";X.style.height="100%";var Y=document.createElement("div");Y.style.boxSizing="border-box";Y.style.borderRadius="4px";Y.style.userSelect="none";Y.style.overflow="auto";Y.style.position="absolute";Y.style.left="10px";Y.style.right=
"10px";Y.style.top="10px";Y.style.border=T.isEnabled()?"1px solid #808080":"none";Y.style.bottom=T.isEnabled()?"48px":"10px";X.appendChild(Y);var Z=mxUtils.button(mxResources.get("reset"),function(ba){T.setHiddenTags([]);mxEvent.isShiftDown(ba)||(W=T.hiddenTags.slice());Q();T.refresh()});Z.setAttribute("title",mxResources.get("reset"));Z.className="geBtn";Z.style.margin="0 4px 0 0";var ea=mxUtils.button(mxResources.get("add"),function(){null!=L&&L(W,function(ba){W=ba;ca()})});ea.setAttribute("title",
mxResources.get("add"));ea.className="geBtn";ea.style.margin="0";T.addListener(mxEvent.ROOT,function(){W=T.hiddenTags.slice()});var ca=mxUtils.bind(this,function(ba,fa){if(p()){ba=T.getAllTags();for(fa=0;fa<ba.length;fa++)0>mxUtils.indexOf(W,ba[fa])&&W.push(ba[fa]);W.sort();T.isSelectionEmpty()?R(W):R(W,T.getCommonTagsForCells(T.getSelectionCells()))}});T.selectionModel.addListener(mxEvent.CHANGE,ca);T.model.addListener(mxEvent.CHANGE,ca);T.addListener(mxEvent.REFRESH,ca);var aa=document.createElement("div");
aa.style.boxSizing="border-box";aa.style.whiteSpace="nowrap";aa.style.position="absolute";aa.style.overflow="hidden";aa.style.bottom="0px";aa.style.height="42px";aa.style.right="10px";aa.style.left="10px";T.isEnabled()&&(aa.appendChild(Z),aa.appendChild(ea),X.appendChild(aa));return{div:X,refresh:ca}};Graph.prototype.getCustomFonts=function(){var p=this.extFonts;p=null!=p?p.slice():[];for(var B in Graph.customFontElements){var L=Graph.customFontElements[B];p.push({name:L.name,url:L.url})}return p};