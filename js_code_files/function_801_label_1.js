F=F?"1":"0";"pdf"==g&&(null!=T?I="&from="+T.from+"&to="+T.to:0==v&&(I="&allPages=1"));"xmlpng"==g&&(F="1",g="png");if(("xmlpng"==g||"svg"==g)&&null!=this.pages&&null!=this.currentPage)for(v=0;v<this.pages.length;v++)if(this.pages[v]==this.currentPage){N="&from="+v;break}v=G.background;"png"!=g&&"pdf"!=g&&"svg"!=g||!u?u||null!=v&&v!=mxConstants.NONE||(v="#ffffff"):v=mxConstants.NONE;u={globalVars:G.getExportVariables()};H&&(u.grid={size:G.gridSize,steps:G.view.gridSteps,color:G.view.gridColor});Graph.translateDiagram&&
(u.diagramLanguage=Graph.diagramLanguage);return new mxXmlRequest(EXPORT_URL,"format="+g+N+I+"&bg="+(null!=v?v:mxConstants.NONE)+"&base64="+n+"&embedXml="+F+"&xml="+encodeURIComponent(k)+(null!=e?"&filename="+encodeURIComponent(e):"")+"&extras="+encodeURIComponent(JSON.stringify(u))+(null!=E?"&scale="+E:"")+(null!=C?"&border="+C:"")+(p&&isFinite(p)?"&w="+p:"")+(x&&isFinite(x)?"&h="+x:""))};EditorUi.prototype.setMode=function(e,g){this.mode=e};EditorUi.prototype.loadDescriptor=function(e,g,k){var n=