EditorUi.prototype.convertDataUri=function(d){if("data:"==d.substring(0,5)){var g=d.indexOf(";");0<g&&(d=d.substring(0,g)+d.substring(d.indexOf(",",g+1)))}return d};EditorUi.prototype.isRemoteFileFormat=function(d,g){return/("contentType":\s*"application\/gliffy\+json")/.test(d)};EditorUi.prototype.isLucidChartData=function(d){return null!=d&&('{"state":"{\\"Properties\\":'==d.substring(0,26)||'{"Properties":'==d.substring(0,14))};EditorUi.prototype.importLocalFile=function(d,g){if(d&&Graph.fileSupport){if(null==
this.importFileInputElt){var k=document.createElement("input");k.setAttribute("type","file");mxEvent.addListener(k,"change",mxUtils.bind(this,function(){null!=k.files&&(this.importFiles(k.files,null,null,this.maxImageSize),k.type="",k.type="file",k.value="")}));k.style.display="none";document.body.appendChild(k);this.importFileInputElt=k}this.importFileInputElt.click()}else{window.openNew=!1;window.openKey="import";window.listBrowserFiles=mxUtils.bind(this,function(D,F){StorageFile.listFiles(this,
"F",D,F)});window.openBrowserFile=mxUtils.bind(this,function(D,F,I){StorageFile.getFileContent(this,D,F,I)});window.deleteBrowserFile=mxUtils.bind(this,function(D,F,I){StorageFile.deleteFile(this,D,F,I)});if(!g){var n=Editor.useLocalStorage;Editor.useLocalStorage=!d}window.openFile=new OpenFile(mxUtils.bind(this,function(D){this.hideDialog(D)}));window.openFile.setConsumer(mxUtils.bind(this,function(D,F){null!=F&&Graph.fileSupport&&/(\.v(dx|sdx?))($|\?)/i.test(F)?(D=new Blob([D],{type:"application/octet-stream"}),
this.importVisio(D,mxUtils.bind(this,function(I){this.importXml(I,0,0,!0)}),null,F)):this.editor.graph.setSelectionCells(this.importXml(D,0,0,!0))}));this.showDialog((new OpenDialog(this)).container,Editor.useLocalStorage?640:360,Editor.useLocalStorage?480:220,!0,!0,function(){window.openFile=null});if(!g){var x=this.dialog,u=x.close;this.dialog.close=mxUtils.bind(this,function(D){Editor.useLocalStorage=n;u.apply(x,arguments);D&&null==this.getCurrentFile()&&"1"!=urlParams.embed&&this.showSplash()})}}};