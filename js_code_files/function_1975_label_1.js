window.location.protocol+"//"+window.location.hostname+("/"==R.charAt(0)?"":q)+R);D.push('url("'+R+'"'+L[S].substring(U))}else D.push(L[S])}else D=[q]}return null!=D?D.join(""):null};Editor.prototype.mapFontUrl=function(q,D,L){/^https?:\/\//.test(D)&&!this.isCorsEnabledForUrl(D)&&(D=PROXY_URL+"?url="+encodeURIComponent(D));L(q,D)};Editor.prototype.embedCssFonts=function(q,D){var L=q.split("url("),U=0;null==this.cachedFonts&&(this.cachedFonts={});var O=mxUtils.bind(this,function(){if(0==U){for(var Z=
[L[0]],ba=1;ba<L.length;ba++){var aa=L[ba].indexOf(")");Z.push('url("');Z.push(this.cachedFonts[Editor.trimCssUrl(L[ba].substring(0,aa))]);Z.push('"'+L[ba].substring(aa))}D(Z.join(""))}});if(0<L.length){for(q=1;q<L.length;q++){var S=L[q].indexOf(")"),R=null,X=L[q].indexOf("format(",S);0<X&&(R=Editor.trimCssUrl(L[q].substring(X+7,L[q].indexOf(")",X))));mxUtils.bind(this,function(Z){if(null==this.cachedFonts[Z]){this.cachedFonts[Z]=Z;U++;var ba="application/x-font-ttf";if("svg"==R||/(\.svg)($|\?)/i.test(Z))ba=
"image/svg+xml";else if("otf"==R||"embedded-opentype"==R||/(\.otf)($|\?)/i.test(Z))ba="application/x-font-opentype";else if("woff"==R||/(\.woff)($|\?)/i.test(Z))ba="application/font-woff";else if("woff2"==R||/(\.woff2)($|\?)/i.test(Z))ba="application/font-woff2";else if("eot"==R||/(\.eot)($|\?)/i.test(Z))ba="application/vnd.ms-fontobject";else if("sfnt"==R||/(\.sfnt)($|\?)/i.test(Z))ba="application/font-sfnt";this.mapFontUrl(ba,Z,mxUtils.bind(this,function(aa,ca){this.loadUrl(ca,mxUtils.bind(this,
function(Y){this.cachedFonts[Z]=Y;U--;O()}),mxUtils.bind(this,function(Y){U--;O()}),!0,null,"data:"+aa+";charset=utf-8;base64,")}))}})(Editor.trimCssUrl(L[q].substring(0,S)),R)}O()}else D(q)};Editor.prototype.loadFonts=function(q){null!=this.fontCss&&null==this.resolvedFontCss?this.embedCssFonts(this.fontCss,mxUtils.bind(this,function(D){this.resolvedFontCss=D;null!=q&&q()})):null!=q&&q()};Editor.prototype.createGoogleFontCache=function(){var q={},D;for(D in Graph.fontMapping)Graph.isCssFontUrl(D)&&