function(d,g,k,n){d=null!=d?d:!0;g=null!=g?g:!1;k=null!=k?k:!Editor.compressXml;var x=this.editor.getGraphXml(d,n);if(d&&null!=this.fileNode&&null!=this.currentPage)if(d=function(I){var G=I.getElementsByTagName("mxGraphModel");G=0<G.length?G[0]:null;null==G&&k?(G=mxUtils.trim(mxUtils.getTextContent(I)),I=I.cloneNode(!1),0<G.length&&(G=Graph.decompress(G),null!=G&&0<G.length&&I.appendChild(mxUtils.parseXml(G).documentElement))):null==G||k?I=I.cloneNode(!0):(I=I.cloneNode(!1),mxUtils.setTextContent(I,
Graph.compressNode(G)));x.appendChild(I)},EditorUi.removeChildNodes(this.currentPage.node),mxUtils.setTextContent(this.currentPage.node,Graph.compressNode(x)),x=this.fileNode.cloneNode(!1),g)d(this.currentPage.node);else for(g=0;g<this.pages.length;g++){var u=this.pages[g],D=u.node;if(u!=this.currentPage)if(u.needsUpdate){var F=new mxCodec(mxUtils.createXmlDocument());F=F.encode(new mxGraphModel(u.root));this.editor.graph.saveViewState(u.viewState,F,null,n);EditorUi.removeChildNodes(D);mxUtils.setTextContent(D,
Graph.compressNode(F));delete u.needsUpdate}else n&&(this.updatePageRoot(u),null!=u.viewState.backgroundImage&&(null!=u.viewState.backgroundImage.originalSrc?u.viewState.backgroundImage=this.createImageForPageLink(u.viewState.backgroundImage.originalSrc,u):Graph.isPageLink(u.viewState.backgroundImage.src)&&(u.viewState.backgroundImage=this.createImageForPageLink(u.viewState.backgroundImage.src,u))),null!=u.viewState.backgroundImage&&null!=u.viewState.backgroundImage.originalSrc&&(F=new mxCodec(mxUtils.createXmlDocument()),
F=F.encode(new mxGraphModel(u.root)),this.editor.graph.saveViewState(u.viewState,F,null,n),D=D.cloneNode(!1),mxUtils.setTextContent(D,Graph.compressNode(F))));d(D)}return x};EditorUi.prototype.anonymizeString=function(d,g){for(var k=[],n=0;n<d.length;n++){var x=d.charAt(n);0<=EditorUi.ignoredAnonymizedChars.indexOf(x)?k.push(x):isNaN(parseInt(x))?x.toLowerCase()!=x?k.push(String.fromCharCode(65+Math.round(25*Math.random()))):x.toUpperCase()!=x?k.push(String.fromCharCode(97+Math.round(25*Math.random()))):