EditorUi.prototype.createPageMenuTab=function(b,e){b=this.createControlTab(3,'<div class="geSprite geSprite-dots"></div>',b);b.setAttribute("title",mxResources.get("pages"));b.style.position="absolute";b.style.marginLeft="0px";b.style.top="0px";b.style.left="1px";var k=b.getElementsByTagName("div")[0];k.style.display="inline-block";k.style.marginTop="5px";k.style.width="21px";k.style.height="21px";mxEvent.addListener(b,"click",mxUtils.bind(this,function(l){this.editor.graph.popupMenuHandler.hideMenu();
var B=new mxPopupMenu(mxUtils.bind(this,function(N,S){var F=mxUtils.bind(this,function(){for(var f=0;f<this.pages.length;f++)mxUtils.bind(this,function(g){var u=N.addItem(this.getShortPageName(this.pages[g]),null,mxUtils.bind(this,function(){this.selectPage(this.pages[g])}),S),x=this.pages[g].getId();u.setAttribute("title",this.pages[g].getName()+" ("+(g+1)+"/"+this.pages.length+")"+(null!=x?" ["+x+"]":""));this.pages[g]==this.currentPage&&N.addCheckmark(u,Editor.checkmarkImage)})(f)}),K=mxUtils.bind(this,
function(){N.addItem(mxResources.get("insertPage"),null,mxUtils.bind(this,function(){this.insertPage()}),S)});e||F();if(this.editor.graph.isEnabled()){e||(N.addSeparator(S),K());var R=this.currentPage;if(null!=R){N.addSeparator(S);if("sketch"==Editor.currentTheme||"simple"==Editor.currentTheme)null!=this.getLinkForPage(R)&&(N.addItem(mxResources.get("link")+"...",null,mxUtils.bind(this,function(){this.showPageLinkDialog(R)})),N.addSeparator(S)),1<this.pages.length&&(this.menus.addSubmenu("movePage",
N,S,mxResources.get("move")),N.addSeparator(S));var d=this.getShortPageName(R);N.addItem(mxResources.get("removeIt",[d]),null,mxUtils.bind(this,function(){this.removePage(R)}),S);N.addItem(mxResources.get("renameIt",[d])+"...",null,mxUtils.bind(this,function(){this.renamePage(R,R.getName())}),S);e||N.addSeparator(S);N.addItem(mxResources.get("duplicateIt",[d]),null,mxUtils.bind(this,function(){this.duplicatePage(R,mxResources.get("copyOf",[R.getName()]))}),S)}}e&&(N.addSeparator(S),K(),N.addSeparator(S),
F())}));B.div.className+=" geMenubarMenu";B.smartSeparators=!0;B.showDisabled=!0;B.autoExpand=!0;B.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(B,arguments);B.destroy()});var q=mxEvent.getClientX(l),D=mxEvent.getClientY(l);B.popup(q,D,null,l);this.setCurrentMenu(B);mxEvent.consume(l)}));return b};