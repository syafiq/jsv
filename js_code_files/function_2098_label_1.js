A=A?"1":"0";"pdf"==e&&(null!=S?F="&from="+S.from+"&to="+S.to:0==q&&(F="&allPages=1"));"xmlpng"==e&&(A="1",e="png");if(("xmlpng"==e||"svg"==e)&&null!=this.pages&&null!=this.currentPage)for(q=0;q<this.pages.length;q++)if(this.pages[q]==this.currentPage){M="&from="+q;break}q=C.background;"png"!=e&&"pdf"!=e&&"svg"!=e||!p?p||null!=q&&q!=mxConstants.NONE||(q="#ffffff"):q=mxConstants.NONE;p={globalVars:C.getExportVariables()};E&&(p.grid={size:C.gridSize,steps:C.view.gridSteps,color:C.view.gridColor});Graph.translateDiagram&&
(p.diagramLanguage=Graph.diagramLanguage);return new mxXmlRequest(EXPORT_URL,"format="+e+M+F+"&bg="+(null!=q?q:mxConstants.NONE)+"&base64="+n+"&embedXml="+A+"&xml="+encodeURIComponent(f)+(null!=c?"&filename="+encodeURIComponent(c):"")+"&extras="+encodeURIComponent(JSON.stringify(p))+(null!=y?"&scale="+y:"")+(null!=x?"&border="+x:"")+(l&&isFinite(l)?"&w="+l:"")+(u&&isFinite(u)?"&h="+u:""))};EditorUi.prototype.setMode=function(c,e){this.mode=c};EditorUi.prototype.loadDescriptor=function(c,e,f){var n=