e(U)}),null,null,n,null,p.shadowVisible,null,p,q,null,null,null,"diagram",null)}catch(U){null!=e&&e(U)}};EditorUi.prototype.getEmbeddedSvg=function(c,e,g,n,q,p,y,B,G,C,U,m,t){B=null!=B?B:!0;U=null!=U?U:0;y=null!=G?G:e.background;y==mxConstants.NONE&&(y=null);p=e.getSvg(y,C,U,null,null,p,null,null,null,e.shadowVisible||m,null,t,"diagram");(e.shadowVisible||m)&&e.addSvgShadow(p,null,null,0==U);null!=c&&p.setAttribute("content",c);null!=g&&p.setAttribute("resource",g);var z=mxUtils.bind(this,function(H){H=
(n?"":Graph.xmlDeclaration+"\n"+Graph.svgFileComment+"\n"+Graph.svgDoctype+"\n")+mxUtils.getXml(H);null!=q&&q(H);return H});e.mathEnabled&&this.editor.addMathCss(p);if(null!=q)this.embedFonts(p,mxUtils.bind(this,function(H){B?this.editor.convertImages(H,mxUtils.bind(this,function(L){z(L)})):z(H)}));else return z(p)};EditorUi.prototype.embedFonts=function(c,e){this.editor.loadFonts(mxUtils.bind(this,function(){try{null!=this.editor.resolvedFontCss&&this.editor.addFontCss(c,this.editor.resolvedFontCss),