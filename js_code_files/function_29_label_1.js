e(S)}),null,null,n,null,q.shadowVisible,null,q,p,null,null,null,"diagram",null)}catch(S){null!=e&&e(S)}};EditorUi.prototype.getEmbeddedSvg=function(c,e,f,n,p,q,y,x,E,A,S,l,u){x=null!=x?x:!0;S=null!=S?S:0;y=null!=E?E:e.background;y==mxConstants.NONE&&(y=null);q=e.getSvg(y,A,S,null,null,q,null,null,null,e.shadowVisible||l,null,u,"diagram");(e.shadowVisible||l)&&e.addSvgShadow(q,null,null,0==S);null!=c&&q.setAttribute("content",c);null!=f&&q.setAttribute("resource",f);var C=mxUtils.bind(this,function(J){J=
(n?"":Graph.xmlDeclaration+"\n"+Graph.svgFileComment+"\n"+Graph.svgDoctype+"\n")+mxUtils.getXml(J);null!=p&&p(J);return J});e.mathEnabled&&this.editor.addMathCss(q);if(null!=p)this.embedFonts(q,mxUtils.bind(this,function(J){x?this.editor.convertImages(J,mxUtils.bind(this,function(M){C(M)})):C(J)}));else return C(q)};EditorUi.prototype.embedFonts=function(c,e){this.editor.loadFonts(mxUtils.bind(this,function(){try{null!=this.editor.resolvedFontCss&&this.editor.addFontCss(c,this.editor.resolvedFontCss),