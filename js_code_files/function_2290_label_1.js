StorageFile.listFiles=function(b,g,k,d){b.getDatabaseItems(function(t){var v=[];if(null!=t)for(var B=0;B<t.length;B++)"."==t[B].title.charAt(0)||null!=g&&t[B].type!=g||v.push(t[B]);k(v)},function(){null==b.database?k(StorageFile.listLocalStorageFiles(g)):null!=d&&d()},"filesInfo")};StorageFile.deleteFile=function(b,g,k,d){b.removeDatabaseItem([g,g],k,function(){null==b.database?(localStorage.removeItem(g),k()):null!=d&&d()},["files","filesInfo"])};StorageLibrary=function(b,g,k){StorageFile.call(this,b,g,k)};mxUtils.extend(StorageLibrary,StorageFile);StorageLibrary.prototype.type="L";StorageLibrary.prototype.isAutosave=function(){return!0};StorageLibrary.prototype.saveAs=function(b,g,k){this.saveFile(b,!1,g,k)};StorageLibrary.prototype.getHash=function(){return"L"+encodeURIComponent(this.title)};StorageLibrary.prototype.getTitle=function(){return".scratchpad"==this.title?mxResources.get("scratchpad"):this.title};