S=new mxAsyncCanvas(this.thumbImageCache);A.images=this.thumbImageCache.images;var l=new mxImageExport;l.drawShape=function(u,C){u.shape instanceof mxShape&&u.shape.checkBounds()&&(C.save(),C.translate(.5,.5),u.shape.paint(C),C.translate(-.5,-.5),C.restore())};l.drawText=function(u,C){};l.drawState(B.getView().getState(B.model.root),S);S.finish(mxUtils.bind(this,function(){try{l.drawState(B.getView().getState(B.model.root),A),B!=this.editor.graph&&null!=B.container.parentNode&&B.container.parentNode.removeChild(B.container)}catch(u){N=