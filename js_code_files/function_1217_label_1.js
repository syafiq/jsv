EditorUi.prototype.createEmbedSvg=function(e,g,k,n,u,v,E){var C=this.editor.graph.getSvg(null,null,null,null,null,null,null,null,null,null,!k),H=C.getElementsByTagName("a");if(null!=H)for(var F=0;F<H.length;F++){var T=H[F].getAttribute("href");null!=T&&"#"==T.charAt(0)&&"_blank"==H[F].getAttribute("target")&&H[F].removeAttribute("target")}n&&C.setAttribute("content",this.getFileData(!0));g&&this.editor.graph.addSvgShadow(C);if(k){var p=" ",x="";n&&(p="onclick=\"(function(img){if(img.wnd!=null&&!img.wnd.closed){img.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==img.wnd){img.wnd.postMessage(decodeURIComponent(img.getAttribute('src')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);img.wnd=window.open('"+
EditorUi.lightboxHost+"/?client=1"+(u?"&edit=_blank":"")+(v?"&layers=1":"")+"');}})(this);\"",x+="cursor:pointer;");e&&(x+="max-width:100%;");this.editor.convertImages(C,mxUtils.bind(this,function(G){E('<img src="'+Editor.createSvgDataUri(mxUtils.getXml(G))+'"'+(""!=x?' style="'+x+'"':"")+p+"/>")}))}else x="",n&&(g=this.getSelectedPageIndex(),C.setAttribute("onclick","(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&&src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&&!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('"+
EditorUi.lightboxHost+"/?client=1"+(null!=g?"&page="+g:"")+(u?"&edit=_blank":"")+(v?"&layers=1":"")+"');}}})(this);"),x+="cursor:pointer;"),e&&(e=parseInt(C.getAttribute("width")),u=parseInt(C.getAttribute("height")),C.setAttribute("viewBox","-0.5 -0.5 "+e+" "+u),x+="max-width:100%;max-height:"+u+"px;",C.removeAttribute("height")),""!=x&&C.setAttribute("style",x),this.editor.addFontCss(C),this.editor.graph.mathEnabled&&this.editor.addMathCss(C),E(mxUtils.getXml(C))};EditorUi.prototype.timeSince=function(e){e=