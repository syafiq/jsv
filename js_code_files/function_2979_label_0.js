mxGraphView.prototype.validateBackgroundStyles=function(){var D=this.graph,N=null==D.background||D.background==mxConstants.NONE?D.defaultPageBackgroundColor:D.background,S=null!=N&&this.gridColor!=N.toLowerCase()?this.gridColor:"#ffffff",F="none",K="";if(D.isGridEnabled()||D.gridVisible){K=10;mxClient.IS_SVG?(F=unescape(encodeURIComponent(this.createSvgGrid(S))),F=window.btoa?btoa(F):Base64.encode(F,!0),F="url(data:image/svg+xml;base64,"+F+")",K=D.gridSize*this.scale*this.gridSteps):F="url("+this.gridImage+
")";var R=S=0;null!=D.view.backgroundPageShape&&(R=this.getBackgroundPageBounds(),S=1+R.x,R=1+R.y);K=-Math.round(K-mxUtils.mod(this.translate.x*this.scale-S,K))+"px "+-Math.round(K-mxUtils.mod(this.translate.y*this.scale-R,K))+"px"}S=D.view.canvas;null!=S.ownerSVGElement&&(S=S.ownerSVGElement);R=!Editor.isDarkMode()&&("simple"==Editor.currentTheme||Editor.useSimpleBackgroundForSketch&&"sketch"==Editor.currentTheme);null!=D.view.backgroundPageShape?(D.view.backgroundPageShape.node.style.backgroundPosition=
K,D.view.backgroundPageShape.node.style.backgroundImage=F,D.view.backgroundPageShape.node.style.backgroundColor=N,D.view.backgroundPageShape.node.style.borderColor=D.defaultPageBorderColor,D.container.className="geDiagramContainer geDiagramBackdrop",S.style.backgroundImage="none",S.style.backgroundColor="",D.container.style.backgroundColor=R?D.simpleBackgroundColor:""):(D.container.className="geDiagramContainer",S.style.backgroundPosition=K,S.style.backgroundImage=F,!R||null!=D.background&&D.background!=
mxConstants.NONE?S.style.backgroundColor=N:(S.style.backgroundColor=D.simpleBackgroundColor,D.container.style.backgroundColor=""))};mxGraphView.prototype.createSvgGrid=function(D){for(var N=this.graph.gridSize*this.scale;N<this.minGridSize;)N*=2;for(var S=this.gridSteps*N,F=[],K=1;K<this.gridSteps;K++){var R=K*N;F.push("M 0 "+R+" L "+S+" "+R+" M "+R+" 0 L "+R+" "+S)}return'<svg width="'+S+'" height="'+S+'" xmlns="'+mxConstants.NS_SVG+'"><defs><pattern id="grid" width="'+S+'" height="'+S+'" patternUnits="userSpaceOnUse"><path d="'+