function Dialog(b,e,k,l,C,p,D,M,R,G,L){var Q=R?57:0,d=k,f=l,g=R?0:64,v=Editor.inlineFullscreen||null==b.embedViewport?mxUtils.getDocumentSize():mxUtils.clone(b.embedViewport);null==b.embedViewport&&null!=window.innerHeight&&(v.height=window.innerHeight);var x=v.height,A=Math.max(1,Math.round((v.width-k-g)/2)),J=Math.max(1,Math.round((x-l-b.footerHeight)/3));e.style.maxHeight="100%";k=null!=document.body?Math.min(k,document.body.scrollWidth-g):k;l=Math.min(l,x-g);0<b.dialogs.length&&(this.zIndex+=
2*b.dialogs.length);null==this.bg&&(this.bg=b.createDiv("background"),this.bg.style.position="absolute",this.bg.style.background=Dialog.backdropColor,this.bg.style.height=x+"px",this.bg.style.right="0px",this.bg.style.zIndex=this.zIndex-2,mxUtils.setOpacity(this.bg,this.bgOpacity));v=mxUtils.getDocumentScrollOrigin(document);this.bg.style.left=v.x+"px";this.bg.style.top=v.y+"px";A+=v.x;J+=v.y;Editor.inlineFullscreen||null==b.embedViewport||(this.bg.style.height=mxUtils.getDocumentSize().height+"px",
J+=b.embedViewport.y,A+=b.embedViewport.x);C&&document.body.appendChild(this.bg);var H=b.createDiv(R?"geTransDialog":"geDialog");C=this.getPosition(A,J,k,l);A=C.x;J=C.y;H.style.width=k+"px";H.style.height=l+"px";H.style.left=A+"px";H.style.top=J+"px";H.style.zIndex=this.zIndex;H.appendChild(e);document.body.appendChild(H);!M&&e.clientHeight>H.clientHeight-g&&(e.style.overflowY="auto");e.style.overflowX="hidden";if(p&&(p=document.createElement("img"),p.setAttribute("src",Dialog.prototype.closeImage),
p.setAttribute("title",mxResources.get("close")),p.className="geDialogClose",p.style.top=J+14+"px",p.style.left=A+k+38-Q+"px",p.style.zIndex=this.zIndex,mxEvent.addListener(p,"click",mxUtils.bind(this,function(){b.hideDialog(!0)})),document.body.appendChild(p),this.dialogImg=p,!L)){var O=!1;mxEvent.addGestureListeners(this.bg,mxUtils.bind(this,function(F){O=!0}),null,mxUtils.bind(this,function(F){O&&(b.hideDialog(!0),O=!1)}))}this.resizeListener=mxUtils.bind(this,function(){if(null!=G){var F=G();
null!=F&&(d=k=F.w,f=l=F.h)}F=mxUtils.getDocumentSize();x=F.height;this.bg.style.height=x+"px";Editor.inlineFullscreen||null==b.embedViewport||(this.bg.style.height=mxUtils.getDocumentSize().height+"px");A=Math.max(1,Math.round((F.width-k-g)/2));J=Math.max(1,Math.round((x-l-b.footerHeight)/3));k=null!=document.body?Math.min(d,document.body.scrollWidth-g):d;l=Math.min(f,x-g);F=this.getPosition(A,J,k,l);A=F.x;J=F.y;H.style.left=A+"px";H.style.top=J+"px";H.style.width=k+"px";H.style.height=l+"px";!M&&
e.clientHeight>H.clientHeight-g&&(e.style.overflowY="auto");null!=this.dialogImg&&(this.dialogImg.style.top=J+14+"px",this.dialogImg.style.left=A+k+38-Q+"px")});mxEvent.addListener(window,"resize",this.resizeListener);this.onDialogClose=D;this.container=H;b.editor.fireEvent(new mxEventObject("showDialog"))}Dialog.backdropColor="white";Dialog.prototype.zIndex=mxPopupMenu.prototype.zIndex-2;