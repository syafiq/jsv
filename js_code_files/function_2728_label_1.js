function(q,D,L,U,O,S){"1"==mxUtils.getValue(D.style,"lineShape",null)&&q.setFillColor(mxUtils.getValue(D.style,mxConstants.STYLE_STROKECOLOR,this.stroke));return Q.apply(this,arguments)};PrintDialog.prototype.create=function(q,D){function L(){Y.value=Math.max(1,Math.min(X,Math.max(parseInt(Y.value),parseInt(ca.value))));ca.value=Math.max(1,Math.min(X,Math.min(parseInt(Y.value),parseInt(ca.value))))}function U(wa){function qa(Ga,Ka,Ma){var Pa=Ga.useCssTransforms,Ra=Ga.currentTranslate,Ua=Ga.currentScale,
Ha=Ga.view.translate,Ta=Ga.view.scale;Ga.useCssTransforms&&(Ga.useCssTransforms=!1,Ga.currentTranslate=new mxPoint(0,0),Ga.currentScale=1,Ga.view.translate=new mxPoint(0,0),Ga.view.scale=1);var Sa=Ga.getGraphBounds(),Wa=0,$a=0,Xa=La.get(),ab=1/Ga.pageScale,Za=xa.checked;if(Za){ab=parseInt(Ba.value);var gb=parseInt(Aa.value);ab=Math.min(Xa.height*gb/(Sa.height/Ga.view.scale),Xa.width*ab/(Sa.width/Ga.view.scale))}else ab=parseInt(sa.value)/(100*Ga.pageScale),isNaN(ab)&&(ua=1/Ga.pageScale,sa.value="100 %");
Xa=mxRectangle.fromRectangle(Xa);Xa.width=Math.ceil(Xa.width*ua);Xa.height=Math.ceil(Xa.height*ua);ab*=ua;!Za&&Ga.pageVisible?(Sa=Ga.getPageLayout(),Wa-=Sa.x*Xa.width,$a-=Sa.y*Xa.height):Za=!0;if(null==Ka){Ka=PrintDialog.createPrintPreview(Ga,ab,Xa,0,Wa,$a,Za);Ka.pageSelector=!1;Ka.mathEnabled=!1;da.checked&&(Ka.isCellVisible=function(Ya){return Ga.isCellSelected(Ya)});Wa=q.getCurrentFile();null!=Wa&&(Ka.title=Wa.getTitle());var hb=Ka.writeHead;Ka.writeHead=function(Ya){hb.apply(this,arguments);mxClient.IS_GC&&
(Ya.writeln('<style type="text/css">'),Ya.writeln("@media print {"),Ya.writeln(".MathJax svg { shape-rendering: crispEdges; }"),Ya.writeln("}"),Ya.writeln("</style>"));null!=q.editor.fontCss&&(Ya.writeln('<style type="text/css">'),Ya.writeln(q.editor.fontCss),Ya.writeln("</style>"));for(var cb=Ga.getCustomFonts(),bb=0;bb<cb.length;bb++){var eb=cb[bb].name,db=cb[bb].url;Graph.isCssFontUrl(db)?Ya.writeln('<link rel="stylesheet" href="'+mxUtils.htmlEntities(db)+'" charset="UTF-8" type="text/css">'):
(Ya.writeln('<style type="text/css">'),Ya.writeln('@font-face {\nfont-family: "'+mxUtils.htmlEntities(eb)+'";\nsrc: url("'+mxUtils.htmlEntities(db)+'");\n}'),Ya.writeln("</style>"))}};if("undefined"!==typeof MathJax){var ib=Ka.renderPage;Ka.renderPage=function(Ya,cb,bb,eb,db,kb){var jb=mxClient.NO_FO,fb=ib.apply(this,arguments);mxClient.NO_FO=jb;this.graph.mathEnabled?this.mathEnabled=this.mathEnabled||!0:fb.className="geDisableMathJax";return fb}}Wa=null;$a=O.shapeForegroundColor;Za=O.shapeBackgroundColor;
Xa=O.enableFlowAnimation;O.enableFlowAnimation=!1;null!=O.themes&&"darkTheme"==O.defaultThemeName&&(Wa=O.stylesheet,O.stylesheet=O.getDefaultStylesheet(),O.shapeForegroundColor="#000000",O.shapeBackgroundColor="#ffffff",O.refresh());Ka.open(null,null,Ma,!0);O.enableFlowAnimation=Xa;null!=Wa&&(O.shapeForegroundColor=$a,O.shapeBackgroundColor=Za,O.stylesheet=Wa,O.refresh())}else{Xa=Ga.background;if(null==Xa||""==Xa||Xa==mxConstants.NONE)Xa="#ffffff";Ka.backgroundColor=Xa;Ka.autoOrigin=Za;Ka.appendGraph(Ga,
ab,Wa,$a,Ma,!0);Ma=Ga.getCustomFonts();if(null!=Ka.wnd)for(Wa=0;Wa<Ma.length;Wa++)$a=Ma[Wa].name,Za=Ma[Wa].url,Graph.isCssFontUrl(Za)?Ka.wnd.document.writeln('<link rel="stylesheet" href="'+mxUtils.htmlEntities(Za)+'" charset="UTF-8" type="text/css">'):(Ka.wnd.document.writeln('<style type="text/css">'),Ka.wnd.document.writeln('@font-face {\nfont-family: "'+mxUtils.htmlEntities($a)+'";\nsrc: url("'+mxUtils.htmlEntities(Za)+'");\n}'),Ka.wnd.document.writeln("</style>"))}Pa&&(Ga.useCssTransforms=Pa,
Ga.currentTranslate=Ra,Ga.currentScale=Ua,Ga.view.translate=Ha,Ga.view.scale=Ta);return Ka}var ua=parseInt(ia.value)/100;isNaN(ua)&&(ua=1,ia.value="100 %");ua*=.75;var ma=null,Da=O.shapeForegroundColor,fa=O.shapeBackgroundColor;null!=O.themes&&"darkTheme"==O.defaultThemeName&&(ma=O.stylesheet,O.stylesheet=O.getDefaultStylesheet(),O.shapeForegroundColor="#000000",O.shapeBackgroundColor="#ffffff",O.refresh());var ja=ca.value,na=Y.value,va=!ba.checked,ya=null;if(EditorUi.isElectronApp)PrintDialog.electronPrint(q,
ba.checked,ja,na,xa.checked,Ba.value,Aa.value,parseInt(sa.value)/100,parseInt(ia.value)/100,La.get());else{va&&(va=da.checked||ja==Z&&na==Z);if(!va&&null!=q.pages&&q.pages.length){var Ea=0;va=q.pages.length-1;ba.checked||(Ea=parseInt(ja)-1,va=parseInt(na)-1);for(var za=Ea;za<=va;za++){var ra=q.pages[za];ja=ra==q.currentPage?O:null;if(null==ja){ja=q.createTemporaryGraph(O.stylesheet);ja.shapeForegroundColor=O.shapeForegroundColor;ja.shapeBackgroundColor=O.shapeBackgroundColor;na=!0;Ea=!1;var pa=null,
Na=null;null==ra.viewState&&null==ra.root&&q.updatePageRoot(ra);null!=ra.viewState&&(na=ra.viewState.pageVisible,Ea=ra.viewState.mathEnabled,pa=ra.viewState.background,Na=ra.viewState.backgroundImage,ja.extFonts=ra.viewState.extFonts);null!=Na&&null!=Na.originalSrc&&(Na=q.createImageForPageLink(Na.originalSrc,ra));ja.background=pa;ja.backgroundImage=null!=Na?new mxImage(Na.src,Na.width,Na.height,Na.x,Na.y):null;ja.pageVisible=na;ja.mathEnabled=Ea;var Qa=ja.getGraphBounds;ja.getGraphBounds=function(){var Ga=
Qa.apply(this,arguments),Ka=this.backgroundImage;if(null!=Ka&&null!=Ka.width&&null!=Ka.height){var Ma=this.view.translate,Pa=this.view.scale;Ga=mxRectangle.fromRectangle(Ga);Ga.add(new mxRectangle((Ma.x+Ka.x)*Pa,(Ma.y+Ka.y)*Pa,Ka.width*Pa,Ka.height*Pa))}return Ga};var Va=ja.getGlobalVariable;ja.getGlobalVariable=function(Ga){return"page"==Ga?ra.getName():"pagenumber"==Ga?za+1:"pagecount"==Ga?null!=q.pages?q.pages.length:1:Va.apply(this,arguments)};document.body.appendChild(ja.container);q.updatePageRoot(ra);
ja.model.setRoot(ra.root)}ya=qa(ja,ya,za!=va);ja!=O&&ja.container.parentNode.removeChild(ja.container)}}else ya=qa(O);null==ya?q.handleError({message:mxResources.get("errorUpdatingPreview")}):(ya.mathEnabled&&(va=ya.wnd.document,wa&&(ya.wnd.IMMEDIATE_PRINT=!0),va.writeln('<script type="text/javascript" src="'+DRAWIO_BASE_URL+'/js/math-print.js">\x3c/script>')),ya.closeDocument(),!ya.mathEnabled&&wa&&PrintDialog.printPreview(ya));null!=ma&&(O.shapeForegroundColor=Da,O.shapeBackgroundColor=fa,O.stylesheet=
ma,O.refresh())}}var O=q.editor.graph,S=document.createElement("div"),R=document.createElement("h3");R.style.width="100%";R.style.textAlign="center";R.style.marginTop="0px";mxUtils.write(R,D||mxResources.get("print"));S.appendChild(R);var X=1,Z=1;R=document.createElement("div");R.style.cssText="border-bottom:1px solid lightGray;padding-bottom:12px;margin-bottom:12px;";var ba=document.createElement("input");ba.style.cssText="margin-right:8px;margin-bottom:8px;";ba.setAttribute("value","all");ba.setAttribute("type",
"radio");ba.setAttribute("name","pages-printdialog");R.appendChild(ba);D=document.createElement("span");mxUtils.write(D,mxResources.get("printAllPages"));R.appendChild(D);mxUtils.br(R);var aa=ba.cloneNode(!0);ba.setAttribute("checked","checked");aa.setAttribute("value","range");R.appendChild(aa);D=document.createElement("span");mxUtils.write(D,mxResources.get("pages")+":");R.appendChild(D);var ca=document.createElement("input");ca.style.cssText="margin:0 8px 0 8px;";ca.setAttribute("value","1");ca.setAttribute("type",
"number");ca.setAttribute("min","1");ca.style.width="50px";R.appendChild(ca);D=document.createElement("span");mxUtils.write(D,mxResources.get("to"));R.appendChild(D);var Y=ca.cloneNode(!0);R.appendChild(Y);mxEvent.addListener(ca,"focus",function(){aa.checked=!0});mxEvent.addListener(Y,"focus",function(){aa.checked=!0});mxEvent.addListener(ca,"change",L);mxEvent.addListener(Y,"change",L);if(null!=q.pages&&(X=q.pages.length,null!=q.currentPage))for(D=0;D<q.pages.length;D++)if(q.currentPage==q.pages[D]){Z=
D+1;ca.value=Z;Y.value=Z;break}ca.setAttribute("max",X);Y.setAttribute("max",X);q.isPagesEnabled()?1<X&&(S.appendChild(R),aa.checked=!0):aa.checked=!0;mxUtils.br(R);var da=document.createElement("input");da.setAttribute("value","all");da.setAttribute("type","radio");da.style.marginRight="8px";O.isSelectionEmpty()&&da.setAttribute("disabled","disabled");var ea=document.createElement("div");ea.style.marginBottom="10px";1==X?(da.setAttribute("type","checkbox"),da.style.marginBottom="12px",ea.appendChild(da)):
(da.setAttribute("name","pages-printdialog"),da.style.marginBottom="8px",R.appendChild(da));D=document.createElement("span");mxUtils.write(D,mxResources.get("selectionOnly"));da.parentNode.appendChild(D);1==X&&mxUtils.br(da.parentNode);var ka=document.createElement("input");ka.style.marginRight="8px";ka.setAttribute("value","adjust");ka.setAttribute("type","radio");ka.setAttribute("name","printZoom");ea.appendChild(ka);D=document.createElement("span");mxUtils.write(D,mxResources.get("adjustTo"));
ea.appendChild(D);var sa=document.createElement("input");sa.style.cssText="margin:0 8px 0 8px;";sa.setAttribute("value","100 %");sa.style.width="50px";ea.appendChild(sa);mxEvent.addListener(sa,"focus",function(){ka.checked=!0});S.appendChild(ea);R=R.cloneNode(!1);var xa=ka.cloneNode(!0);xa.setAttribute("value","fit");ka.setAttribute("checked","checked");D=document.createElement("div");D.style.cssText="display:inline-block;vertical-align:top;padding-top:2px;";D.appendChild(xa);R.appendChild(D);ea=
document.createElement("table");ea.style.display="inline-block";var ta=document.createElement("tbody"),ha=document.createElement("tr"),Oa=ha.cloneNode(!0),Ia=document.createElement("td"),Ca=Ia.cloneNode(!0),Fa=Ia.cloneNode(!0),la=Ia.cloneNode(!0),Ja=Ia.cloneNode(!0),oa=Ia.cloneNode(!0);Ia.style.textAlign="right";la.style.textAlign="right";mxUtils.write(Ia,mxResources.get("fitTo"));var Ba=document.createElement("input");Ba.style.cssText="margin:0 8px 0 8px;";Ba.setAttribute("value","1");Ba.setAttribute("min",
"1");Ba.setAttribute("type","number");Ba.style.width="40px";Ca.appendChild(Ba);D=document.createElement("span");mxUtils.write(D,mxResources.get("fitToSheetsAcross"));Fa.appendChild(D);mxUtils.write(la,mxResources.get("fitToBy"));var Aa=Ba.cloneNode(!0);Ja.appendChild(Aa);mxEvent.addListener(Ba,"focus",function(){xa.checked=!0});mxEvent.addListener(Aa,"focus",function(){xa.checked=!0});D=document.createElement("span");mxUtils.write(D,mxResources.get("fitToSheetsDown"));oa.appendChild(D);ha.appendChild(Ia);
ha.appendChild(Ca);ha.appendChild(Fa);Oa.appendChild(la);Oa.appendChild(Ja);Oa.appendChild(oa);ta.appendChild(ha);ta.appendChild(Oa);ea.appendChild(ta);R.appendChild(ea);S.appendChild(R);R=document.createElement("div");D=document.createElement("div");D.style.fontWeight="bold";D.style.marginBottom="12px";mxUtils.write(D,mxResources.get("paperSize"));R.appendChild(D);D=document.createElement("div");D.style.marginBottom="12px";var La=PageSetupDialog.addPageFormatPanel(D,"printdialog",q.editor.graph.pageFormat||
mxConstants.PAGE_FORMAT_A4_PORTRAIT);R.appendChild(D);D=document.createElement("span");mxUtils.write(D,mxResources.get("pageScale"));R.appendChild(D);var ia=document.createElement("input");ia.style.cssText="margin:0 8px 0 8px;";ia.setAttribute("value","100 %");ia.style.width="60px";R.appendChild(ia);S.appendChild(R);D=document.createElement("div");D.style.cssText="text-align:right;margin:48px 0 0 0;";R=mxUtils.button(mxResources.get("cancel"),function(){q.hideDialog()});R.className="geBtn";q.editor.cancelFirst&&
D.appendChild(R);q.isOffline()||(ea=mxUtils.button(mxResources.get("help"),function(){O.openLink("https://www.diagrams.net/doc/faq/print-diagram")}),ea.className="geBtn",D.appendChild(ea));PrintDialog.previewEnabled&&(ea=mxUtils.button(mxResources.get("preview"),function(){q.hideDialog();U(!1)}),ea.className="geBtn",D.appendChild(ea));ea=mxUtils.button(mxResources.get(PrintDialog.previewEnabled?"print":"ok"),function(){q.hideDialog();U(!0)});ea.className="geBtn gePrimaryBtn";D.appendChild(ea);q.editor.cancelFirst||
D.appendChild(R);S.appendChild(D);this.container=S};var P=ChangePageSetup.prototype.execute;ChangePageSetup.prototype.execute=function(){null==this.page&&(this.page=this.ui.currentPage);if(this.page!=this.ui.currentPage){if(null!=this.page.viewState){this.ignoreColor||(this.page.viewState.background=this.color);if(!this.ignoreImage){var q=this.image;null!=q&&null!=q.src&&Graph.isPageLink(q.src)&&(q={originalSrc:q.src});this.page.viewState.backgroundImage=q}null!=this.format&&(this.page.viewState.pageFormat=