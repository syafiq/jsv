"?inline=false",last_commit_id:l.last_commit_id,refPos:t};l=this.getFileContent(l);return m?new GitLabLibrary(this.ui,l,e):new GitLabFile(this.ui,l,e)};GitLabClient.prototype.insertFile=function(e,f,c,l,m,t,y){m=null!=m?m:!1;t=t.split("/");this.getRefIndex(t,!0,mxUtils.bind(this,function(C,z){var A=Math.max(z-1,0),J=C.slice(0,A).join("/"),d=C[A],g=C[z];path=C.slice(z+1,C.length).join("/");0<path.length&&(path+="/");path+=e;this.checkExists(J+"/"+d+"/"+g+"/"+path,!0,mxUtils.bind(this,function(k,n){k?
m?(y||(f=Base64.encode(f)),this.showCommitDialog(e,!0,mxUtils.bind(this,function(x){this.writeFile(J,d,g,path,x,f,n,mxUtils.bind(this,function(u){try{var D=JSON.parse(u.getText());c(this.createGitLabFile(J,d,g,null!=D.content?D.content:D,m,z))}catch(F){l(F)}}),l)}),l)):(k=DRAWIO_GITLAB_URL+"/",c(new GitLabFile(this.ui,f,{org:J,repo:d,ref:g,name:e,path:path,html_url:k+J+"/"+d+"/blob/"+g+"/"+path,download_url:k+J+"/"+d+"/raw/"+g+"/"+path+"?inline=false",refPos:z,last_commit_id:n,isNew:!0}))):l()}))}),
l,null,4>=t.length)};GitLabClient.prototype.checkExists=function(e,f,c){this.getFile(e,mxUtils.bind(this,function(l){if(f){var m=this.ui.spinner.pause();this.ui.confirm(mxResources.get("replaceIt",[e]),function(){m();c(!0,l.getCurrentEtag())},function(){m();c(!1)})}else this.ui.spinner.stop(),this.ui.showError(mxResources.get("error"),mxResources.get("fileExists"),mxResources.get("ok"),function(){c(!1)})}),mxUtils.bind(this,function(l){c(!0)}),null,!0)};GitLabClient.prototype.writeFile=function(e,