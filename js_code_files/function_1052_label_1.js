PrintDialog.prototype.create=function(b){function e(f){var g=D.checked||G.checked,v=parseInt(Q.value)/100;isNaN(v)&&(v=1,Q.value="100%");v*=.75;var x=k.pageFormat||mxConstants.PAGE_FORMAT_A4_PORTRAIT,A=1/k.pageScale;if(g){var J=D.checked?1:parseInt(L.value);isNaN(J)||(A=mxUtils.getScaleForPageCount(J,k,x))}k.getGraphBounds();var H=J=0;x=mxRectangle.fromRectangle(x);x.width=Math.ceil(x.width*v);x.height=Math.ceil(x.height*v);A*=v;!g&&k.pageVisible?(v=k.getPageLayout(),J-=v.x*x.width,H-=v.y*x.height):
g=!0;g=PrintDialog.createPrintPreview(k,A,x,0,J,H,g);g.open();f&&PrintDialog.printPreview(g)}var k=b.editor.graph,l=document.createElement("table");l.style.width="100%";l.style.height="100%";var C=document.createElement("tbody");var p=document.createElement("tr");var D=document.createElement("input");D.setAttribute("type","checkbox");var M=document.createElement("td");M.setAttribute("colspan","2");M.style.fontSize="10pt";M.appendChild(D);var R=document.createElement("span");mxUtils.write(R," "+mxResources.get("fitPage"));
M.appendChild(R);mxEvent.addListener(R,"click",function(f){D.checked=!D.checked;G.checked=!D.checked;mxEvent.consume(f)});mxEvent.addListener(D,"change",function(){G.checked=!D.checked});p.appendChild(M);C.appendChild(p);p=p.cloneNode(!1);var G=document.createElement("input");G.setAttribute("type","checkbox");M=document.createElement("td");M.style.fontSize="10pt";M.appendChild(G);R=document.createElement("span");mxUtils.write(R," "+mxResources.get("posterPrint")+":");M.appendChild(R);mxEvent.addListener(R,
"click",function(f){G.checked=!G.checked;D.checked=!G.checked;mxEvent.consume(f)});p.appendChild(M);var L=document.createElement("input");L.setAttribute("value","1");L.setAttribute("type","number");L.setAttribute("min","1");L.setAttribute("size","4");L.setAttribute("disabled","disabled");L.style.width="50px";M=document.createElement("td");M.style.fontSize="10pt";M.appendChild(L);mxUtils.write(M," "+mxResources.get("pages")+" (max)");p.appendChild(M);C.appendChild(p);mxEvent.addListener(G,"change",
function(){G.checked?L.removeAttribute("disabled"):L.setAttribute("disabled","disabled");D.checked=!G.checked});p=p.cloneNode(!1);M=document.createElement("td");mxUtils.write(M,mxResources.get("pageScale")+":");p.appendChild(M);M=document.createElement("td");var Q=document.createElement("input");Q.setAttribute("value","100 %");Q.setAttribute("size","5");Q.style.width="50px";M.appendChild(Q);p.appendChild(M);C.appendChild(p);p=document.createElement("tr");M=document.createElement("td");M.colSpan=2;
M.style.paddingTop="20px";M.setAttribute("align","right");R=mxUtils.button(mxResources.get("cancel"),function(){b.hideDialog()});R.className="geBtn";b.editor.cancelFirst&&M.appendChild(R);if(PrintDialog.previewEnabled){var d=mxUtils.button(mxResources.get("preview"),function(){b.hideDialog();e(!1)});d.className="geBtn";M.appendChild(d)}d=mxUtils.button(mxResources.get(PrintDialog.previewEnabled?"print":"ok"),function(){b.hideDialog();e(!0)});d.className="geBtn gePrimaryBtn";M.appendChild(d);b.editor.cancelFirst||
M.appendChild(R);p.appendChild(M);C.appendChild(p);l.appendChild(C);this.container=l};PrintDialog.printPreview=function(b){try{if(null!=b.wnd){var e=function(){b.wnd.focus();b.wnd.print();b.wnd.close()};mxClient.IS_GC?window.setTimeout(e,500):e()}}catch(k){}};