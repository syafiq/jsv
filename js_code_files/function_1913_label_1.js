function(I,M,Q,P){var V=k.model,W=null;V.beginUpdate();try{if(W=H.apply(this,arguments),c(I))for(var q=0;q<W.length;q++)if(V.isEdge(W[q])&&null==V.getTerminal(W[q],!0)){V.setTerminal(W[q],I,!0);var D=k.getCellGeometry(W[q]);D.points=null;null!=D.getTerminalPoint(!0)&&D.setTerminalPoint(null,!0)}}finally{V.endUpdate()}return W}}var F={88:g.actions.get("selectChildren"),84:g.actions.get("selectSubtree"),80:g.actions.get("selectParent"),83:g.actions.get("selectSiblings")},T=g.onKeyDown;g.onKeyDown=function(I){try{if(k.isEnabled()&&
!k.isEditing()&&c(k.getSelectionCell())&&1==k.getSelectionCount()){var M=null;0<k.getIncomingTreeEdges(k.getSelectionCell()).length&&(9==I.which?M=mxEvent.isShiftDown(I)?z(k.getSelectionCell()):A(k.getSelectionCell()):13==I.which&&(M=B(k.getSelectionCell(),!mxEvent.isShiftDown(I))));if(null!=M&&0<M.length)1==M.length&&k.model.isEdge(M[0])?k.setSelectionCell(k.model.getTerminal(M[0],!1)):k.setSelectionCell(M[M.length-1]),null!=g.hoverIcons&&g.hoverIcons.update(k.view.getState(k.getSelectionCell())),
k.startEditingAtCell(k.getSelectionCell()),mxEvent.consume(I);else if(mxEvent.isAltDown(I)&&mxEvent.isShiftDown(I)){var Q=F[I.keyCode];null!=Q&&(Q.funct(I),mxEvent.consume(I))}else 37==I.keyCode?(e(k.getSelectionCell(),mxConstants.DIRECTION_WEST),mxEvent.consume(I)):38==I.keyCode?(e(k.getSelectionCell(),mxConstants.DIRECTION_NORTH),mxEvent.consume(I)):39==I.keyCode?(e(k.getSelectionCell(),mxConstants.DIRECTION_EAST),mxEvent.consume(I)):40==I.keyCode&&(e(k.getSelectionCell(),mxConstants.DIRECTION_SOUTH),
mxEvent.consume(I))}}catch(P){g.handleError(P)}mxEvent.isConsumed(I)||T.apply(this,arguments)};var p=k.connectVertex;k.connectVertex=function(I,M,Q,P,V,W,q){var D=k.getIncomingTreeEdges(I);if(c(I)){var L=y(I),U=L==mxConstants.DIRECTION_EAST||L==mxConstants.DIRECTION_WEST,O=M==mxConstants.DIRECTION_EAST||M==mxConstants.DIRECTION_WEST;return L==M||0==D.length?A(I,M):U==O?z(I):B(I,M!=mxConstants.DIRECTION_NORTH&&M!=mxConstants.DIRECTION_WEST)}return p.apply(this,arguments)};k.getSubtree=function(I){var M=
[I];!l(I)&&!c(I)||t(I)||k.traverse(I,!0,function(Q,P){var V=null!=P&&k.isTreeEdge(P);V&&0>mxUtils.indexOf(M,P)&&M.push(P);(null==P||V)&&0>mxUtils.indexOf(M,Q)&&M.push(Q);return null==P||V});return M};var x=mxVertexHandler.prototype.init;mxVertexHandler.prototype.init=function(){x.apply(this,arguments);(l(this.state.cell)||c(this.state.cell))&&!t(this.state.cell)&&0<this.graph.getOutgoingTreeEdges(this.state.cell).length&&(this.moveHandle=mxUtils.createImage(Editor.moveImage),this.moveHandle.setAttribute("title",
"Move Subtree"),this.moveHandle.style.position="absolute",this.moveHandle.style.cursor="pointer",this.moveHandle.style.width="24px",this.moveHandle.style.height="24px",this.graph.container.appendChild(this.moveHandle),mxEvent.addGestureListeners(this.moveHandle,mxUtils.bind(this,function(I){this.graph.graphHandler.start(this.state.cell,mxEvent.getClientX(I),mxEvent.getClientY(I),this.graph.getSubtree(this.state.cell));this.graph.graphHandler.cellWasClicked=!0;this.graph.isMouseTrigger=mxEvent.isMouseEvent(I);
this.graph.isMouseDown=!0;g.hoverIcons.reset();mxEvent.consume(I)})))};var G=mxVertexHandler.prototype.redrawHandles;mxVertexHandler.prototype.redrawHandles=function(){G.apply(this,arguments);null!=this.moveHandle&&(this.moveHandle.style.left=this.state.x+this.state.width+(40>this.state.width?10:0)+2+"px",this.moveHandle.style.top=this.state.y+this.state.height+(40>this.state.height?10:0)+2+"px")};var K=mxVertexHandler.prototype.setHandlesVisible;mxVertexHandler.prototype.setHandlesVisible=function(I){K.apply(this,
arguments);null!=this.moveHandle&&(this.moveHandle.style.display=I?"":"none")};var N=mxVertexHandler.prototype.destroy;mxVertexHandler.prototype.destroy=function(I,M){N.apply(this,arguments);null!=this.moveHandle&&(this.moveHandle.parentNode.removeChild(this.moveHandle),this.moveHandle=null)}};if("undefined"!==typeof Sidebar){var f=Sidebar.prototype.createAdvancedShapes;Sidebar.prototype.createAdvancedShapes=function(){var c=f.apply(this,arguments),l=this.graph;return c.concat([this.addEntry("tree container",