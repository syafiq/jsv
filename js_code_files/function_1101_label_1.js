ha);oa.editorUi.fireEvent(new mxEventObject("styleChanged","keys",ta,"values",za,"cells",Aa.getSelectionCells()))}finally{Aa.getModel().endUpdate()}}function U(Y,ha,ma){var xa=mxUtils.getOffset(q,!0),ta=mxUtils.getOffset(Y,!0);ha.style.position="absolute";ha.style.left=ta.x-xa.x+"px";ha.style.top=ta.y-xa.y+"px";ha.style.width=Y.offsetWidth+"px";ha.style.height=Y.offsetHeight-(ma?4:0)+"px";ha.style.zIndex=5}function ca(Y,ha,ma){var xa=document.createElement("div");xa.style.width="32px";xa.style.height=
"4px";xa.style.margin="2px";xa.style.border="1px solid black";xa.style.background=ha&&"none"!=ha?ha:"url('"+Dialog.prototype.noColorImage+"')";btn=mxUtils.button("",mxUtils.bind(oa,function(ta){this.editorUi.pickColor(ha,function(za){xa.style.background="none"==za?"url('"+Dialog.prototype.noColorImage+"')":za;ba(Y,za,ma)});mxEvent.consume(ta)}));btn.style.height="12px";btn.style.width="40px";btn.className="geColorBtn";btn.appendChild(xa);return btn}function da(Y,ha,ma,xa,ta,za,Ga){null!=ha&&(ha=ha.split(","),
na.push({name:Y,values:ha,type:ma,defVal:xa,countProperty:ta,parentRow:za,isDeletable:!0,flipBkg:Ga}));btn=mxUtils.button("+",mxUtils.bind(oa,function(Oa){for(var Na=za,Sa=0;null!=Na.nextSibling;)if(Na.nextSibling.getAttribute("data-pName")==Y)Na=Na.nextSibling,Sa++;else break;var Qa={type:ma,parentRow:za,index:Sa,isDeletable:!0,defVal:xa,countProperty:ta};Sa=ua(Y,"",Qa,0==Sa%2,Ga);ba(Y,xa,Qa);Na.parentNode.insertBefore(Sa,Na.nextSibling);mxEvent.consume(Oa)}));btn.style.height="16px";btn.style.width=
"25px";btn.className="geColorBtn";return btn}function pa(Y,ha,ma,xa,ta,za,Ga){if(0<ta){var Oa=Array(ta);ha=null!=ha?ha.split(","):[];for(var Na=0;Na<ta;Na++)Oa[Na]=null!=ha[Na]?ha[Na]:null!=xa?xa:"";na.push({name:Y,values:Oa,type:ma,defVal:xa,parentRow:za,flipBkg:Ga,size:ta})}return document.createElement("div")}function ra(Y,ha,ma){var xa=document.createElement("input");xa.type="checkbox";xa.checked="1"==ha;mxEvent.addListener(xa,"change",function(){ba(Y,xa.checked?"1":"0",ma)});return xa}function ua(Y,
ha,ma,xa,ta){var za=ma.dispName,Ga=ma.type,Oa=document.createElement("tr");Oa.className="gePropRow"+(ta?"Dark":"")+(xa?"Alt":"")+" gePropNonHeaderRow";Oa.setAttribute("data-pName",Y);Oa.setAttribute("data-pValue",ha);xa=!1;null!=ma.index&&(Oa.setAttribute("data-index",ma.index),za=(null!=za?za:"")+"["+ma.index+"]",xa=!0);var Na=document.createElement("td");Na.className="gePropRowCell";za=mxResources.get(za,null,za);mxUtils.write(Na,za);Na.setAttribute("title",za);xa&&(Na.style.textAlign="right");
Oa.appendChild(Na);Na=document.createElement("td");Na.className="gePropRowCell";if("color"==Ga)Na.appendChild(ca(Y,ha,ma));else if("bool"==Ga||"boolean"==Ga)Na.appendChild(ra(Y,ha,ma));else if("enum"==Ga){var Sa=ma.enumList;for(ta=0;ta<Sa.length;ta++)if(za=Sa[ta],za.val==ha){mxUtils.write(Na,mxResources.get(za.dispName,null,za.dispName));break}mxEvent.addListener(Na,"click",mxUtils.bind(oa,function(){var Qa=document.createElement("select");U(Na,Qa);for(var Ea=0;Ea<Sa.length;Ea++){var Ja=Sa[Ea],Pa=
document.createElement("option");Pa.value=mxUtils.htmlEntities(Ja.val);mxUtils.write(Pa,mxResources.get(Ja.dispName,null,Ja.dispName));Qa.appendChild(Pa)}Qa.value=ha;q.appendChild(Qa);mxEvent.addListener(Qa,"change",function(){var $a=mxUtils.htmlEntities(Qa.value);ba(Y,$a,ma)});Qa.focus();mxEvent.addListener(Qa,"blur",function(){q.removeChild(Qa)})}))}else"dynamicArr"==Ga?Na.appendChild(da(Y,ha,ma.subType,ma.subDefVal,ma.countProperty,Oa,ta)):"staticArr"==Ga?Na.appendChild(pa(Y,ha,ma.subType,ma.subDefVal,
ma.size,Oa,ta)):"readOnly"==Ga?(ta=document.createElement("input"),ta.setAttribute("readonly",""),ta.value=ha,ta.style.width="96px",ta.style.borderWidth="0px",Na.appendChild(ta)):(Na.innerHTML=mxUtils.htmlEntities(decodeURIComponent(ha)),mxEvent.addListener(Na,"click",mxUtils.bind(oa,function(){function Qa(){var Ja=Ea.value;Ja=0==Ja.length&&"string"!=Ga?0:Ja;ma.allowAuto&&(null!=Ja.trim&&"auto"==Ja.trim().toLowerCase()?(Ja="auto",Ga="string"):(Ja=parseFloat(Ja),Ja=isNaN(Ja)?0:Ja));null!=ma.min&&Ja<
ma.min?Ja=ma.min:null!=ma.max&&Ja>ma.max&&(Ja=ma.max);Ja=encodeURIComponent(("int"==Ga?parseInt(Ja):Ja)+"");ba(Y,Ja,ma)}var Ea=document.createElement("input");U(Na,Ea,!0);Ea.value=decodeURIComponent(ha);Ea.className="gePropEditor";"int"!=Ga&&"float"!=Ga||ma.allowAuto||(Ea.type="number",Ea.step="int"==Ga?"1":"any",null!=ma.min&&(Ea.min=parseFloat(ma.min)),null!=ma.max&&(Ea.max=parseFloat(ma.max)));q.appendChild(Ea);mxEvent.addListener(Ea,"keypress",function(Ja){13==Ja.keyCode&&Qa()});Ea.focus();mxEvent.addListener(Ea,
"blur",function(){Qa()})})));ma.isDeletable&&(ta=mxUtils.button("-",mxUtils.bind(oa,function(Qa){ba(Y,"",ma,ma.index);mxEvent.consume(Qa)})),ta.style.height="16px",ta.style.width="25px",ta.style.float="right",ta.className="geColorBtn",Na.appendChild(ta));Oa.appendChild(Na);return Oa}var oa=this,Aa=this.editorUi.editor.graph,na=[];q.style.position="relative";q.style.padding="0";var ya=document.createElement("table");ya.className="geProperties";ya.style.whiteSpace="nowrap";ya.style.width="100%";var wa=
document.createElement("tr");wa.className="gePropHeader";var Ca=document.createElement("th");Ca.className="gePropHeaderCell";var La=document.createElement("img");La.src=Sidebar.prototype.expandedImage;La.style.verticalAlign="middle";Ca.appendChild(La);mxUtils.write(Ca,mxResources.get("property"));wa.style.cursor="pointer";var Ma=function(){var Y=ya.querySelectorAll(".gePropNonHeaderRow");if(oa.editorUi.propertiesCollapsed){La.src=Sidebar.prototype.collapsedImage;var ha="none";for(var ma=q.childNodes.length-
1;0<=ma;ma--)try{var xa=q.childNodes[ma],ta=xa.nodeName.toUpperCase();"INPUT"!=ta&&"SELECT"!=ta||q.removeChild(xa)}catch(za){}}else La.src=Sidebar.prototype.expandedImage,ha="";for(ma=0;ma<Y.length;ma++)Y[ma].style.display=ha};mxEvent.addListener(wa,"click",function(){oa.editorUi.propertiesCollapsed=!oa.editorUi.propertiesCollapsed;Ma()});wa.appendChild(Ca);Ca=document.createElement("th");Ca.className="gePropHeaderCell";Ca.innerHTML=mxResources.get("value");wa.appendChild(Ca);ya.appendChild(wa);var Ka=
!1,Ba=!1;wa=null;1==S.vertices.length&&0==S.edges.length?wa=S.vertices[0].id:0==S.vertices.length&&1==S.edges.length&&(wa=S.edges[0].id);null!=wa&&ya.appendChild(ua("id",mxUtils.htmlEntities(wa),{dispName:"ID",type:"readOnly"},!0,!1));for(var ab in E)if(wa=E[ab],"function"!=typeof wa.isVisible||wa.isVisible(S,this)){var Ya=null!=S.style[ab]?mxUtils.htmlEntities(S.style[ab]+""):null!=wa.getDefaultValue?wa.getDefaultValue(S,this):wa.defVal;if("separator"==wa.type)Ba=!Ba;else{if("staticArr"==wa.type)wa.size=
parseInt(S.style[wa.sizeProperty]||E[wa.sizeProperty].defVal)||0;else if(null!=wa.dependentProps){var y=wa.dependentProps,N=[],P=[];for(Ca=0;Ca<y.length;Ca++){var W=S.style[y[Ca]];P.push(E[y[Ca]].subDefVal);N.push(null!=W?W.split(","):[])}wa.dependentPropsDefVal=P;wa.dependentPropsVals=N}ya.appendChild(ua(ab,Ya,wa,Ka,Ba));Ka=!Ka}}for(Ca=0;Ca<na.length;Ca++)for(wa=na[Ca],E=wa.parentRow,S=0;S<wa.values.length;S++)ab=ua(wa.name,wa.values[S],{type:wa.type,parentRow:wa.parentRow,isDeletable:wa.isDeletable,
index:S,defVal:wa.defVal,countProperty:wa.countProperty,size:wa.size},0==S%2,wa.flipBkg),E.parentNode.insertBefore(ab,E.nextSibling),E=ab;q.appendChild(ya);Ma();return q};StyleFormatPanel.prototype.addStyles=function(q){function E(wa){mxEvent.addListener(wa,"mouseenter",function(){wa.style.opacity="1"});mxEvent.addListener(wa,"mouseleave",function(){wa.style.opacity="0.5"})}var S=this.editorUi,ba=S.editor.graph,U=document.createElement("div");U.style.whiteSpace="nowrap";U.style.paddingLeft="24px";