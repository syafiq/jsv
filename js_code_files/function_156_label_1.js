Ba);aa.editorUi.fireEvent(new mxEventObject("styleChanged","keys",ia,"values",wa,"cells",ca.getSelectionCells()))}finally{ca.getModel().endUpdate()}}function O(oa,Ba,Aa){var La=mxUtils.getOffset(q,!0),ia=mxUtils.getOffset(oa,!0);Ba.style.position="absolute";Ba.style.left=ia.x-La.x+"px";Ba.style.top=ia.y-La.y+"px";Ba.style.width=oa.offsetWidth+"px";Ba.style.height=oa.offsetHeight-(Aa?4:0)+"px";Ba.style.zIndex=5}function S(oa,Ba,Aa){var La=document.createElement("div");La.style.width="32px";La.style.height=
"4px";La.style.margin="2px";La.style.border="1px solid black";La.style.background=Ba&&"none"!=Ba?Ba:"url('"+Dialog.prototype.noColorImage+"')";btn=mxUtils.button("",mxUtils.bind(aa,function(ia){this.editorUi.pickColor(Ba,function(wa){La.style.background="none"==wa?"url('"+Dialog.prototype.noColorImage+"')":wa;U(oa,wa,Aa)});mxEvent.consume(ia)}));btn.style.height="12px";btn.style.width="40px";btn.className="geColorBtn";btn.appendChild(La);return btn}function R(oa,Ba,Aa,La,ia,wa,qa){null!=Ba&&(Ba=Ba.split(","),
Y.push({name:oa,values:Ba,type:Aa,defVal:La,countProperty:ia,parentRow:wa,isDeletable:!0,flipBkg:qa}));btn=mxUtils.button("+",mxUtils.bind(aa,function(ua){for(var ma=wa,Da=0;null!=ma.nextSibling;)if(ma.nextSibling.getAttribute("data-pName")==oa)ma=ma.nextSibling,Da++;else break;var fa={type:Aa,parentRow:wa,index:Da,isDeletable:!0,defVal:La,countProperty:ia};Da=ba(oa,"",fa,0==Da%2,qa);U(oa,La,fa);ma.parentNode.insertBefore(Da,ma.nextSibling);mxEvent.consume(ua)}));btn.style.height="16px";btn.style.width=
"25px";btn.className="geColorBtn";return btn}function X(oa,Ba,Aa,La,ia,wa,qa){if(0<ia){var ua=Array(ia);Ba=null!=Ba?Ba.split(","):[];for(var ma=0;ma<ia;ma++)ua[ma]=null!=Ba[ma]?Ba[ma]:null!=La?La:"";Y.push({name:oa,values:ua,type:Aa,defVal:La,parentRow:wa,flipBkg:qa,size:ia})}return document.createElement("div")}function Z(oa,Ba,Aa){var La=document.createElement("input");La.type="checkbox";La.checked="1"==Ba;mxEvent.addListener(La,"change",function(){U(oa,La.checked?"1":"0",Aa)});return La}function ba(oa,
Ba,Aa,La,ia){var wa=Aa.dispName,qa=Aa.type,ua=document.createElement("tr");ua.className="gePropRow"+(ia?"Dark":"")+(La?"Alt":"")+" gePropNonHeaderRow";ua.setAttribute("data-pName",oa);ua.setAttribute("data-pValue",Ba);La=!1;null!=Aa.index&&(ua.setAttribute("data-index",Aa.index),wa=(null!=wa?wa:"")+"["+Aa.index+"]",La=!0);var ma=document.createElement("td");ma.className="gePropRowCell";wa=mxResources.get(wa,null,wa);mxUtils.write(ma,wa);ma.setAttribute("title",wa);La&&(ma.style.textAlign="right");
ua.appendChild(ma);ma=document.createElement("td");ma.className="gePropRowCell";if("color"==qa)ma.appendChild(S(oa,Ba,Aa));else if("bool"==qa||"boolean"==qa)ma.appendChild(Z(oa,Ba,Aa));else if("enum"==qa){var Da=Aa.enumList;for(ia=0;ia<Da.length;ia++)if(wa=Da[ia],wa.val==Ba){mxUtils.write(ma,mxResources.get(wa.dispName,null,wa.dispName));break}mxEvent.addListener(ma,"click",mxUtils.bind(aa,function(){var fa=document.createElement("select");O(ma,fa);for(var ja=0;ja<Da.length;ja++){var na=Da[ja],va=
document.createElement("option");va.value=mxUtils.htmlEntities(na.val);mxUtils.write(va,mxResources.get(na.dispName,null,na.dispName));fa.appendChild(va)}fa.value=Ba;q.appendChild(fa);mxEvent.addListener(fa,"change",function(){var ya=mxUtils.htmlEntities(fa.value);U(oa,ya,Aa)});fa.focus();mxEvent.addListener(fa,"blur",function(){q.removeChild(fa)})}))}else"dynamicArr"==qa?ma.appendChild(R(oa,Ba,Aa.subType,Aa.subDefVal,Aa.countProperty,ua,ia)):"staticArr"==qa?ma.appendChild(X(oa,Ba,Aa.subType,Aa.subDefVal,
Aa.size,ua,ia)):"readOnly"==qa?(ia=document.createElement("input"),ia.setAttribute("readonly",""),ia.value=Ba,ia.style.width="96px",ia.style.borderWidth="0px",ma.appendChild(ia)):(ma.innerHTML=mxUtils.htmlEntities(decodeURIComponent(Ba)),mxEvent.addListener(ma,"click",mxUtils.bind(aa,function(){function fa(){var na=ja.value;na=0==na.length&&"string"!=qa?0:na;Aa.allowAuto&&(null!=na.trim&&"auto"==na.trim().toLowerCase()?(na="auto",qa="string"):(na=parseFloat(na),na=isNaN(na)?0:na));null!=Aa.min&&na<
Aa.min?na=Aa.min:null!=Aa.max&&na>Aa.max&&(na=Aa.max);na=encodeURIComponent(("int"==qa?parseInt(na):na)+"");U(oa,na,Aa)}var ja=document.createElement("input");O(ma,ja,!0);ja.value=decodeURIComponent(Ba);ja.className="gePropEditor";"int"!=qa&&"float"!=qa||Aa.allowAuto||(ja.type="number",ja.step="int"==qa?"1":"any",null!=Aa.min&&(ja.min=parseFloat(Aa.min)),null!=Aa.max&&(ja.max=parseFloat(Aa.max)));q.appendChild(ja);mxEvent.addListener(ja,"keypress",function(na){13==na.keyCode&&fa()});ja.focus();mxEvent.addListener(ja,
"blur",function(){fa()})})));Aa.isDeletable&&(ia=mxUtils.button("-",mxUtils.bind(aa,function(fa){U(oa,"",Aa,Aa.index);mxEvent.consume(fa)})),ia.style.height="16px",ia.style.width="25px",ia.style.float="right",ia.className="geColorBtn",ma.appendChild(ia));ua.appendChild(ma);return ua}var aa=this,ca=this.editorUi.editor.graph,Y=[];q.style.position="relative";q.style.padding="0";var da=document.createElement("table");da.className="geProperties";da.style.whiteSpace="nowrap";da.style.width="100%";var ea=
document.createElement("tr");ea.className="gePropHeader";var ka=document.createElement("th");ka.className="gePropHeaderCell";var sa=document.createElement("img");sa.src=Sidebar.prototype.expandedImage;sa.style.verticalAlign="middle";ka.appendChild(sa);mxUtils.write(ka,mxResources.get("property"));ea.style.cursor="pointer";var xa=function(){var oa=da.querySelectorAll(".gePropNonHeaderRow");if(aa.editorUi.propertiesCollapsed){sa.src=Sidebar.prototype.collapsedImage;var Ba="none";for(var Aa=q.childNodes.length-
1;0<=Aa;Aa--)try{var La=q.childNodes[Aa],ia=La.nodeName.toUpperCase();"INPUT"!=ia&&"SELECT"!=ia||q.removeChild(La)}catch(wa){}}else sa.src=Sidebar.prototype.expandedImage,Ba="";for(Aa=0;Aa<oa.length;Aa++)oa[Aa].style.display=Ba};mxEvent.addListener(ea,"click",function(){aa.editorUi.propertiesCollapsed=!aa.editorUi.propertiesCollapsed;xa()});ea.appendChild(ka);ka=document.createElement("th");ka.className="gePropHeaderCell";ka.innerHTML=mxResources.get("value");ea.appendChild(ka);da.appendChild(ea);
var ta=!1,ha=!1;ea=null;1==L.vertices.length&&0==L.edges.length?ea=L.vertices[0].id:0==L.vertices.length&&1==L.edges.length&&(ea=L.edges[0].id);null!=ea&&da.appendChild(ba("id",mxUtils.htmlEntities(ea),{dispName:"ID",type:"readOnly"},!0,!1));for(var Oa in D)if(ea=D[Oa],"function"!=typeof ea.isVisible||ea.isVisible(L,this)){var Ia=null!=L.style[Oa]?mxUtils.htmlEntities(L.style[Oa]+""):null!=ea.getDefaultValue?ea.getDefaultValue(L,this):ea.defVal;if("separator"==ea.type)ha=!ha;else{if("staticArr"==
ea.type)ea.size=parseInt(L.style[ea.sizeProperty]||D[ea.sizeProperty].defVal)||0;else if(null!=ea.dependentProps){var Ca=ea.dependentProps,Fa=[],la=[];for(ka=0;ka<Ca.length;ka++){var Ja=L.style[Ca[ka]];la.push(D[Ca[ka]].subDefVal);Fa.push(null!=Ja?Ja.split(","):[])}ea.dependentPropsDefVal=la;ea.dependentPropsVals=Fa}da.appendChild(ba(Oa,Ia,ea,ta,ha));ta=!ta}}for(ka=0;ka<Y.length;ka++)for(ea=Y[ka],D=ea.parentRow,L=0;L<ea.values.length;L++)Oa=ba(ea.name,ea.values[L],{type:ea.type,parentRow:ea.parentRow,
isDeletable:ea.isDeletable,index:L,defVal:ea.defVal,countProperty:ea.countProperty,size:ea.size},0==L%2,ea.flipBkg),D.parentNode.insertBefore(Oa,D.nextSibling),D=Oa;q.appendChild(da);xa();return q};StyleFormatPanel.prototype.addStyles=function(q){function D(ea){mxEvent.addListener(ea,"mouseenter",function(){ea.style.opacity="1"});mxEvent.addListener(ea,"mouseleave",function(){ea.style.opacity="0.5"})}var L=this.editorUi,U=L.editor.graph,O=document.createElement("div");O.style.whiteSpace="nowrap";