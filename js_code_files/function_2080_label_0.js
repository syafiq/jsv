function(){window.openFile=null});if(!f){var x=this.dialog,A=x.close;this.dialog.close=mxUtils.bind(this,function(H){Editor.useLocalStorage=u;A.apply(x,arguments);H&&null==this.getCurrentFile()&&"1"!=urlParams.embed&&this.showSplash()})}}};EditorUi.prototype.importZipFile=function(d,f,g){var u=this,x=mxUtils.bind(this,function(){this.loadingExtensions=!1;"undefined"!==typeof JSZip?JSZip.loadAsync(d).then(function(A){if(mxUtils.isEmptyObject(A.files))g();else{var H=0,P,M=!1;A.forEach(function(G,ia){G=
ia.name.toLowerCase();"diagram/diagram.xml"==G?(M=!0,ia.async("string").then(function(ja){0==ja.indexOf("<mxfile ")?f(ja):g()})):0==G.indexOf("versions/")&&(G=parseInt(G.substr(9)),G>H&&(H=G,P=ia))});0<H?P.async("string").then(function(G){(new XMLHttpRequest).upload&&u.isRemoteFileFormat(G,d.name)?u.isOffline()?u.showError(mxResources.get("error"),mxResources.get("notInOffline"),null,g):u.parseFileData(G,mxUtils.bind(this,function(ia){4==ia.readyState&&(200<=ia.status&&299>=ia.status?f(ia.responseText):
g())}),d.name):g()}):M||g()}},function(A){g(A)}):g()});"undefined"!==typeof JSZip||this.loadingExtensions||this.isOffline(!0)?x():(this.loadingExtensions=!0,mxscript("js/extensions.min.js",x))};EditorUi.prototype.importFile=function(d,f,g,u,x,A,H,P,M,G,ia,ja){G=null!=G?G:!0;var ha=!1,ba=null,oa=mxUtils.bind(this,function(sa){var J=null;null!=sa&&"<mxlibrary"==sa.substring(0,10)?this.loadLibrary(new LocalLibrary(this,sa,H)):J=this.importXml(sa,g,u,G,null,null!=ja?mxEvent.isControlDown(ja):null);null!=