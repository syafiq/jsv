EditorUi.prototype.getImageForPage=function(b,e,k){k=null!=k?k:this.editor.graph;var l=k.getGlobalVariable,B=this.createTemporaryGraph(k.getStylesheet());B.defaultPageBackgroundColor=k.defaultPageBackgroundColor;B.shapeBackgroundColor=k.shapeBackgroundColor;B.shapeForegroundColor=k.shapeForegroundColor;var q=this.getPageIndex(null!=e?e:this.currentPage);B.getGlobalVariable=function(N){return"pagenumber"==N?q+1:"page"==N&&null!=e?e.getName():l.apply(this,arguments)};document.body.appendChild(B.container);
this.updatePageRoot(b);B.model.setRoot(b.root);b=Graph.foreignObjectWarningText;Graph.foreignObjectWarningText="";k=B.getSvg(null,null,null,null,null,null,null,null,null,null,null,!0);var D=B.getGraphBounds();document.body.removeChild(B.container);Graph.foreignObjectWarningText=b;return new mxImage(Editor.createSvgDataUri(mxUtils.getXml(k)),D.width,D.height,D.x,D.y)};