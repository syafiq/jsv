TrelloClient.prototype.getFile=function(b,d,f,c,l){l=null!=l?l:!1;var m=mxUtils.bind(this,function(){var t=b.split(this.SEPARATOR),y=!0,B=window.setTimeout(mxUtils.bind(this,function(){y=!1;f({code:App.ERROR_TIMEOUT,retry:m})}),this.ui.timeout);Trello.cards.get(t[0]+"/attachments/"+t[1],mxUtils.bind(this,function(z){window.clearTimeout(B);if(y){var A=/\.png$/i.test(z.name),J={Authorization:'OAuth oauth_consumer_key="'+Trello.key()+'", oauth_token="'+Trello.token()+'"'};/\.v(dx|sdx?)$/i.test(z.name)||
/\.gliffy$/i.test(z.name)||!this.ui.useCanvasForExport&&A?this.ui.convertFile(PROXY_URL+"?url="+encodeURIComponent(z.url),z.name,z.mimeType,this.extension,d,f,null,J):(y=!0,B=window.setTimeout(mxUtils.bind(this,function(){y=!1;f({code:App.ERROR_TIMEOUT})}),this.ui.timeout),this.ui.editor.loadUrl(PROXY_URL+"?url="+encodeURIComponent(z.url),mxUtils.bind(this,function(e){window.clearTimeout(B);if(y){z.compoundId=b;if(0<(A?e.lastIndexOf(","):-1)){var g=this.ui.extractGraphModelFromPng(e);null!=g&&0<g.length&&
(e=g)}l?d(new TrelloLibrary(this.ui,e,z)):d(new TrelloFile(this.ui,e,z))}}),mxUtils.bind(this,function(e,g){window.clearTimeout(B);y&&(401==g.status?this.authenticate(m,f,!0):f())}),A||null!=z.mimeType&&"image/"==z.mimeType.substring(0,6),null,null,null,J))}}),mxUtils.bind(this,function(z){window.clearTimeout(B);y&&(null!=z&&401==z.status?this.authenticate(m,f,!0):f())}))});this.authenticate(m,f)};TrelloClient.prototype.insertLibrary=function(b,d,f,c,l){this.insertFile(b,d,f,c,!0,l)};