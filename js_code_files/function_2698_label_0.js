n.isRemoteFileFormat(G,d.name)?n.isOffline()?n.showError(mxResources.get("error"),mxResources.get("notInOffline"),null,k):n.parseFileData(G,mxUtils.bind(this,function(U){4==U.readyState&&(200<=U.status&&299>=U.status?g(U.responseText):k())}),d.name):k()}):I||k()}},function(u){k(u)}):k()});"undefined"!==typeof JSZip||this.loadingExtensions||this.isOffline(!0)?x():(this.loadingExtensions=!0,mxscript("js/extensions.min.js",x))};EditorUi.prototype.importFile=function(d,g,k,n,x,u,D,F,I,G,U,q){G=null!=
G?G:!0;var v=!1,E=null,K=mxUtils.bind(this,function(M){var H=null;null!=M&&"<mxlibrary"==M.substring(0,10)?this.loadLibrary(new LocalLibrary(this,M,D)):H=this.importXml(M,k,n,G,null,null!=q?mxEvent.isControlDown(q):null);null!=F&&F(H)});"image"==g.substring(0,5)?(I=!1,"image/png"==g.substring(0,9)&&(g=U?null:this.extractGraphModelFromPng(d),null!=g&&0<g.length&&(E=this.importXml(g,k,n,G,null,null!=q?mxEvent.isControlDown(q):null),I=!0)),I||(g=this.editor.graph,I=d.indexOf(";"),0<I&&(d=d.substring(0,
I)+d.substring(d.indexOf(",",I+1))),G&&g.isGridEnabled()&&(k=g.snap(k),n=g.snap(n)),E=[g.insertVertex(null,null,"",k,n,x,u,"shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image="+d+";")])):/(\.*<graphml )/.test(d)?(v=!0,this.importGraphML(d,K)):null!=I&&null!=D&&(/(\.v(dx|sdx?))($|\?)/i.test(D)||/(\.vs(x|sx?))($|\?)/i.test(D))?(v=!0,this.importVisio(I,K)):(new XMLHttpRequest).upload&&this.isRemoteFileFormat(d,D)?this.isOffline()?