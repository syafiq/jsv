Graph.removeKeys(D,function(F){return 0>mxUtils.indexOf(S,F)});this.updateCellStyles(D,N)};Graph.prototype.updateCellStyles=function(D,N){this.model.beginUpdate();try{for(var S=0;S<N.length;S++)if(this.model.isVertex(N[S])||this.model.isEdge(N[S])){var F=this.getCellStyle(N[S],!1),K;for(K in D){var R=D[K];F[K]!=R&&this.setCellStyles(K,R,[N[S]])}}}finally{this.model.endUpdate()}};Graph.prototype.isFastZoomEnabled=function(){return"nocss"!=urlParams.zoom&&!mxClient.NO_FO&&!mxClient.IS_EDGE&&!this.useCssTransforms&&
(this.isCssTransformsSupported()||mxClient.IS_IOS)};Graph.prototype.isCssTransformsSupported=function(){return this.dialect==mxConstants.DIALECT_SVG&&!mxClient.NO_FO&&(!this.lightbox||!mxClient.IS_SF)};Graph.prototype.getCellAt=function(D,N,S,F,K,R){this.useCssTransforms&&(D=D/this.currentScale-this.currentTranslate.x,N=N/this.currentScale-this.currentTranslate.y);return this.getScaledCellAt.apply(this,arguments)};Graph.prototype.getScaledCellAt=function(D,N,S,F,K,R){F=null!=F?F:!0;K=null!=K?K:!0;
null==S&&(S=this.getCurrentRoot(),null==S&&(S=this.getModel().getRoot()));if(null!=S)for(var d=this.model.getChildCount(S)-1;0<=d;d--){var f=this.model.getChildAt(S,d),g=this.getScaledCellAt(D,N,f,F,K,R);if(null!=g)return g;if(this.isCellVisible(f)&&(K&&this.model.isEdge(f)||F&&this.model.isVertex(f))&&(g=this.view.getState(f),null!=g&&(null==R||!R(g,D,N))&&this.intersects(g,D,N)))return f}return null};Graph.prototype.isRecursiveVertexResize=function(D){return!this.isSwimlane(D.cell)&&0<this.model.getChildCount(D.cell)&&
!this.isCellCollapsed(D.cell)&&"1"==mxUtils.getValue(D.style,"recursiveResize","1")&&null==mxUtils.getValue(D.style,"childLayout",null)};Graph.prototype.getAbsoluteParent=function(D){for(var N=this.getCellGeometry(D);null!=N&&N.relative;)D=this.getModel().getParent(D),N=this.getCellGeometry(D);return D};Graph.prototype.isPart=function(D){return"1"==mxUtils.getValue(this.getCurrentCellStyle(D),"part","0")||this.isTableCell(D)||this.isTableRow(D)};Graph.prototype.getCompositeParents=function(D){for(var N=
new mxDictionary,S=[],F=0;F<D.length;F++){var K=this.getCompositeParent(D[F]);this.isTableCell(K)&&(K=this.graph.model.getParent(K));this.isTableRow(K)&&(K=this.graph.model.getParent(K));null==K||N.get(K)||(N.put(K,!0),S.push(K))}return S};Graph.prototype.getCompositeParent=function(D){for(;this.isPart(D);){var N=this.model.getParent(D);if(!this.model.isVertex(N))break;D=N}return D};Graph.prototype.filterSelectionCells=function(D){var N=this.getSelectionCells();if(null!=D){for(var S=[],F=0;F<N.length;F++)D(N[F])||
S.push(N[F]);N=S}return N};var b=mxGraph.prototype.scrollRectToVisible;Graph.prototype.scrollRectToVisible=function(D){if(this.useCssTransforms){var N=this.currentScale,S=this.currentTranslate;D=new mxRectangle((D.x+2*S.x)*N-S.x,(D.y+2*S.y)*N-S.y,D.width*N,D.height*N)}b.apply(this,arguments)};mxCellHighlight.prototype.getStrokeWidth=function(D){D=this.strokeWidth;this.graph.useCssTransforms&&(D/=this.graph.currentScale);return D};mxGraphView.prototype.getGraphBounds=function(){var D=this.graphBounds;
if(this.graph.useCssTransforms){var N=this.graph.currentTranslate,S=this.graph.currentScale;D=new mxRectangle((D.x+N.x)*S,(D.y+N.y)*S,D.width*S,D.height*S)}return D};mxGraphView.prototype.viewStateChanged=function(){this.graph.useCssTransforms?this.validate():this.revalidate();this.graph.sizeDidChange()};var e=mxGraphView.prototype.validate;mxGraphView.prototype.validate=function(D){this.graph.useCssTransforms&&(this.graph.currentScale=this.scale,this.graph.currentTranslate.x=this.translate.x,this.graph.currentTranslate.y=
this.translate.y,this.scale=1,this.translate.x=0,this.translate.y=0);e.apply(this,arguments);this.graph.useCssTransforms&&(this.graph.updateCssTransform(),this.scale=this.graph.currentScale,this.translate.x=this.graph.currentTranslate.x,this.translate.y=this.graph.currentTranslate.y)};var k=mxGraph.prototype.getCellsForGroup;Graph.prototype.getCellsForGroup=function(D){D=k.apply(this,arguments);for(var N=[],S=0;S<D.length;S++)this.isTableRow(D[S])||this.isTableCell(D[S])||N.push(D[S]);return N};var l=
mxGraph.prototype.getCellsForUngroup;Graph.prototype.getCellsForUngroup=function(D){D=l.apply(this,arguments);for(var N=[],S=0;S<D.length;S++)this.isTable(D[S])||this.isTableRow(D[S])||this.isTableCell(D[S])||N.push(D[S]);return N};Graph.prototype.updateCssTransform=function(){var D=this.view.getDrawPane();if(null!=D)if(D=D.parentNode,this.useCssTransforms){var N=D.getAttribute("transform");D.setAttribute("transformOrigin","0 0");var S=Math.round(100*this.currentScale)/100;D.setAttribute("transform",
"scale("+S+","+S+")translate("+Math.round(100*this.currentTranslate.x)/100+","+Math.round(100*this.currentTranslate.y)/100+")");N!=D.getAttribute("transform")&&this.fireEvent(new mxEventObject("cssTransformChanged"),"transform",D.getAttribute("transform"))}else D.removeAttribute("transformOrigin"),D.removeAttribute("transform")};var B=mxGraphView.prototype.validateBackgroundPage;mxGraphView.prototype.validateBackgroundPage=function(){var D=this.graph.useCssTransforms,N=this.scale,S=this.translate;
D&&(this.scale=this.graph.currentScale,this.translate=this.graph.currentTranslate);B.apply(this,arguments);D&&(this.scale=N,this.translate=S)};var q=mxGraph.prototype.updatePageBreaks;mxGraph.prototype.updatePageBreaks=function(D,N,S){var F=this.useCssTransforms,K=this.view.scale,R=this.view.translate;F&&(this.view.scale=1,this.view.translate=new mxPoint(0,0),this.useCssTransforms=!1);q.apply(this,arguments);F&&(this.view.scale=K,this.view.translate=R,this.useCssTransforms=!0)}})();