mxEvent.consume(g)}break}}}}catch(H){}}),!1)}};EditorUi.prototype.installNativeClipboardHandler=function(){function e(){window.setTimeout(function(){k.innerHTML="&nbsp;";k.focus();document.execCommand("selectAll",!1,null)},0)}var g=this.editor.graph,k=document.createElement("div");k.setAttribute("autocomplete","off");k.setAttribute("autocorrect","off");k.setAttribute("autocapitalize","off");k.setAttribute("spellcheck","false");k.style.textRendering="optimizeSpeed";k.style.fontFamily="monospace";k.style.wordBreak=
"break-all";k.style.background="transparent";k.style.color="transparent";k.style.position="absolute";k.style.whiteSpace="nowrap";k.style.overflow="hidden";k.style.display="block";k.style.fontSize="1";k.style.zIndex="-1";k.style.resize="none";k.style.outline="none";k.style.width="1px";k.style.height="1px";mxUtils.setOpacity(k,0);k.contentEditable=!0;k.innerHTML="&nbsp;";var n=!1;this.keyHandler.bindControlKey(88,null);this.keyHandler.bindControlKey(67,null);this.keyHandler.bindControlKey(86,null);
mxEvent.addListener(document,"keydown",mxUtils.bind(this,function(v){var E=mxEvent.getSource(v);null==g.container||!g.isEnabled()||g.isMouseDown||g.isEditing()||null!=this.dialog||"INPUT"==E.nodeName||"TEXTAREA"==E.nodeName||224!=v.keyCode&&(mxClient.IS_MAC||17!=v.keyCode)&&(!mxClient.IS_MAC||91!=v.keyCode&&93!=v.keyCode)||n||(k.style.left=g.container.scrollLeft+10+"px",k.style.top=g.container.scrollTop+10+"px",v=g.container.scrollLeft,E=g.container.scrollTop,g.container.appendChild(k),n=!0,k.focus(),
document.execCommand("selectAll",!1,null),g.container.scrollLeft=v,g.container.scrollTop=E)}));mxEvent.addListener(document,"keyup",mxUtils.bind(this,function(v){var E=v.keyCode;window.setTimeout(mxUtils.bind(this,function(){!n||224!=E&&17!=E&&91!=E&&93!=E||(n=!1,g.isEditing()||null!=this.dialog||null==g.container||g.container.focus(),k.parentNode.removeChild(k),null==this.dialog&&mxUtils.clearSelection())}),0)}));mxEvent.addListener(k,"copy",mxUtils.bind(this,function(v){if(g.isEnabled())try{mxClipboard.copy(g),
this.copyCells(k),e()}catch(E){this.handleError(E)}}));mxEvent.addListener(k,"cut",mxUtils.bind(this,function(v){if(g.isEnabled())try{mxClipboard.copy(g),this.copyCells(k,!0),e()}catch(E){this.handleError(E)}}));mxEvent.addListener(k,"paste",mxUtils.bind(this,function(v){if(g.isEnabled()&&!g.isCellLocked(g.getDefaultParent())&&(k.innerHTML="&nbsp;",k.focus(),null!=v.clipboardData&&this.pasteCells(v,k,!0,!0),!mxEvent.isConsumed(v))){var E=g.container.scrollLeft,C=g.container.scrollTop;window.setTimeout(mxUtils.bind(this,
function(){g.container.scrollLeft=E;g.container.scrollTop=C;this.pasteCells(v,k,!1,!0)}),0)}}),!0);var u=this.isSelectionAllowed;this.isSelectionAllowed=function(v){return mxEvent.getSource(v)==k?!0:u.apply(this,arguments)}};EditorUi.prototype.setCurrentTheme=function(e,g){mxSettings.setUi(e);(g=this.doSetCurrentTheme(e)||g)||this.alert(mxResources.get("restartForChangeRequired"))};EditorUi.prototype.doSetCurrentTheme=function(e,g,k){function n(T){return""==T||"dark"==T||"kennedy"==T||null==T}g=null!=