!1)?!1:q}if(q||this.isOffline()){y.href=URL.createObjectURL(n?this.base64ToBlob(c,f):new Blob([c],{type:f}));q?y.download=e:y.setAttribute("target","_blank");document.body.appendChild(y);try{window.setTimeout(function(){URL.revokeObjectURL(y.href)},2E4),y.click(),y.parentNode.removeChild(y)}catch(E){}}else this.createEchoRequest(c,e,f,n,p).simulate(document,"_blank")}};EditorUi.prototype.createEchoRequest=function(c,e,f,n,p,q){c="xml="+encodeURIComponent(c);return new mxXmlRequest(SAVE_URL,c+(null!=
f?"&mime="+f:"")+(null!=p?"&format="+p:"")+(null!=q?"&base64="+q:"")+(null!=e?"&filename="+encodeURIComponent(e):"")+(n?"&binary=1":""))};EditorUi.prototype.base64ToBlob=function(c,e){e=e||"";c=atob(c);for(var f=c.length,n=Math.ceil(f/1024),p=Array(n),q=0;q<n;++q){for(var y=1024*q,x=Math.min(y+1024,f),E=Array(x-y),A=0;y<x;++A,++y)E[A]=c[y].charCodeAt(0);p[q]=new Uint8Array(E)}return new Blob(p,{type:e})};EditorUi.prototype.saveLocalFile=function(c,e,f,n,p,q,y,x){q=null!=q?q:!1;y=null!=y?y:"vsdx"!=