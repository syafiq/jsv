BaseFormatPanel.prototype.createColorOption=function(a,b,f,e,g,d,h,n){var v=document.createElement("div");v.style.padding="3px 0px 3px 0px";v.style.whiteSpace="nowrap";v.style.overflow="hidden";v.style.width="200px";v.style.height="18px";var m=document.createElement("input");m.setAttribute("type","checkbox");m.style.margin="1px 6px 0px 0px";m.style.verticalAlign="top";h||v.appendChild(m);var r=document.createElement("span");r.style.verticalAlign="top";mxUtils.write(r,a);v.appendChild(r);var x=b(),
B=!1,D=null,F=function(C,N,Q){if(!B){var T="null"==e?null:e;B=!0;C=/(^#?[a-zA-Z0-9]*$)/.test(C)?C:T;T=null!=C&&C!=mxConstants.NONE?C:T;var R=document.createElement("div");R.style.width="36px";R.style.height="12px";R.style.margin="3px";R.style.border="1px solid black";R.style.backgroundColor="default"==T?n:T;D.innerText="";D.appendChild(R);null!=C&&C!=mxConstants.NONE&&1<C.length&&"string"===typeof C&&(T="#"==C.charAt(0)?C.substring(1).toUpperCase():C,T=ColorDialog.prototype.colorNames[T],D.setAttribute("title",
null!=T?T+" (Shift+Click for Color Dropper)":"Shift+Click for Color Dropper"));null!=C&&C!=mxConstants.NONE?(m.setAttribute("checked","checked"),m.defaultChecked=!0,m.checked=!0):(m.removeAttribute("checked"),m.defaultChecked=!1,m.checked=!1);D.style.display=m.checked||h?"":"none";null!=d&&d("null"==C?null:C);x=C;N||(Q||h||b()!=x)&&f("null"==x?null:x,x);B=!1}},H=document.createElement("input");H.setAttribute("type","color");H.style.visibility="hidden";H.style.width="0px";H.style.height="0px";H.style.border=
"none";v.appendChild(H);D=mxUtils.button("",mxUtils.bind(this,function(C){var N=x;"default"==N&&(N=n);!mxEvent.isShiftDown(C)||mxClient.IS_IE||mxClient.IS_IE11?this.editorUi.pickColor(N,function(Q){F(Q,null,!0)},n):(H.value=N,H.click(),mxEvent.addListener(H,"input",function(){F(H.value,null,!0)}));mxEvent.consume(C)}));D.style.position="absolute";D.style.marginTop="-3px";D.style.left="178px";D.style.height="22px";D.className="geColorBtn";D.style.display=m.checked||h?"":"none";v.appendChild(D);a=null!=
x&&"string"===typeof x&&"#"==x.charAt(0)?x.substring(1).toUpperCase():x;a=ColorDialog.prototype.colorNames[a];D.setAttribute("title",null!=a?a+" (Shift+Click for Color Dropper)":"Shift+Click for Color Dropper");mxEvent.addListener(v,"click",function(C){C=mxEvent.getSource(C);if(C==m||"INPUT"!=C.nodeName)C!=m&&(m.checked=!m.checked),m.checked||null==x||x==mxConstants.NONE||e==mxConstants.NONE||(e=x),F(m.checked?e:mxConstants.NONE)});F(x,!0);null!=g&&(g.install(F),this.listeners.push(g));return v};