E=mxUtils.bind(this,function(){g.refresh();g.view.validateBackground();this.updateTabContainer();this.hideShapePicker()});this.addListener("darkModeChanged",E);this.addListener("sketchModeChanged",E);this.addListener("currentThemeChanged",mxUtils.bind(this,function(){this.updateButtonContainer();this.refresh()}));g.addListener("enabledChanged",mxUtils.bind(this,function(){g.isEnabled()||this.hideShapePicker()}));d=this;mxWindow.prototype.fit=function(){if(Editor.inlineFullscreen||null==d.embedViewport)mxUtils.fit(this.div);
else{var H=parseInt(this.div.offsetLeft),N=parseInt(this.div.offsetWidth),P=d.embedViewport.x+d.embedViewport.width,O=parseInt(this.div.offsetTop),V=parseInt(this.div.offsetHeight),p=d.embedViewport.y+d.embedViewport.height;this.div.style.left=Math.max(d.embedViewport.x,Math.min(H,P-N))+"px";this.div.style.top=Math.max(d.embedViewport.y,Math.min(O,p-V))+"px";this.div.style.height=Math.min(d.embedViewport.height,parseInt(this.div.style.height))+"px";this.div.style.width=Math.min(d.embedViewport.width,
parseInt(this.div.style.width))+"px"}};if(!this.editor.chromeless||this.editor.editable)if("simple"==Editor.currentTheme||"sketch"==Editor.currentTheme)E=Editor.currentTheme,Editor.currentTheme="",this.doSetCurrentTheme(E,0,mxUtils.bind(this,function(){"1"==urlParams.embedInline&&this.initializeInlineEmbedMode()}));mxClient.IS_IE||mxClient.IS_IE11||"0"==urlParams.dark||"atlas"==Editor.currentTheme||"1"==urlParams.embed&&"1"!=urlParams.dark||(E=!1,window.matchMedia&&this.isAutoDarkMode()?E=window.matchMedia("(prefers-color-scheme: dark)").matches: