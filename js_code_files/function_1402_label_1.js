StorageFile.prototype.saveFile=function(b,g,k,d){if(this.isEditable()){var t=mxUtils.bind(this,function(){this.isRenamable()&&(this.title=b);try{var v=mxUtils.bind(this,function(){this.setModified(this.getShadowModified());this.contentChanged();null!=k&&k()});this.setShadowModified(!1);var B=this.getData();this.ui.setDatabaseItem(null,[{title:this.title,size:B.length,lastModified:Date.now(),type:this.type},{title:this.title,data:B}],v,mxUtils.bind(this,function(){null==this.ui.database?this.ui.setLocalData(this.title,
B,v):null!=d&&d()}),["filesInfo","files"])}catch(G){null!=d&&d(G)}});this.isRenamable()&&"."==b.charAt(0)&&null!=d?d({message:mxResources.get("invalidName")}):StorageFile.getFileInfo(this.ui,b,mxUtils.bind(this,function(v){this.isRenamable()&&this.getTitle()!=b&&null!=v?this.ui.confirm(mxResources.get("replaceIt",[b]),t,d):t()}),d)}else null!=k&&k()};