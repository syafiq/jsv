d.nodeName)g=d;else if("mxfile"==d.nodeName){var u=d.getElementsByTagName("diagram");if(0<u.length){g=u[0];var x=f.getGlobalVariable;f.getGlobalVariable=function(A){return"page"==A?g.getAttribute("name")||mxResources.get("pageWithNumber",[1]):"pagenumber"==A?1:x.apply(this,arguments)}}}null!=g&&(d=Editor.parseDiagramNode(g))}u=this.editor.graph;try{this.editor.graph=f,this.editor.setGraphXml(d)}catch(A){}finally{this.editor.graph=u}return d};EditorUi.prototype.getPngFileProperties=function(d){var f=
1,g=0;if(null!=d){if(d.hasAttribute("scale")){var u=parseFloat(d.getAttribute("scale"));!isNaN(u)&&0<u&&(f=u)}d.hasAttribute("border")&&(u=parseInt(d.getAttribute("border")),!isNaN(u)&&0<u&&(g=u))}return{scale:f,border:g}};EditorUi.prototype.getEmbeddedPng=function(d,f,g,u,x){try{var A=this.editor.graph,H=null!=A.themes&&"darkTheme"==A.defaultThemeName,P=null;if(null!=g&&0<g.length)A=this.createTemporaryGraph(H?A.getDefaultStylesheet():A.getStylesheet()),document.body.appendChild(A.container),this.decodeNodeIntoGraph(this.editor.extractGraphModel(mxUtils.parseXml(g).documentElement,