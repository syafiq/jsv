e.appendChild(J);e.appendChild(f);A.appendChild(e);var d=y,g,k,n=function(F,I,G,U){var q="data:"==F.substring(0,5);!b.isOffline()||q&&"undefined"===typeof chrome?0<F.length&&b.spinner.spin(document.body,mxResources.get("inserting"))?b.loadImage(F,function(v){b.spinner.stop();b.hideDialog();var E=!1===U?1:null!=I&&null!=G?Math.max(I/v.width,G/v.height):Math.min(1,Math.min(520/v.width,520/v.height));m&&(F=b.convertDataUri(F));c(F,Math.round(Number(v.width)*E),Math.round(Number(v.height)*E),d,g,k)},
function(){b.spinner.stop();c(null);b.showError(mxResources.get("error"),mxResources.get("fileNotFound"),mxResources.get("ok"))}):(b.hideDialog(),c(F,null,null,d,g,k)):(F=b.convertDataUri(F),I=null==I?120:I,G=null==G?100:G,b.hideDialog(),c(F,I,G,d,g,k))},x=function(F,I){if(null!=F){var G=l?null:z.getModel().getGeometry(z.getSelectionCell());null!=G?n(F,G.width,G.height,I):n(F,null,null,I)}else b.hideDialog(),c(null)};this.init=function(){J.focus();if(Graph.fileSupport){J.setAttribute("placeholder",