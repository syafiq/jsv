c[y].charCodeAt(0);q[p]=new Uint8Array(G)}return new Blob(q,{type:e})};EditorUi.prototype.saveLocalFile=function(c,e,g,n,q,p,y,B){p=null!=p?p:!1;y=null!=y?y:"vsdx"!=q&&(!mxClient.IS_IOS||!navigator.standalone);q=this.getServiceCount(p);isLocalStorage&&q++;var G=4>=q?2:6<q?4:3;e=new CreateDialog(this,e,mxUtils.bind(this,function(C,U){try{if("_blank"==U)if(null!=g&&"image/"==g.substring(0,6))this.openInNewWindow(c,g,n);else if(null!=g&&"text/html"==g.substring(0,9)){var m=new EmbedDialog(this,c);this.showDialog(m.container,
450,240,!0,!0);m.init()}else{var t=window.open("about:blank");null==t?mxUtils.popup(c,!0):(t.document.write("<pre>"+mxUtils.htmlEntities(c,!1)+"</pre>"),t.document.close())}else U==App.MODE_DEVICE||"download"==U?this.doSaveLocalFile(c,C,g,n,null,B):null!=C&&0<C.length&&this.pickFolder(U,mxUtils.bind(this,function(z){try{this.exportFile(c,C,g,n,U,z)}catch(H){this.handleError(H)}}))}catch(z){this.handleError(z)}}),mxUtils.bind(this,function(){this.hideDialog()}),mxResources.get("saveAs"),mxResources.get("download"),
!1,p,y,null,1<q,G,c,g,n);p=this.isServices(q)?q>G?390:280:160;this.showDialog(e.container,420,p,!0,!0);e.init()};EditorUi.prototype.openInNewWindow=function(c,e,g){var n=window.open("about:blank");null==n||null==n.document?mxUtils.popup(c,!0):("image/svg+xml"!=e||mxClient.IS_SVG?"image/svg+xml"!=e||g?(c=g?c:btoa(unescape(encodeURIComponent(c))),n.document.write('<html><img style="max-width:100%;" src="data:'+e+";base64,"+c+'"/></html>')):n.document.write("<html>"+c+"</html>"):n.document.write("<html><pre>"+