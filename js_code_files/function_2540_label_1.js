function(){window.openFile=null});if(!f){var x=this.dialog,A=x.close;this.dialog.close=mxUtils.bind(this,function(J){Editor.useLocalStorage=v;A.apply(x,arguments);J&&null==this.getCurrentFile()&&"1"!=urlParams.embed&&this.showSplash()})}}};EditorUi.prototype.importZipFile=function(d,f,g){var v=this,x=mxUtils.bind(this,function(){this.loadingExtensions=!1;"undefined"!==typeof JSZip?JSZip.loadAsync(d).then(function(A){if(mxUtils.isEmptyObject(A.files))g();else{var J=0,H,O=!1;A.forEach(function(F,ea){F=
ea.name.toLowerCase();"diagram/diagram.xml"==F?(O=!0,ea.async("string").then(function(ja){0==ja.indexOf("<mxfile ")?f(ja):g()})):0==F.indexOf("versions/")&&(F=parseInt(F.substr(9)),F>J&&(J=F,H=ea))});0<J?H.async("string").then(function(F){(new XMLHttpRequest).upload&&v.isRemoteFileFormat(F,d.name)?v.isOffline()?v.showError(mxResources.get("error"),mxResources.get("notInOffline"),null,g):v.parseFileData(F,mxUtils.bind(this,function(ea){4==ea.readyState&&(200<=ea.status&&299>=ea.status?f(ea.responseText):
g())}),d.name):g()}):O||g()}},function(A){g(A)}):g()});"undefined"!==typeof JSZip||this.loadingExtensions||this.isOffline(!0)?x():(this.loadingExtensions=!0,mxscript("js/extensions.min.js",x))};EditorUi.prototype.importFile=function(d,f,g,v,x,A,J,H,O,F,ea,ja){F=null!=F?F:!0;var ia=!1,aa=null,qa=mxUtils.bind(this,function(sa){var K=null;null!=sa&&"<mxlibrary"==sa.substring(0,10)?this.loadLibrary(new LocalLibrary(this,sa,J)):K=this.importXml(sa,g,v,F,null,null!=ja?mxEvent.isControlDown(ja):null);null!=