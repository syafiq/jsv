u[index];if("file"===D.kind){if(d.isEditing())this.importFiles([D.getAsFile()],0,0,this.maxImageSize,function(I,G,U,q,v,E){d.insertImage(I,v,E)},function(){},function(I){return"image/"==I.type.substring(0,6)},function(I){for(var G=0;G<I.length;G++)I[G]()});else{var F=this.editor.graph.getInsertPoint();this.importFiles([D.getAsFile()],F.x,F.y,this.maxImageSize);mxEvent.consume(g)}break}}}}catch(I){}}),!1)}};EditorUi.prototype.installNativeClipboardHandler=function(){function d(){window.setTimeout(function(){k.innerHTML=
"&nbsp;";k.focus();document.execCommand("selectAll",!1,null)},0)}var g=this.editor.graph,k=document.createElement("div");k.setAttribute("autocomplete","off");k.setAttribute("autocorrect","off");k.setAttribute("autocapitalize","off");k.setAttribute("spellcheck","false");k.style.textRendering="optimizeSpeed";k.style.fontFamily="monospace";k.style.wordBreak="break-all";k.style.background="transparent";k.style.color="transparent";k.style.position="absolute";k.style.whiteSpace="nowrap";k.style.overflow=
"hidden";k.style.display="block";k.style.fontSize="1";k.style.zIndex="-1";k.style.resize="none";k.style.outline="none";k.style.width="1px";k.style.height="1px";mxUtils.setOpacity(k,0);k.contentEditable=!0;k.innerHTML="&nbsp;";var n=!1;this.keyHandler.bindControlKey(88,null);this.keyHandler.bindControlKey(67,null);this.keyHandler.bindControlKey(86,null);mxEvent.addListener(document,"keydown",mxUtils.bind(this,function(u){var D=mxEvent.getSource(u);null==g.container||!g.isEnabled()||g.isMouseDown||
g.isEditing()||null!=this.dialog||"INPUT"==D.nodeName||"TEXTAREA"==D.nodeName||224!=u.keyCode&&(mxClient.IS_MAC||17!=u.keyCode)&&(!mxClient.IS_MAC||91!=u.keyCode&&93!=u.keyCode)||n||(k.style.left=g.container.scrollLeft+10+"px",k.style.top=g.container.scrollTop+10+"px",u=g.container.scrollLeft,D=g.container.scrollTop,g.container.appendChild(k),n=!0,k.focus(),document.execCommand("selectAll",!1,null),g.container.scrollLeft=u,g.container.scrollTop=D)}));mxEvent.addListener(document,"keyup",mxUtils.bind(this,
function(u){var D=u.keyCode;window.setTimeout(mxUtils.bind(this,function(){!n||224!=D&&17!=D&&91!=D&&93!=D||(n=!1,g.isEditing()||null!=this.dialog||null==g.container||g.container.focus(),k.parentNode.removeChild(k),null==this.dialog&&mxUtils.clearSelection())}),0)}));mxEvent.addListener(k,"copy",mxUtils.bind(this,function(u){if(g.isEnabled())try{mxClipboard.copy(g),this.copyCells(k),d()}catch(D){this.handleError(D)}}));mxEvent.addListener(k,"cut",mxUtils.bind(this,function(u){if(g.isEnabled())try{mxClipboard.copy(g),
this.copyCells(k,!0),d()}catch(D){this.handleError(D)}}));mxEvent.addListener(k,"paste",mxUtils.bind(this,function(u){if(g.isEnabled()&&!g.isCellLocked(g.getDefaultParent())&&(k.innerHTML="&nbsp;",k.focus(),null!=u.clipboardData&&this.pasteCells(u,k,!0,!0),!mxEvent.isConsumed(u))){var D=g.container.scrollLeft,F=g.container.scrollTop;window.setTimeout(mxUtils.bind(this,function(){g.container.scrollLeft=D;g.container.scrollTop=F;this.pasteCells(u,k,!1,!0)}),0)}}),!0);var x=this.isSelectionAllowed;this.isSelectionAllowed=
function(u){return mxEvent.getSource(u)==k?!0:x.apply(this,arguments)}};EditorUi.prototype.setCurrentTheme=function(d,g){mxSettings.setUi(d);(g=this.doSetCurrentTheme(d)||g)||this.alert(mxResources.get("restartForChangeRequired"))};EditorUi.prototype.isDefaultTheme=function(d){d=null!=d?d:Editor.currentTheme;return""==d||"dark"==d||"default"==d||"kennedy"==d||null==d};EditorUi.prototype.doSetCurrentTheme=function(d,g,k){function n(I){return"simple"==I||0==g&&"sketch"==I}g=null!=g?g:100;var x=Editor.currentTheme,