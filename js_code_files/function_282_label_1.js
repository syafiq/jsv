g?"&mime="+g:"")+(null!=x?"&format="+x:"")+(null!=A?"&base64="+A:"")+(null!=f?"&filename="+encodeURIComponent(f):"")+(v?"&binary=1":""))};EditorUi.prototype.base64ToBlob=function(d,f){f=f||"";d=atob(d);for(var g=d.length,v=Math.ceil(g/1024),x=Array(v),A=0;A<v;++A){for(var J=1024*A,H=Math.min(J+1024,g),O=Array(H-J),F=0;J<H;++F,++J)O[F]=d[J].charCodeAt(0);x[A]=new Uint8Array(O)}return new Blob(x,{type:f})};EditorUi.prototype.saveLocalFile=function(d,f,g,v,x,A,J,H){A=null!=A?A:!1;J=null!=J?J:"vsdx"!=
x&&(!mxClient.IS_IOS||!navigator.standalone);x=this.getServiceCount(A);isLocalStorage&&x++;var O=4>=x?2:6<x?4:3;f=new CreateDialog(this,f,mxUtils.bind(this,function(F,ea){try{if("_blank"==ea)if(null!=g&&"image/"==g.substring(0,6))this.openInNewWindow(d,g,v);else if(null!=g&&"text/html"==g.substring(0,9)){var ja=new EmbedDialog(this,d);this.showDialog(ja.container,450,240,!0,!0);ja.init()}else{var ia=window.open("about:blank");null==ia?mxUtils.popup(d,!0):(ia.document.write("<pre>"+mxUtils.htmlEntities(d,
!1)+"</pre>"),ia.document.close())}else ea==App.MODE_DEVICE||"download"==ea?this.doSaveLocalFile(d,F,g,v,null,H):null!=F&&0<F.length&&this.pickFolder(ea,mxUtils.bind(this,function(aa){try{this.exportFile(d,F,g,v,ea,aa)}catch(qa){this.handleError(qa)}}))}catch(aa){this.handleError(aa)}}),mxUtils.bind(this,function(){this.hideDialog()}),mxResources.get("saveAs"),mxResources.get("download"),!1,A,J,null,1<x,O,d,g,v);A=this.isServices(x)?x>O?390:280:160;this.showDialog(f.container,420,A,!0,!0);f.init()};