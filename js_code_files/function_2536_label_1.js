mxEvent.getClientX(K),mxEvent.getClientY(K))},x=function(K){for(g.push(K);g.length>f;)g.shift()},G=function(K){var N=g.length;if(1===N%2||N>=f){var I=0,M=0,Q,P=0;for(Q=K;Q<N;Q++)P++,K=g[Q],I+=K.x,M+=K.y;return{x:I/P,y:M/P}}return null}}}mxFreehand.prototype.NO_SMOOTHING=1;mxFreehand.prototype.MILD_SMOOTHING=4;mxFreehand.prototype.NORMAL_SMOOTHING=8;mxFreehand.prototype.VERY_SMOOTH_SMOOTHING=12;mxFreehand.prototype.SUPER_SMOOTH_SMOOTHING=16;mxFreehand.prototype.HYPER_SMOOTH_SMOOTHING=20;function P2PCollab(b,d,f){function c(P,V){try{if(!G){var W=d.file.getCurrentUser();if(x&&null!=W&&null!=W.displayName){var q={from:H,id:n,type:P,sessionId:d.clientId,userId:W.id,username:W.displayName,data:V,protocol:DrawioFileSync.PROTOCOL,editor:EditorUi.VERSION};q={bytes:d.objectToString(q),data:"aes"};q=JSON.stringify(q);K&&"cursor"!=P&&EditorUi.debug("P2PCollab: sending to socket server",[q]);n++;P=!K&&("cursor"==P||"selectionChange"==P);p&&!P&&Q("message",q);if(P)for(p2pId in T)T[p2pId].send(q)}}}catch(D){null!=
window.console&&console.log("Error:",D)}}function l(P){if(b.shareCursorPosition&&!A.isMouseDown){var V=mxUtils.getOffset(A.container),W=A.view.translate,q=A.view.scale,D=null!=b.currentPage?b.currentPage.getId():null;c("cursor",{pageId:D,x:Math.round((P.getX()-V.x+A.container.scrollLeft)/q-W.x),y:Math.round((P.getY()-V.y+A.container.scrollTop)/q-W.y)})}}function m(P,V){var W=null!=b.currentPage?b.currentPage.getId():null;if(null!=P&&null!=P.cursor&&null!=P.lastCursor)if(null!=P.lastCursor.hide||!b.isShowRemoteCursors()||