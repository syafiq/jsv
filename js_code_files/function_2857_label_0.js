PrintDialog.prototype.create=function(b){function e(f){var g=D.checked||F.checked,u=parseInt(R.value)/100;isNaN(u)&&(u=1,R.value="100%");u*=.75;var x=k.pageFormat||mxConstants.PAGE_FORMAT_A4_PORTRAIT,A=1/k.pageScale;if(g){var H=D.checked?1:parseInt(K.value);isNaN(H)||(A=mxUtils.getScaleForPageCount(H,k,x))}k.getGraphBounds();var P=H=0;x=mxRectangle.fromRectangle(x);x.width=Math.ceil(x.width*u);x.height=Math.ceil(x.height*u);A*=u;!g&&k.pageVisible?(u=k.getPageLayout(),H-=u.x*x.width,P-=u.y*x.height):
g=!0;g=PrintDialog.createPrintPreview(k,A,x,0,H,P,g);g.open();f&&PrintDialog.printPreview(g)}var k=b.editor.graph,l=document.createElement("table");l.style.width="100%";l.style.height="100%";var B=document.createElement("tbody");var q=document.createElement("tr");var D=document.createElement("input");D.setAttribute("type","checkbox");var N=document.createElement("td");N.setAttribute("colspan","2");N.style.fontSize="10pt";N.appendChild(D);var S=document.createElement("span");mxUtils.write(S," "+mxResources.get("fitPage"));
N.appendChild(S);mxEvent.addListener(S,"click",function(f){D.checked=!D.checked;F.checked=!D.checked;mxEvent.consume(f)});mxEvent.addListener(D,"change",function(){F.checked=!D.checked});q.appendChild(N);B.appendChild(q);q=q.cloneNode(!1);var F=document.createElement("input");F.setAttribute("type","checkbox");N=document.createElement("td");N.style.fontSize="10pt";N.appendChild(F);S=document.createElement("span");mxUtils.write(S," "+mxResources.get("posterPrint")+":");N.appendChild(S);mxEvent.addListener(S,
"click",function(f){F.checked=!F.checked;D.checked=!F.checked;mxEvent.consume(f)});q.appendChild(N);var K=document.createElement("input");K.setAttribute("value","1");K.setAttribute("type","number");K.setAttribute("min","1");K.setAttribute("size","4");K.setAttribute("disabled","disabled");K.style.width="50px";N=document.createElement("td");N.style.fontSize="10pt";N.appendChild(K);mxUtils.write(N," "+mxResources.get("pages")+" (max)");q.appendChild(N);B.appendChild(q);mxEvent.addListener(F,"change",
function(){F.checked?K.removeAttribute("disabled"):K.setAttribute("disabled","disabled");D.checked=!F.checked});q=q.cloneNode(!1);N=document.createElement("td");mxUtils.write(N,mxResources.get("pageScale")+":");q.appendChild(N);N=document.createElement("td");var R=document.createElement("input");R.setAttribute("value","100 %");R.setAttribute("size","5");R.style.width="50px";N.appendChild(R);q.appendChild(N);B.appendChild(q);q=document.createElement("tr");N=document.createElement("td");N.colSpan=2;
N.style.paddingTop="20px";N.setAttribute("align","right");S=mxUtils.button(mxResources.get("cancel"),function(){b.hideDialog()});S.className="geBtn";b.editor.cancelFirst&&N.appendChild(S);if(PrintDialog.previewEnabled){var d=mxUtils.button(mxResources.get("preview"),function(){b.hideDialog();e(!1)});d.className="geBtn";N.appendChild(d)}d=mxUtils.button(mxResources.get(PrintDialog.previewEnabled?"print":"ok"),function(){b.hideDialog();e(!0)});d.className="geBtn gePrimaryBtn";N.appendChild(d);b.editor.cancelFirst||
N.appendChild(S);q.appendChild(N);B.appendChild(q);l.appendChild(B);this.container=l};PrintDialog.printPreview=function(b){try{if(null!=b.wnd){var e=function(){b.wnd.focus();b.wnd.print();b.wnd.close()};mxClient.IS_GC?window.setTimeout(e,500):e()}}catch(k){}};