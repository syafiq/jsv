this.remoteInvokeCallbacks.push({callback:F,error:I});d=JSON.stringify({event:"remoteInvoke",funtionName:d,functionArgs:g,msgMarkers:k});null!=this.remoteWin?this.remoteWin.postMessage(d,"*"):this.remoteInvokeQueue.push(d)};EditorUi.prototype.handleRemoteInvoke=function(d,g){var k=mxUtils.bind(this,function(G,U){var q={event:"remoteInvokeResponse",msgMarkers:d.msgMarkers};null!=U?q.error={errResp:U}:null!=G&&(q.resp=G);this.remoteWin.postMessage(JSON.stringify(q),"*")});try{var n=d.funtionName,x=
this.remoteInvokableFns[n];if(null!=x&&"function"===typeof this[n]){if(x.allowedDomains){for(var u=!1,D=0;D<x.allowedDomains.length;D++)if(g=="https://"+x.allowedDomains[D]){u=!0;break}if(!u){k(null,"Invalid Call: "+n+" is not allowed.");return}}var F=d.functionArgs;Array.isArray(F)||(F=[]);if(x.isAsync)F.push(function(){k(Array.prototype.slice.apply(arguments))}),F.push(function(G){k(null,G||"Unkown Error")}),this[n].apply(this,F);else{var I=this[n].apply(this,F);k([I])}}else k(null,"Invalid Call: "+
n+" is not found.")}catch(G){k(null,"Invalid Call: An error occurred, "+G.message)}};EditorUi.prototype.openDatabase=function(d,g){if(null==this.database){var k=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB;if(null!=k)try{var n=k.open("database",2);n.onupgradeneeded=function(x){try{var u=n.result;1>x.oldVersion&&u.createObjectStore("objects",{keyPath:"key"});2>x.oldVersion&&(u.createObjectStore("files",{keyPath:"title"}),u.createObjectStore("filesInfo",{keyPath:"title"}),EditorUi.migrateStorageFiles=