PageSetupDialog.addPageFormatPanel=function(b,e,k,l){function B(G,ia,ja){if(ja||R!=document.activeElement&&d!=document.activeElement){G=!1;for(ia=0;ia<g.length;ia++)ja=g[ia],H?"custom"==ja.key&&(N.value=ja.key,H=!1):null!=ja.format&&("a4"==ja.key?826==k.width?(k=mxRectangle.fromRectangle(k),k.width=827):826==k.height&&(k=mxRectangle.fromRectangle(k),k.height=827):"a5"==ja.key&&(584==k.width?(k=mxRectangle.fromRectangle(k),k.width=583):584==k.height&&(k=mxRectangle.fromRectangle(k),k.height=583)),
k.width==ja.format.width&&k.height==ja.format.height?(N.value=ja.key,q.setAttribute("checked","checked"),q.defaultChecked=!0,q.checked=!0,D.removeAttribute("checked"),D.defaultChecked=!1,D.checked=!1,G=!0):k.width==ja.format.height&&k.height==ja.format.width&&(N.value=ja.key,q.removeAttribute("checked"),q.defaultChecked=!1,q.checked=!1,D.setAttribute("checked","checked"),D.defaultChecked=!0,G=D.checked=!0));G?(S.style.display="",K.style.display="none"):(R.value=k.width/100,d.value=k.height/100,q.setAttribute("checked",
"checked"),N.value="custom",S.style.display="none",K.style.display="")}}e="format-"+e;var q=document.createElement("input");q.setAttribute("name",e);q.setAttribute("type","radio");q.setAttribute("value","portrait");var D=document.createElement("input");D.setAttribute("name",e);D.setAttribute("type","radio");D.setAttribute("value","landscape");var N=document.createElement("select");N.style.marginBottom="8px";N.style.borderRadius="4px";N.style.border="1px solid rgb(160, 160, 160)";N.style.width="206px";
var S=document.createElement("div");S.style.marginLeft="4px";S.style.width="210px";S.style.height="24px";q.style.marginRight="6px";S.appendChild(q);e=document.createElement("span");e.style.maxWidth="100px";mxUtils.write(e,mxResources.get("portrait"));S.appendChild(e);D.style.marginLeft="10px";D.style.marginRight="6px";S.appendChild(D);var F=document.createElement("span");F.style.width="100px";mxUtils.write(F,mxResources.get("landscape"));S.appendChild(F);var K=document.createElement("div");K.style.marginLeft=
"4px";K.style.width="210px";K.style.height="24px";var R=document.createElement("input");R.setAttribute("size","7");R.style.textAlign="right";K.appendChild(R);mxUtils.write(K," in x ");var d=document.createElement("input");d.setAttribute("size","7");d.style.textAlign="right";K.appendChild(d);mxUtils.write(K," in");S.style.display="none";K.style.display="none";for(var f={},g=PageSetupDialog.getFormats(),u=0;u<g.length;u++){var x=g[u];f[x.key]=x;var A=document.createElement("option");A.setAttribute("value",
x.key);mxUtils.write(A,x.title);N.appendChild(A)}var H=!1;B();b.appendChild(N);mxUtils.br(b);b.appendChild(S);b.appendChild(K);var P=k,M=function(G,ia){G=f[N.value];null!=G.format?(R.value=G.format.width/100,d.value=G.format.height/100,K.style.display="none",S.style.display=""):(S.style.display="none",K.style.display="");G=parseFloat(R.value);if(isNaN(G)||0>=G)R.value=k.width/100;G=parseFloat(d.value);if(isNaN(G)||0>=G)d.value=k.height/100;G=new mxRectangle(0,0,Math.floor(100*parseFloat(R.value)),
Math.floor(100*parseFloat(d.value)));"custom"!=N.value&&D.checked&&(G=new mxRectangle(0,0,G.height,G.width));ia&&H||G.width==P.width&&G.height==P.height||(P=G,null!=l&&l(P))};mxEvent.addListener(e,"click",function(G){q.checked=!0;M(G);mxEvent.consume(G)});mxEvent.addListener(F,"click",function(G){D.checked=!0;M(G);mxEvent.consume(G)});mxEvent.addListener(R,"blur",M);mxEvent.addListener(R,"click",M);mxEvent.addListener(d,"blur",M);mxEvent.addListener(d,"click",M);mxEvent.addListener(D,"change",M);
mxEvent.addListener(q,"change",M);mxEvent.addListener(N,"change",function(G){H="custom"==N.value;M(G,!0)});M();return{set:function(G){k=G;B(null,null,!0)},get:function(){return P},widthInput:R,heightInput:d}};