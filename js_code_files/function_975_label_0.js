g())}),d.name):g()}):M||g()}},function(A){g(A)}):g()});"undefined"!==typeof JSZip||this.loadingExtensions||this.isOffline(!0)?x():(this.loadingExtensions=!0,mxscript("js/extensions.min.js",x))};EditorUi.prototype.importFile=function(d,f,g,u,x,A,H,P,M,G,ia,ja){G=null!=G?G:!0;var ha=!1,ba=null,oa=mxUtils.bind(this,function(sa){var J=null;null!=sa&&"<mxlibrary"==sa.substring(0,10)?this.loadLibrary(new LocalLibrary(this,sa,H)):J=this.importXml(sa,g,u,G,null,null!=ja?mxEvent.isControlDown(ja):null);null!=
P&&P(J)});"image"==f.substring(0,5)?(M=!1,"image/png"==f.substring(0,9)&&(f=ia?null:this.extractGraphModelFromPng(d),null!=f&&0<f.length&&(ba=this.importXml(f,g,u,G,null,null!=ja?mxEvent.isControlDown(ja):null),M=!0)),M||(f=this.editor.graph,M=d.indexOf(";"),0<M&&(d=d.substring(0,M)+d.substring(d.indexOf(",",M+1))),G&&f.isGridEnabled()&&(g=f.snap(g),u=f.snap(u)),ba=[f.insertVertex(null,null,"",g,u,x,A,"shape=image;verticalLabelPosition=bottom;labelBackgroundColor=default;verticalAlign=top;aspect=fixed;imageAspect=0;image="+
d+";")])):/(\.*<graphml )/.test(d)?(ha=!0,this.importGraphML(d,oa)):null!=M&&null!=H&&(/(\.v(dx|sdx?))($|\?)/i.test(H)||/(\.vs(x|sx?))($|\?)/i.test(H))?(ha=!0,this.importVisio(M,oa)):(new XMLHttpRequest).upload&&this.isRemoteFileFormat(d,H)?this.isOffline()?this.showError(mxResources.get("error"),mxResources.get("notInOffline")):(ha=!0,x=mxUtils.bind(this,function(sa){4==sa.readyState&&(200<=sa.status&&299>=sa.status?oa(sa.responseText):null!=P&&(P(null),this.showError(mxResources.get("error"),413==