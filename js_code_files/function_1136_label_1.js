EditorUi.prototype.duplicatePage=function(b,g){var k=null;try{var d=this.editor.graph;if(d.isEnabled()){d.isEditing()&&d.stopEditing();var t=b.node.cloneNode(!1);t.removeAttribute("id");var v={},B=d.createCellLookup([d.model.root]);k=new DiagramPage(t);k.root=d.cloneCell(d.model.root,null,v);var G=new mxGraphModel;G.prefix=Editor.guid()+"-";G.setRoot(k.root);d.updateCustomLinks(d.createCellMapping(v,B),[k.root]);k.viewState=b==this.currentPage?d.getViewState():b.viewState;this.initDiagramNode(k);
k.viewState.scale=1;k.viewState.scrollLeft=null;k.viewState.scrollTop=null;k.viewState.currentRoot=null;k.viewState.defaultParent=null;k.setName(g);k=this.insertPage(k,mxUtils.indexOf(this.pages,b)+1)}}catch(H){this.handleError(H)}return k};EditorUi.prototype.initDiagramNode=function(b){var g=(new mxCodec(mxUtils.createXmlDocument())).encode(new mxGraphModel(b.root));this.editor.graph.saveViewState(b.viewState,g);mxUtils.setTextContent(b.node,Graph.compressNode(g))};