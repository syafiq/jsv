U();var aa=this.container.style.cursor,ea=this.getTolerance(),na=this,va={currentState:null,currentLink:null,currentTarget:null,highlight:null!=y&&""!=y&&y!=mxConstants.NONE?new mxCellHighlight(na,y,4):null,startX:0,startY:0,scrollLeft:0,scrollTop:0,updateCurrentState:function(ua){var xa=ua.sourceState;if(null==xa||null==na.getLinkForCell(xa.cell))ua=na.getCellAt(ua.getGraphX(),ua.getGraphY(),null,null,null,function(Ca,La,Sa){return null==na.getLinkForCell(Ca.cell)}),xa=null==xa||na.model.isAncestor(ua,
xa.cell)?na.view.getState(ua):null;xa!=this.currentState&&(null!=this.currentState&&this.clear(),this.currentState=xa,null!=this.currentState&&this.activate(this.currentState))},mouseDown:function(ua,xa){this.startX=xa.getGraphX();this.startY=xa.getGraphY();this.scrollLeft=na.container.scrollLeft;this.scrollTop=na.container.scrollTop;null==this.currentLink&&"auto"==na.container.style.overflow&&(na.container.style.cursor="move");this.updateCurrentState(xa)},mouseMove:function(ua,xa){if(na.isMouseDown)null!=
this.currentLink&&(ua=Math.abs(this.startX-xa.getGraphX()),xa=Math.abs(this.startY-xa.getGraphY()),(ua>ea||xa>ea)&&this.clear());else{for(ua=xa.getSource();null!=ua&&"a"!=ua.nodeName.toLowerCase();)ua=ua.parentNode;null!=ua?this.clear():(null!=na.tooltipHandler&&null!=this.currentLink&&null!=this.currentState&&na.tooltipHandler.reset(xa,!0,this.currentState),(null==this.currentState||xa.getState()!=this.currentState&&null!=xa.sourceState||!na.intersects(this.currentState,xa.getGraphX(),xa.getGraphY()))&&
this.updateCurrentState(xa))}},mouseUp:function(ua,xa){var Ca=xa.getSource();for(ua=xa.getEvent();null!=Ca&&"a"!=Ca.nodeName.toLowerCase();)Ca=Ca.parentNode;null==Ca&&Math.abs(this.scrollLeft-na.container.scrollLeft)<ea&&Math.abs(this.scrollTop-na.container.scrollTop)<ea&&(null==xa.sourceState||!xa.isSource(xa.sourceState.control))&&((mxEvent.isLeftMouseButton(ua)||mxEvent.isMiddleMouseButton(ua))&&!mxEvent.isPopupTrigger(ua)||mxEvent.isTouchEvent(ua))&&(null!=this.currentLink?(Ca=na.isBlankLink(this.currentLink),
"data:"!==this.currentLink.substring(0,5)&&Ca||null==L||L(ua,this.currentLink),mxEvent.isConsumed(ua)||(ua=null!=this.currentTarget?this.currentTarget:mxEvent.isMiddleMouseButton(ua)?"_blank":Ca?na.linkTarget:"_top",na.openLink(this.currentLink,ua),xa.consume())):null!=O&&!xa.isConsumed()&&Math.abs(this.scrollLeft-na.container.scrollLeft)<ea&&Math.abs(this.scrollTop-na.container.scrollTop)<ea&&Math.abs(this.startX-xa.getGraphX())<ea&&Math.abs(this.startY-xa.getGraphY())<ea&&O(xa.getEvent()));this.clear()},
activate:function(ua){this.currentLink=na.getAbsoluteUrl(na.getLinkForCell(ua.cell));null!=this.currentLink&&(this.currentTarget=na.getLinkTargetForCell(ua.cell),na.container.style.cursor="pointer",null!=this.highlight&&this.highlight.highlight(ua))},clear:function(){null!=na.container&&(na.container.style.cursor=aa);this.currentLink=this.currentState=this.currentTarget=null;null!=this.highlight&&this.highlight.hide();null!=na.tooltipHandler&&na.tooltipHandler.hide()}};na.click=function(ua){};na.addMouseListener(va);
mxEvent.addListener(document,"mouseleave",function(ua){va.clear()})};Graph.prototype.duplicateCells=function(y,L){y=null!=y?y:this.getSelectionCells();L=null!=L?L:!0;for(var O=0;O<y.length;O++)this.isTableCell(y[O])&&(y[O]=this.model.getParent(y[O]));y=this.model.getTopmostCells(y);var U=this.getModel(),aa=this.gridSize,ea=[];U.beginUpdate();try{var na={},va=this.createCellLookup(y),ua=this.cloneCells(y,!1,na,!0);for(O=0;O<y.length;O++){var xa=U.getParent(y[O]);if(null!=xa){var Ca=this.moveCells([ua[O]],