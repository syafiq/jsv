`);r.value=S}const w=r.value.replace(/\s/g,"").length,C=i.replace(/\s/g,"").length;if(w===C||r.entities.find(v=>v._==="messageEntityCustomEmoji")){t=r.value,s=r.entities,a=!1;let v=Zf(t);v=v.filter(o),pd(s,v)}}a&&(t=i,s=Zf(t),s=s.filter(o)),gd(f,t,s,c)}),P1=null};var yd=(d=>(d[d.Neutral=0]="Neutral",d[d.Valid=1]="Valid",d[d.Error=2]="Error",d))(yd||{});function s0(d,f){return xf.create({wrappingDraft:!0,isSelectable:!0,textColor:d||"primary-text-color",animationGroup:f})}function me(d){const f=Array.from(d.querySelectorAll(".custom-emoji, .custom-emoji-placeholder"));let e=d.querySelector(".custom-emoji-renderer");if(!e&&f.length)e=s0(d.dataset.textColor,d.dataset.animationGroup),d.prepend(e);else if(e&&!f.length){e.remove();return}if(!e)return;const t=new Map;f.forEach(s=>{const i=s.loop!==void 0?s:s.customEmojiElement,{docId:a}=i;let n=t.get(a);n||t.set(a,n=new Set),n.add(i)});for(const[s,i]of t){let a=e.customEmojis.get(s);if(a)for(const n of a)i.has(n)||n.destroy();else a=new Set;for(const n of i)a.has(n)||n.connectedCallback()}e.add({addCustomEmojis:t,lazyLoadQueue:!1}),e.forceRender()}class Sd{constructor(f={}){this.options=f,this.setEmpty=(r=this.isEmpty())=>{[this.input,this.placeholder].filter(Boolean).forEach(y=>{y.classList.toggle("is-empty",r)})},this.container=document.createElement("div"),this.container.classList.add("input-field"),this.required=f.required,this.validate=f.validate,f.maxLength!==void 0&&f.showLengthOn===void 0&&(f.showLengthOn=Math.min(40,Math.round(f.maxLength/3)));const{placeholder:e,maxLength:t,showLengthOn:s,name:i,plainText:a,canBeEdited:n=!0,autocomplete:o,withBorder:c,allowStartingSpace:h}=f,p=f.label||f.labelText;this.allowStartingSpace=h;const g=[];let m;if(a?(this.container.innerHTML=`
      <input type="text" ${i?`name="${i}"`:""} autocomplete="${o??"off"}" ${p?'required=""':""} class="input-field-input">
      `,m=this.container.firstElementChild,g.push(()=>{const r=this.isEmpty();r&&(m.value=""),this.setEmpty(r)})):(P1&&P1(),this.container.innerHTML='<div class="input-field-input"></div>',m=this.container.firstElementChild,m.contentEditable=""+!!n,z1.getInstance(),m.addEventListener("mousedown",r=>{const y=document.getSelection();if(!y.isCollapsed)return;const w=Qt(r.target,"IMG");if(!w)return;const C=w.getBoundingClientRect(),v=C.left+C.width/2,x=r.clientX>=v,S=document.createRange();S.setStartAfter(x?w:w.previousSibling??w),y.removeAllRanges(),y.addRange(S)}),g.push(()=>{const r=this.isEmpty();r&&m.replaceChildren(),this.setEmpty(r),t0(Array.from(m.querySelectorAll(".input-something"))),me(m)})),Te(m),f.inputMode&&(m.inputMode=f.inputMode),e&&(this.placeholder=document.createElement("span"),this.placeholder.classList.add("input-field-placeholder"),this.container.append(this.placeholder),x0(this.placeholder,e,void 0)),c!==!1&&c||p||e){const r=document.createElement("div");r.classList.add("input-field-border"),this.container.append(r)}if(p&&(this.label=document.createElement("label"),this.setLabel(),this.container.append(this.label)),t){const r=this.container.lastElementChild;let y=!1;const w=()=>{const C=m.classList.contains("error"),v=a?m.value.length:[...Yf(m,!1,!1).value].length,x=t-v,S=x<0;m.classList.toggle("error",S),S||x<=s?(this.setLabel(),r.append(` (${t-v})`),y||(y=!0)):(C&&!S||y)&&(this.setLabel(),y=!1)};g.push(w)}!f.withLinebreaks&&!a&&(m.dataset.noLinebreaks="1",m.addEventListener("keypress",r=>{if(r.key==="Enter")return r.preventDefault(),!1})),g.length&&m.addEventListener("input",()=>{g.forEach(r=>r())}),this.input=m,this.setEmpty(!0)}select(){this.value&&(this.options.plainText?this.input.select():ud(this.input))}setLabel(){this.label.textContent="",this.options.labelText?T0(this.label,this.options.labelText):this.label.append(h1(this.options.label,this.options.labelOptions))}get value(){return this.options.plainText?this.input.value:Yf(this.input,!1,!1).value}set value(f){this.setValueSilently(f,!0),this.simulateInputEvent()}simulateInputEvent(){Fe(this.input,"input")}setValueSilently(f,e){this.options.plainText?this.input.value=f:(Re(this.input,f),me(this.input)),this.setEmpty()}isEmpty(){return fd(this.input,this.allowStartingSpace)}isChanged(){return this.value!==this.originalValue}isValid(){return!this.input.classList.contains("error")&&(!this.validate||this.validate())&&(!this.required||!this.isEmpty())}isValidToChange(){return this.isValid()&&this.isChanged()}setDraftValue(f="",e){let t=f;this.options.plainText||(t=d0(f)),e?this.setValueSilently(t,!1):this.value=t}setOriginalValue(f="",e){this.originalValue=f,this.setDraftValue(f,e)}setState(f,e){e?(this.label.textContent="",this.label.append(h1(e,this.options.labelOptions))):this.setLabel(),this.input.classList.toggle("error",!!(f&2)),this.input.classList.toggle("valid",!!(f&1))}setError(f){this.setState(2,f)}}function xd(d,f=!1,e){return d?(e??(e=Zf(d).filter(t=>t._==="messageEntityEmoji")),Tf(d,{entities:e,wrappingDraft:f})):Tf("")}export{It as $,Qt as A,Xe as B,Ft as C,sf as D,_e as E,D1 as F,z0 as G,Dt as H,Sd as I,X0 as J,pd as K,hd as L,q0 as M,Qe as N,i1 as O,H0 as P,Ad as Q,of as R,Ot as S,xf as T,f0 as U,j0 as V,Me as W,Pt as X,z1 as Y,$t as Z,_1 as _,U1 as a,pt as a0,rd as a1,Ld as a2,W0 as a3,Bt as a4,Lt as a5,ee as a6,Yf as a7,K1 as a8,fd as a9,d0 as aa,Cd as ab,Xt as ac,bd as ad,L1 as ae,gd as af,Y0 as ag,$e as ah,Ct as b,Tf as c,Zf as d,dd as e,Ye as f,Oe as g,ct as h,bt as i,de as j,Q0 as k,p1 as l,Nf as m,ot as n,O1 as o,De as p,tt as q,Re as r,o1 as s,O0 as t,$f as u,R0 as v,xd as w,yd as x,Wt as y,B0 as z};