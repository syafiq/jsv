mxVertexHandler.prototype.createCustomHandles=function(){null==V&&(V=mxCellRenderer.defaultShapes.tableLine);var y=T.apply(this,arguments);if(this.graph.isTable(this.state.cell)){var N=function(Qa,Ea,Ja){for(var Pa=[],$a=0;$a<Qa.length;$a++){var eb=Qa[$a];Pa.push(null==eb?null:new mxPoint((ta+eb.x+Ea)*ha,(za+eb.y+Ja)*ha))}return Pa},P=this,W=this.graph,Y=W.model,ha=W.view.scale,ma=this.state,xa=this.selectionBorder,ta=this.state.origin.x+W.view.translate.x,za=this.state.origin.y+W.view.translate.y;
null==y&&(y=[]);var Ga=W.view.getCellStates(Y.getChildCells(this.state.cell,!0));if(0<Ga.length){var Oa=Y.getChildCells(Ga[0].cell,!0),Na=W.getTableLines(this.state.cell,!1,!0),Sa=W.getTableLines(this.state.cell,!0,!1);for(Y=0;Y<Ga.length;Y++)mxUtils.bind(this,function(Qa){var Ea=Ga[Qa],Ja=Qa<Ga.length-1?Ga[Qa+1]:null;Ja=null!=Ja?W.getCellGeometry(Ja.cell):null;var Pa=null!=Ja&&null!=Ja.alternateBounds?Ja.alternateBounds:Ja;Ja=null!=Sa[Qa]?new V(Sa[Qa],mxConstants.NONE,1):new mxLine(new mxRectangle,
mxConstants.NONE,1,!1);Ja.isDashed=xa.isDashed;Ja.svgStrokeTolerance++;Ea=new mxHandle(Ea,"row-resize",null,Ja);Ea.tableHandle=!0;var $a=0;Ea.shape.node.parentNode.insertBefore(Ea.shape.node,Ea.shape.node.parentNode.firstChild);Ea.redraw=function(){if(null!=this.shape){this.shape.stroke=0==$a?mxConstants.NONE:xa.stroke;if(this.shape.constructor==V)this.shape.line=N(Sa[Qa],0,$a),this.shape.updateBoundsFromLine();else{var cb=W.getActualStartSize(ma.cell,!0);this.shape.bounds.height=1;this.shape.bounds.y=
this.state.y+this.state.height+$a*ha;this.shape.bounds.x=ma.x+(Qa==Ga.length-1?0:cb.x*ha);this.shape.bounds.width=ma.width-(Qa==Ga.length-1?0:cb.width+cb.x+ha)}this.shape.redraw()}};var eb=!1;Ea.setPosition=function(cb,db,rb){$a=Math.max(Graph.minTableRowHeight-cb.height,db.y-cb.y-cb.height);eb=mxEvent.isShiftDown(rb.getEvent());null!=Pa&&eb&&($a=Math.min($a,Pa.height-Graph.minTableRowHeight))};Ea.execute=function(cb){if(0!=$a)W.setTableRowHeight(this.state.cell,$a,!eb);else if(!P.blockDelayedSelection){var db=
W.getCellAt(cb.getGraphX(),cb.getGraphY())||ma.cell;W.graphHandler.selectCellForEvent(db,cb)}$a=0};Ea.reset=function(){$a=0};y.push(Ea)})(Y);for(Y=0;Y<Oa.length;Y++)mxUtils.bind(this,function(Qa){var Ea=W.view.getState(Oa[Qa]),Ja=W.getCellGeometry(Oa[Qa]),Pa=null!=Ja.alternateBounds?Ja.alternateBounds:Ja;null==Ea&&(Ea=new mxCellState(W.view,Oa[Qa],W.getCellStyle(Oa[Qa])),Ea.x=ma.x+Ja.x*ha,Ea.y=ma.y+Ja.y*ha,Ea.width=Pa.width*ha,Ea.height=Pa.height*ha,Ea.updateCachedBounds());Ja=Qa<Oa.length-1?Oa[Qa+
1]:null;Ja=null!=Ja?W.getCellGeometry(Ja):null;var $a=null!=Ja&&null!=Ja.alternateBounds?Ja.alternateBounds:Ja;Ja=null!=Na[Qa]?new V(Na[Qa],mxConstants.NONE,1):new mxLine(new mxRectangle,mxConstants.NONE,1,!0);Ja.isDashed=xa.isDashed;Ja.svgStrokeTolerance++;Ea=new mxHandle(Ea,"col-resize",null,Ja);Ea.tableHandle=!0;var eb=0;Ea.shape.node.parentNode.insertBefore(Ea.shape.node,Ea.shape.node.parentNode.firstChild);Ea.redraw=function(){if(null!=this.shape){this.shape.stroke=0==eb?mxConstants.NONE:xa.stroke;
if(this.shape.constructor==V)this.shape.line=N(Na[Qa],eb,0),this.shape.updateBoundsFromLine();else{var db=W.getActualStartSize(ma.cell,!0);this.shape.bounds.width=1;this.shape.bounds.x=this.state.x+(Pa.width+eb)*ha;this.shape.bounds.y=ma.y+(Qa==Oa.length-1?0:db.y*ha);this.shape.bounds.height=ma.height-(Qa==Oa.length-1?0:(db.height+db.y)*ha)}this.shape.redraw()}};var cb=!1;Ea.setPosition=function(db,rb,mb){eb=Math.max(Graph.minTableColumnWidth-Pa.width,rb.x-db.x-Pa.width);cb=mxEvent.isShiftDown(mb.getEvent());
null==$a||cb||(eb=Math.min(eb,$a.width-Graph.minTableColumnWidth))};Ea.execute=function(db){if(0!=eb)W.setTableColumnWidth(this.state.cell,eb,cb);else if(!P.blockDelayedSelection){var rb=W.getCellAt(db.getGraphX(),db.getGraphY())||ma.cell;W.graphHandler.selectCellForEvent(rb,db)}eb=0};Ea.positionChanged=function(){};Ea.reset=function(){eb=0};y.push(Ea)})(Y)}}return null!=y?y.reverse():null};var Z=mxVertexHandler.prototype.setHandlesVisible;mxVertexHandler.prototype.setHandlesVisible=function(y){Z.apply(this,