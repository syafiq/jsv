function(d,g,k,n){d=null!=d?d:!0;g=null!=g?g:!1;k=null!=k?k:!Editor.compressXml;var x=this.editor.getGraphXml(d,n);if(d&&null!=this.fileNode&&null!=this.currentPage)if(d=function(I){var G=I.getElementsByTagName("mxGraphModel");G=0<G.length?G[0]:null;null==G&&k?(G=mxUtils.trim(mxUtils.getTextContent(I)),I=I.cloneNode(!1),0<G.length&&(G=Graph.decompress(G),null!=G&&0<G.length&&I.appendChild(mxUtils.parseXml(G).documentElement))):null==G||k?I=I.cloneNode(!0):(I=I.cloneNode(!1),mxUtils.setTextContent(I,
Graph.compressNode(G)));x.appendChild(I)},EditorUi.removeChildNodes(this.currentPage.node),mxUtils.setTextContent(this.currentPage.node,Graph.compressNode(x)),x=this.fileNode.cloneNode(!1),g)d(this.currentPage.node);else for(g=0;g<this.pages.length;g++){var u=this.pages[g],D=u.node;if(u!=this.currentPage)if(u.needsUpdate){var F=new mxCodec(mxUtils.createXmlDocument());F=F.encode(new mxGraphModel(u.root));this.editor.graph.saveViewState(u.viewState,F,null,n);EditorUi.removeChildNodes(D);mxUtils.setTextContent(D,