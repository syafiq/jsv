    `),Kg.set(o,i=`hsla(${a}, ${r}%, ${Math.max(0,l-40)}%, ${c})`)}const n=cd.cloneNode(!0);return n.firstElementChild.style.fill=`url(#${s})`,n.firstElementChild.style.stroke=i,n.lastElementChild.append(Ah(e,!0)),n}function _m({docIds:o,loadPromises:e,middleware:t,lazyLoadQueue:s,customEmojiSize:i,animationGroup:n}){const a=" ".repeat(o.length),r=[];return o.forEach((c,d)=>{r.push({_:"messageEntityCustomEmoji",offset:d,length:1,document_id:c})}),us(a,{entities:r,loadPromises:e,animationGroup:n,customEmojiSize:i,middleware:t,lazyLoadQueue:s})}function yI(o){const e=o.loadPromises??(o.loadPromises=[]),t=_m(o);return Promise.all(e).then(()=>t)}function Wg(o){const e=o.action,{onclick:t,url:s}=Eh(`tg://voicechat?chat_id=${o.peerId.toChatId()}&id=${e.call.id}&access_hash=${e.call.access_hash}`);if(!t)return document.createElement("span");const i=document.createElement("a");return i.href=s,i.setAttribute("onclick",t+"(this)"),i}function zl(o){if(o instanceof DocumentFragment)return o;const e=document.createElement("template");return o=o.trim(),e.innerHTML=o,e.content}const vI=new Set(["all","web","webk"]),bI=new Set;function mv(o){return o.find(e=>vI.has(e.platform)&&!bI.has(e.reason))}function gv(o){return!!mv(o)}function wI(o){return o.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function fv(o){return!!(o.restriction_reason&&gv(o.restriction_reason))}async function yv(o){try{return await SI(o)}catch(e){return console.error("wrapMessageActionTextNewUnsafe error:",e),o.plain?"":document.createElement("span")}}async function Fa(o){o.text??(o.text=o.message.message),!o.plain&&o.highlightWord&&(o.highlightWord=o.highlightWord.trim());const{message:e,usingMids:t,plain:s,highlightWord:i,withoutMediaType:n}=o,a=[];let r=!1;const l=(p,m,g)=>{if(p){if(m===void 0&&r)return;m=s?De.format(p,!0,g):_(p,g)}if(s)a.push(m);else{const f=document.createElement("span");typeof m=="string"?f.innerHTML=m:f.append(m),a.push(f)}},d=C.managers.appMessagesManager,h=fv(e);let u=e.totalEntities??e.entities;if(e.media&&!h){let p=!0;if(e.grouped_id){if(t){const g=await d.getMidsByMessage(e);if(t.length===g.length){for(const f of g)if(!t.includes(f)){p=!1;break}}else p=!1}if(p){const g=await d.getGroupedText(e.grouped_id);o.text=g?.message||"",u=g?.totalEntities||[],n||(l("AttachAlbum"),r=!0)}}else p=!1;if(!p&&!n||!o.text){const g=e.media;switch(g?._){case"messageMediaPhoto":l("AttachPhoto");break;case"messageMediaDice":l(void 0,s?g.emoticon:Pe(g.emoticon));break;case"messageMediaVenue":{o.text=g.title,l("AttachLocation");break}case"messageMediaGeo":l("AttachLocation");break;case"messageMediaGeoLive":l("AttachLiveLocation");break;case"messageMediaPoll":const f="ðŸ“Š "+(g.poll.question||"poll");l(void 0,s?f:Pe(f));break;case"messageMediaContact":l("AttachContact");break;case"messageMediaGame":{const y="ðŸŽ® "+g.game.title;l(void 0,s?y:Pe(y));break}case"messageMediaDocument":{const y=g.document;if(y.type==="video")l("AttachVideo");else if(y.type==="voice")l("AttachAudio");else if(y.type==="gif")l("AttachGif");else if(y.type==="round")l("AttachRound");else if(y.type==="sticker"){const v=a.length;if(y.stickerEmojiRaw){const w=y.stickerEmojiRaw+" ";l(void 0,s?w:Pe(w))}l("AttachSticker");const b=a.splice(v,2);if(s)a.push(b[0]+(b[1]?b[1]:""));else{const w=window.document.createElement("span");w.append(...b),a.push(w)}o.text=""}else if(y.type==="audio"){const v=y.attributes.find(w=>w._==="documentAttributeAudio"&&(w.title||w.performer)),b="ðŸŽµ "+(v?[v.title,v.performer].filter(Boolean).join(" - "):y.file_name);l(void 0,s?b:Pe(b))}else l(void 0,s?y.file_name:Pe(y.file_name));break}case"messageMediaInvoice":{g.extended_media?._==="messageExtendedMediaPreview"?l(void 0,s?g.description:Pe(g.description)):l(void 0,s?g.title:Pe(g.title));break}case"messageMediaUnsupported":{l(ep);break}case"messageMediaStory":{if(g.pFlags.via_mention){const y=Je(g.peer),v=y===C.myId;l(v?"StoryMentionYou":"StoryMention",void 0,[await Oe({peerId:v?e.peerId:y,plainText:s})])}else l("Story");break}case"inputMediaWebPage":case"messageMediaPhotoExternal":case"messageMediaDocumentExternal":case"messageMediaWebPage":break;case"messageMediaGiveaway":{const y=$y(new Date(g.until_date*1e3));l("Giveaway.ToBeSelectedFull",void 0,[_("Giveaway.ToBeSelected",[g.quantity,s?y.textContent:y])]);break}case"messageMediaGiveawayResults":{const{langPackKey:y,args:v}=bv(g,s);l(y,void 0,v);break}default:l(ep),o.text="";break}}const m=a.length;for(let g=1;g<m;g+=2)a.splice(g,0,", ");o.text&&m&&a.push(", ")}if(e.action){const p=await yv({...o,noLinks:!0,noTextFormat:!0});p&&l(void 0,p)}if(h&&(o.text=mv(e.restriction_reason).text,u=[]),o.text)if(o.text=Aa(o.text,100),u??(u=ro(o.text)),s)a.push(Rr(o.text,u));else{if(i){let m=!1,g;const f=new RegExp(wI(i),"gi");for(u=u.slice();(g=f.exec(o.text))!==null;)u.push({_:"messageEntityHighlight",length:i.length,offset:g.index}),m=!0;m&&Hg(u)}if(e.peerId===Fc&&e.fromId===e.peerId){const m=o.text.match(/[\d\-]{5,7}/);m&&(u=u.slice(),u.push({_:"messageEntitySpoiler",offset:m.index,length:m[0].length}),Hg(u))}const p=us(o.text,{...o,noLinebreaks:!0,entities:u,noLinks:!0,noTextFormat:!0});a.push(zl(p))}if(s)return a.join("");{const p=document.createDocumentFragment();return p.append(...a),p}}function Qd(o){return o._==="payments.checkedGiftCode"?!o.from_id:(o.amount||o.crypto_amount)!==void 0}async function jg(o){const e=await Fa(o);if(o.plain)return e;const t=document.createElement("i");return t.dataset.savedFrom=o.message.peerId+"_"+o.message.mid,t.append(e),nn(t),t}function bl(o,e){return e?o:Mm(Pe(o))}async function Fh(o){const e=o.topic;let t=e?.icon_emoji_id;return e?.id===Co&&(t="5390854796011906616"),t?o.plain?C.managers.appEmojiManager.getCustomEmojiDocument(t).then(s=>s.stickerEmojiRaw):yI({...o,docIds:[t]}).then(s=>(s.lastElementChild.classList.add("topic-icon"),s)):o.plain?"":fI(e?.icon_color,e?.title)}function vv(o){const e=o.message.action;return Fh({...o,topic:e})}async function qg(o){const e=o.message.action,t=document.createElement("span");return t.classList.add("topic-name"),t.append(await vv(o),bl(e.title,o.plain)),t}function bv(o,e){let t="Giveaway.Results",s=[o.winners_count];const i=(n,a)=>{s=[e?De.format(t,!0,s):_(t,s)],t="Giveaway.Results.Combined",s.push(e?De.format(n,!0,a):_(n,a))};return o.winners_count?o.unclaimed_count&&i("Giveaway.Results.Unclaimed",[o.unclaimed_count]):(t="Giveaway.Results.NoWinners",s=[o.unclaimed_count]),{langPackKey:t,args:s}}async function SI(o){const{plain:e,message:t,noLinks:s}=o,i=e?void 0:document.createElement("span"),n="action"in t&&t.action;if(n.message){const a=n.message;return e?Rr(a):(St(i,us(a,{noLinebreaks:!0})),i)}else{let a=n._,r,l;const c=C.managers,d=(p,m)=>m?Ea({peerId:p,plainText:m}):Oe({peerId:p}),h=async(p,m)=>{if(p.length===1)return d(p[0],m);const g=ci(await Promise.all(p.map(f=>d(f,m))),!1,m);if(m)return Array.isArray(g)?g.join(""):g;{const f=document.createElement("span");return f.append(...g),l.push(f),f}};switch(n._){case"messageActionPhoneCall":{a+="."+n.type,l=[xd(n.duration,e)];break}case"messageActionGroupCall":{a+="."+n.type,l=[],!a.endsWith("You")&&!t.pFlags.post&&l.push(d(t.fromId,e)),n.duration!==void 0?l.push(xd(n.duration,e)):s?l.push(""):l.push(Wg(t));break}case"messageActionInviteToGroupCall":{const p=[t.fromId,n.users[0].toPeerId()];let m="Chat.Service.VoiceChatInvitation";const g=C.myId;p[0]===g?m+="ByYou":p[1]===g&&(m+="ForYou"),cs(p,g),r=m,l=p.map(f=>d(f,e)),l.push(s?"":Wg(t));break}case"messageActionGroupCallScheduled":{const p=new Date,m=new Date(n.schedule_date*1e3),g=(m.getTime()-p.getTime())/864e5,f=new Date(p);f.setDate(f.getDate()+1);const y=await c.appPeersManager.isBroadcast(t.peerId);r=y?"ChatList.Service.VoiceChatScheduled.Channel":"ChatList.Service.VoiceChatScheduled",l=[];const v=C.myId;t.fromId===v?r+="You":y||l.push(d(t.fromId,e));let b;const w=[];g<1&&m.getDate()===p.getDate()?b="TodayAtFormattedWithToday":g<2&&m.getDate()===f.getDate()?b="Time.TomorrowAt":(b="formatDateAtTime",w.push(new De.IntlDateElement({date:m,options:{day:"2-digit",month:"2-digit",year:"2-digit"}}).element)),w.push(Gy(m));const S=_(b,w);l.push(S);break}case"messageActionChatCreate":{const p=C.myId;t.fromId===p?a+="You":l=[d(t.fromId,e)];break}case"messageActionPinMessage":{const p=t.peerId,m=await c.appMessagesManager.getMessageByPeer(p,t.reply_to_mid);l=[d(t.fromId,e)],m?l.push(jg({...o,message:m})):(r="ActionPinnedNoText",t.reply_to_mid&&c.appMessagesManager.fetchMessageReplyTo(t));break}case"messageActionChatJoinedByRequest":{const p=await c.appPeersManager.isBroadcast(t.peerId);t.pFlags.out?r=p?"RequestToJoinChannelApproved":"RequestToJoinGroupApproved":(r=p?"ChatService.UserJoinedChannelByRequest":"ChatService.UserJoinedGroupByRequest",l=[d(t.fromId,e)]);break}case"messageActionGiveawayLaunch":case"messageActionContactSignUp":case"messageActionChatReturn":case"messageActionChatLeave":case"messageActionChatJoined":case"messageActionChatEditPhoto":case"messageActionChatDeletePhoto":case"messageActionChatEditVideo":case"messageActionChatJoinedByLink":case"messageActionChannelEditVideo":case"messageActionChannelDeletePhoto":{l=[d(t.fromId,e)];break}case"messageActionChannelEditTitle":case"messageActionChatEditTitle":{l=[],n._==="messageActionChatEditTitle"&&l.push(d(t.fromId,e)),l.push(bl(n.title,e));break}case"messageActionChatDeleteUser":case"messageActionChatAddUsers":case"messageActionChatAddUser":{const p=n.users||[n.user_id];l=[d(t.fromId,e)];const m=p.map(g=>g.toPeerId(!1));l.push(h(m,e));break}case"messageActionBotAllowed":{if(n.pFlags?.attach_menu){r="ActionAttachMenuBotAllowed";break}else if(n.pFlags?.from_request){r="ActionBotAllowedRequest";break}else if(!n.domain)break;const p=us(n.domain,{entities:[{_:"messageEntityUrl",length:n.domain.length,offset:0}],noLinks:s});l=[Mm(p)];break}case"messageActionPaymentSent":{const p=n.pFlags.recurring_init,m=n.pFlags.recurring_used;if(r=m?"Chat.Service.PaymentSentRecurringUsedNoTitle":p?"Chat.Service.PaymentSentRecurringInitNoTitle":"Chat.Service.PaymentSent1NoTitle",l=[Gn(n.total_amount,n.currency),d(t.peerId,e)],t.reply_to_mid){const f=t.reply_to,y=await c.appMessagesManager.getMessageByPeer(f?.reply_to_peer_id?Je(f.reply_to_peer_id):t.peerId,t.reply_to_mid);y?(r=m?"Chat.Service.PaymentSentRecurringUsed":p?"Chat.Service.PaymentSentRecurringInit":"Chat.Service.PaymentSent1",l.push(jg({...o,message:y}).then(v=>(v instanceof HTMLElement&&v.classList.add("is-receipt-link"),v)))):c.appMessagesManager.fetchMessageReplyTo(t)}break}case"messageActionSetMessagesTTL":{l=[];const p=await c.appPeersManager.isBroadcast(t.peerId);if(n.period){p?r="ActionTTLChannelChanged":t.fromId===C.myId?r="ActionTTLYouChanged":(r="ActionTTLChanged",l.push(d(t.fromId,e)));let m;if(n.period>1814400){let g;const f=[];n.period>=31536e3?(g="Years",f.push(n.period/31536e3|0)):(g="Months",f.push(n.period/(pm*30)|0)),m=e?De.format(g,!0,f):_(g,f)}else m=xd(n.period,e);l.push(m)}else p?r="ActionTTLChannelDisabled":t.fromId===C.myId?r="ActionTTLYouDisabled":(r="ActionTTLDisabled",l.push(d(t.fromId,e)));break}case"messageActionTopicEdit":{let p,m,g;const f=!!t.pFlags.out,y=n.icon_emoji_id!==void 0,v=y&&!+n.icon_emoji_id,b=n.title!==void 0,w=n.hidden!==void 0;f||(g=d(t.fromId,e)),b&&(m=bl(n.title,e)),y&&!v&&(p=vv(o)),l=g?[g]:[],n.closed?r=f?"Chat.Service.Group.TopicEdited.You.Paused":"Chat.Service.Group.TopicEdited.Paused":n.closed===!1?r=f?"Chat.Service.Group.TopicEdited.You.Resumed":"Chat.Service.Group.TopicEdited.Resumed":v&&b?(r=f?"Chat.Service.TopicEdited.You.Mixed.IconRemoved":"Chat.Service.TopicEdited.Mixed.IconRemoved",l.push(m)):y&&b?(r=f?"Chat.Service.TopicEdited.You.Mixed":"Chat.Service.TopicEdited.Mixed",l.push(qg(o))):v?r=f?"Chat.Service.Group.TopicEdited.You.Icon.Removed":"Chat.Service.Group.TopicEdited.Icon.Removed":b?(r=f?"Chat.Service.Group.TopicEdited.You.Title":"Chat.Service.Group.TopicEdited.Title",l.push(m)):y?(r=f?"Chat.Service.Group.TopicEdited.You.Icon":"Chat.Service.Group.TopicEdited.Icon",l.push(p)):w&&(r=f?n.hidden?"Chat.Service.Group.TopicEdited.You.Hided":"Chat.Service.Group.TopicEdited.You.Unhided":n.hidden?"Chat.Service.Group.TopicEdited.Hided":"Chat.Service.Group.TopicEdited.Unhided");break}case"messageActionTopicCreate":{l=[qg(o)],r="TopicWasCreatedAction";break}case"messageActionSetChatTheme":{const p=!!t.pFlags.out;let m;p||(m=d(t.fromId,e)),l=m?[m]:[],n.emoticon?(l.push(bl(n.emoticon,e)),r=p?"ChatThemeChangedYou":"ChatThemeChangedTo"):r=p?"ChatThemeDisabledYou":"ChatThemeDisabled";break}case"messageActionGiftCode":case"messageActionGiftPremium":{const p=n._==="messageActionGiftCode";if(p&&!Qd(n)){r="BoostingReceivedGiftNoName",n.boost_peer&&(r="BoostingReceivedGiftFrom",l=[d(Je(n.boost_peer),e)]);break}const m=!!t.pFlags.out&&!p;let g;m||(g=d(t.fromId,e)),l=g?[g]:[],l.push(Gn(n.amount,n.currency,!1,!0)),r=m?"ActionGiftOutbound":"ActionGiftInbound";break}case"messageActionWebViewDataSent":{r="ActionBotWebViewData",l=[bl(n.text,e)];break}case"messageActionRequestedPeer":{r="Chat.Service.PeerRequested",l=[h(n.peers.map(p=>Je(p)),e),d(t.peerId,e)];break}case"messageActionGiveawayResults":{const p=bv(n,e);r=p.langPackKey,l=p.args;break}default:r=$d[a]||`[${n._}]`;break}r||(r=$d[a],r===void 0&&(r="["+a+"]"));const u=l&&await Promise.all(l);return e?De.format(r,!0,u):$t(i,r,u)}}const wv=new WeakMap;C.addEventListener("peer_title_edit",({peerId:o,threadId:e})=>{let t=`.peer-title[data-peer-id="${o}"]`;e&&(t+=`[data-thread-id="${e}"]`),Array.from(document.querySelectorAll(t)).forEach(i=>{wv.get(i)?.update()})});class Mt{constructor(e){this.element=document.createElement("span"),this.element.classList.add("peer-title"),nn(this.element),this.options={},e&&this.update(e),wv.set(this.element,this)}setOptions(e){if(e){Lt(this.options,e);for(const t in e){const s=e[t];typeof s!="object"&&typeof s!="function"&&(this.element.dataset[t]=s?""+(typeof s=="boolean"?+s:s):"0")}}}setHasInner(e){this.hasInner!==e&&(this.hasInner=e,this.element.classList.toggle("with-icons",e))}async update(e){var a;this.setOptions(e);let t=this.options.fromName;if(t!==void 0){this.options.limitSymbols!==void 0&&(t=Aa(t,this.options.limitSymbols,this.options.limitSymbols)),St(this.element,Pe(t));return}(a=this.options).peerId??(a.peerId=Vt);let s;const{peerId:i,threadId:n}=this.options;if(i===C.myId&&this.options.dialog){let r;this.options.meAsNotes?r=_(this.options.onlyFirstName?"MyNotesShort":"MyNotes"):r=_(this.options.onlyFirstName?"Saved":"SavedMessages"),tt(this.element,r)}else if(i===mm)tt(this.element,_(this.options.onlyFirstName?"AuthorHiddenShort":"AuthorHidden"));else{if(n){const[h,u]=await Promise.all([C.managers.dialogsStorage.getForumTopic(i,n),C.managers.appPeersManager.isForum(i)]);if(!h&&u){C.managers.dialogsStorage.getForumTopicById(i,n).then(p=>{if(!p&&this.options.threadId===n){this.options.threadId=void 0,this.update({threadId:void 0});return}this.update()},()=>{this.options.threadId===n&&(this.options.threadId=void 0,this.update({threadId:void 0}))}),St(this.element,_("Loading")),this.setHasInner(!1);return}}const r=n&&this.options.withIcons?C.managers.dialogsStorage.getForumTopic(i,n).then(h=>Fh({...this.options.wrapOptions??{},topic:h})):void 0,[l,c,d]=await Promise.all([Ea(this.options),this.options.withIcons&&up({peerId:i,wrapOptions:this.options.wrapOptions})||this.options.withPremiumIcon&&up({peerId:i,wrapOptions:this.options.wrapOptions,noVerifiedIcon:!0,noFakeIcon:!0}),r]);if(c?.length||d){const h=document.createElement("span");h.classList.add("peer-title-inner"),s=!0,St(h,l);const u=document.createDocumentFragment();u.append(...[d,h,...c??[]].filter(Boolean)),St(this.element,u)}else St(this.element,l)}this.setHasInner(s)}}async function Oe(o){const e=new Mt;return await e.update(o),e.element}const CI=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],II=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...CI]),LI=new Set(["innerHTML","textContent","innerText","children"]),MI=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PI=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function EI(o,e){const t=PI[o];return typeof t=="object"?t[e]?t.$:void 0:t}const _I=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),kI={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function TI(o,e,t){let s=t.length,i=e.length,n=s,a=0,r=0,l=e[i-1].nextSibling,c=null;for(;a<i||r<n;){if(e[a]===t[r]){a++,r++;continue}for(;e[i-1]===t[n-1];)i--,n--;if(i===a){const d=n<s?r?t[r-1].nextSibling:t[n-r]:l;for(;r<n;)o.insertBefore(t[r++],d)}else if(n===r)for(;a<i;)(!c||!c.has(e[a]))&&e[a].remove(),a++;else if(e[a]===t[n-1]&&t[r]===e[i-1]){const d=e[--i].nextSibling;o.insertBefore(t[r++],e[a++].nextSibling),o.insertBefore(t[--n],d),e[i]=t[n]}else{if(!c){c=new Map;let h=r;for(;h<n;)c.set(t[h],h++)}const d=c.get(e[a]);if(d!=null)if(r<d&&d<n){let h=a,u=1,p;for(;++h<i&&h<n&&!((p=c.get(e[h]))==null||p!==d+u);)u++;if(u>d-r){const m=e[a];for(;r<d;)o.insertBefore(t[r++],m)}else o.replaceChild(t[r++],e[a++])}else a++;else e[a++].remove()}}}const Qg="_$DX_DELEGATE";function $a(o,e,t,s={}){let i;return qs(n=>{i=n,e===document?o():q(e,o(),e.firstChild?null:void 0,t)},s.owner),()=>{i(),e.textContent=""}}function He(o,e,t){let s;const i=()=>{const a=document.createElement("template");return a.innerHTML=o,t?a.content.firstChild.firstChild:a.content.firstChild},n=e?()=>Zt(()=>document.importNode(s||(s=i()),!0)):()=>(s||(s=i())).cloneNode(!0);return n.cloneNode=n,n}function Dr(o,e=window.document){const t=e[Qg]||(e[Qg]=new Set);for(let s=0,i=o.length;s<i;s++){const n=o[s];t.has(n)||(t.add(n),e.addEventListener(n,RI))}}function Mo(o,e,t){t==null?o.removeAttribute(e):o.setAttribute(e,t)}function xI(o,e,t,s){s==null?o.removeAttributeNS(e,t):o.setAttributeNS(e,t,s)}function st(o,e){e==null?o.removeAttribute("class"):o.className=e}function km(o,e,t,s){if(s)Array.isArray(t)?(o[`$$${e}`]=t[0],o[`$$${e}Data`]=t[1]):o[`$$${e}`]=t;else if(Array.isArray(t)){const i=t[0];o.addEventListener(e,t[0]=n=>i.call(o,t[1],n))}else o.addEventListener(e,t)}function vr(o,e,t={}){const s=Object.keys(e||{}),i=Object.keys(t);let n,a;for(n=0,a=i.length;n<a;n++){const r=i[n];!r||r==="undefined"||e[r]||(Yg(o,r,!1),delete t[r])}for(n=0,a=s.length;n<a;n++){const r=s[n],l=!!e[r];!r||r==="undefined"||t[r]===l||!l||(Yg(o,r,!0),t[r]=l)}return t}function qi(o,e,t){if(!e)return t?Mo(o,"style"):e;const s=o.style;if(typeof e=="string")return s.cssText=e;typeof t=="string"&&(s.cssText=t=void 0),t||(t={}),e||(e={});let i,n;for(n in t)e[n]==null&&s.removeProperty(n),delete t[n];for(n in e)i=e[n],i!==t[n]&&(s.setProperty(n,i),t[n]=i);return t}function $o(o,e={},t,s){const i={};return s||mt(()=>i.children=Po(o,e.children,i.children)),mt(()=>e.ref&&e.ref(o)),mt(()=>AI(o,e,t,!0,i,!0)),i}function Nt(o,e,t){return Zt(()=>o(e,t))}function q(o,e,t,s){if(t!==void 0&&!s&&(s=[]),typeof e!="function")return Po(o,e,s,t);mt(i=>Po(o,e(),i,t),s)}function AI(o,e,t,s,i={},n=!1){e||(e={});for(const a in i)if(!(a in e)){if(a==="children")continue;i[a]=Xg(o,a,null,i[a],t,n)}for(const a in e){if(a==="children"){s||Po(o,e.children);continue}const r=e[a];i[a]=Xg(o,a,r,i[a],t,n)}}function FI(o){return o.toLowerCase().replace(/-([a-z])/g,(e,t)=>t.toUpperCase())}function Yg(o,e,t){const s=e.trim().split(/\s+/);for(let i=0,n=s.length;i<n;i++)o.classList.toggle(s[i],t)}function Xg(o,e,t,s,i,n){let a,r,l,c,d;if(e==="style")return qi(o,t,s);if(e==="classList")return vr(o,t,s);if(t===s)return s;if(e==="ref")n||t(o);else if(e.slice(0,3)==="on:"){const h=e.slice(3);s&&o.removeEventListener(h,s),t&&o.addEventListener(h,t)}else if(e.slice(0,10)==="oncapture:"){const h=e.slice(10);s&&o.removeEventListener(h,s,!0),t&&o.addEventListener(h,t,!0)}else if(e.slice(0,2)==="on"){const h=e.slice(2).toLowerCase(),u=_I.has(h);if(!u&&s){const p=Array.isArray(s)?s[0]:s;o.removeEventListener(h,p)}(u||t)&&(km(o,h,t,u),u&&Dr([h]))}else if(e.slice(0,5)==="attr:")Mo(o,e.slice(5),t);else if((d=e.slice(0,5)==="prop:")||(l=LI.has(e))||!i&&((c=EI(e,o.tagName))||(r=II.has(e)))||(a=o.nodeName.includes("-")))d&&(e=e.slice(5),r=!0),e==="class"||e==="className"?st(o,t):a&&!r&&!l?o[FI(e)]=t:o[c||e]=t;else{const h=i&&e.indexOf(":")>-1&&kI[e.split(":")[0]];h?xI(o,h,e,t):Mo(o,MI[e]||e,t)}return t}function RI(o){const e=`$$${o.type}`;let t=o.composedPath&&o.composedPath()[0]||o.target;for(o.target!==t&&Object.defineProperty(o,"target",{configurable:!0,value:t}),Object.defineProperty(o,"currentTarget",{configurable:!0,get(){return t||document}});t;){const s=t[e];if(s&&!t.disabled){const i=t[`${e}Data`];if(i!==void 0?s.call(t,i,o):s.call(t,o),o.cancelBubble)return}t=t._$host||t.parentNode||t.host}}function Po(o,e,t,s,i){for(;typeof t=="function";)t=t();if(e===t)return t;const n=typeof e,a=s!==void 0;if(o=a&&t[0]&&t[0].parentNode||o,n==="string"||n==="number")if(n==="number"&&(e=e.toString()),a){let r=t[0];r&&r.nodeType===3?r.data=e:r=document.createTextNode(e),t=$r(o,t,s,r)}else t!==""&&typeof t=="string"?t=o.firstChild.data=e:t=o.textContent=e;else if(e==null||n==="boolean")t=$r(o,t,s);else{if(n==="function")return mt(()=>{let r=e();for(;typeof r=="function";)r=r();t=Po(o,r,t,s)}),()=>t;if(Array.isArray(e)){const r=[],l=t&&Array.isArray(t);if(pp(r,e,t,i))return mt(()=>t=Po(o,r,t,s,!0)),()=>t;if(r.length===0){if(t=$r(o,t,s),a)return t}else l?t.length===0?Zg(o,r,s):TI(o,t,r):(t&&$r(o),Zg(o,r));t=r}else if(e.nodeType){if(Array.isArray(t)){if(a)return t=$r(o,t,s,e);$r(o,t,null,e)}else t==null||t===""||!o.firstChild?o.appendChild(e):o.replaceChild(e,o.firstChild);t=e}}return t}function pp(o,e,t,s){let i=!1;for(let n=0,a=e.length;n<a;n++){let r=e[n],l=t&&t[n],c;if(!(r==null||r===!0||r===!1))if((c=typeof r)=="object"&&r.nodeType)o.push(r);else if(Array.isArray(r))i=pp(o,r,l)||i;else if(c==="function")if(s){for(;typeof r=="function";)r=r();i=pp(o,Array.isArray(r)?r:[r],Array.isArray(l)?l:[l])||i}else o.push(r),i=!0;else{const d=String(r);l&&l.nodeType===3&&l.data===d?o.push(l):o.push(document.createTextNode(d))}}return i}function Zg(o,e,t=null){for(let s=0,i=e.length;s<i;s++)o.insertBefore(e[s],t)}function $r(o,e,t,s){if(t===void 0)return o.textContent="";const i=s||document.createTextNode("");if(e.length){let n=!1;for(let a=e.length-1;a>=0;a--){const r=e[a];if(i!==r){const l=r.parentNode===o;!n&&!a?l?o.replaceChild(i,r):o.insertBefore(i,t):l&&r.remove()}else n=!0}}else o.insertBefore(i,t);return[i]}const DI="http://www.w3.org/2000/svg";function BI(o,e=!1){return e?document.createElementNS(DI,o):document.createElement(o)}function Sv(o){const{useShadow:e}=o,t=document.createTextNode(""),s=()=>o.mount||document.body,i=_h();let n,a=!!YS.context;return Ne(()=>{n||(n=Ul(i,()=>he(()=>o.children)));const r=s();if(r instanceof HTMLHeadElement){const[l,c]=we(!1),d=()=>c(!0);qs(h=>q(r,()=>l()?h():n(),null)),Et(d)}else{const l=BI(o.isSVG?"g":"div",o.isSVG),c=e&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return t.parentNode},configurable:!0}),q(c,n),r.appendChild(l),o.ref&&o.ref(l),Et(()=>r.removeChild(l))}},void 0,{render:!a}),t}const Kl=[["#CC5049"],["#D67722"],["#955CDB"],["#40A920"],["#309EBA"],["#368AD1"],["#C7508B"]],Su=["red","orange","violet","green","cyan","blue","pink"],NI=Kl;function Cv(o){return Math.abs(+o)%7}function mp(o){let e=Rh(o);if(e===-1)return;let t=Su[e];if(!t){const s=Kl[e];if(!s)return Su[Cv(o.id)];const n=um(s[0]).h;n>=345||n<29?e=0:n<67?e=1:n<140?e=3:n<199?e=4:n<234?e=5:n<301?e=2:e=6,t=Su[e]}return t}function Rh(o){return o?o.color?.color??Cv(o.id):-1}function Tm(o){const e=Rh(o);return Kl[e]??[]}function Jg(o,e,t){for(const s of e){const n=(t?s.dark_colors:s.colors)?.colors;if(!n?.length)continue;const a=n.map(r=>XS(r));o[s.color_id]=a}return o}function ef(o,e){const t=o.length;return e||(e=5),t!==3&&(o=o.slice().reverse()),`repeating-linear-gradient(-45deg, ${o.map((i,n,a)=>{const r=n*e+"px",l=(n+1)*e+"px";return[`${i} ${r}`,`${i} ${l}`].join(", ")}).join(", ")})`}function OI(o,e){let t=Jg(NI.slice(),o);bs.isNight()&&(t=Jg(t,o,!0)),Kl.splice(0,Kl.length,...t),t.forEach((n,a)=>{const r=`--peer-${a}`,l=`${r}-border-background`,c=`${r}-color-rgb`;if(document.documentElement.style.setProperty(c,tn(n[0]).join(",")),n.length>1){const d=ef(n);document.documentElement.style.setProperty(l,d)}else document.documentElement.style.removeProperty(l)});const s=Tm(e);[["--peer-border-background","--primary-color",s.length],["--message-out-peer-border-background","--message-out-primary-color",s.length],["--message-out-peer-1-border-background","--message-out-primary-color",1],["--message-out-peer-2-border-background","--message-out-primary-color",2],["--message-out-peer-3-border-background","--message-out-primary-color",3],["--message-empty-peer-1-border-background","--message-empty-primary-color",1],["--message-empty-peer-2-border-background","--message-empty-primary-color",2],["--message-empty-peer-3-border-background","--message-empty-primary-color",3]].forEach(([n,a,r])=>{let l;if(r>1){const c=[`rgba(var(${a}-rgb), .4)`,`rgba(var(${a}-rgb), .2)`,`var(${a})`];r===2&&c.shift(),l=ef(c)}else l=`var(${a})`;document.documentElement.style.setProperty(n,l)})}function UI(o){const e=o?.restriction_reason;return!!(e&&o.pFlags.restricted&&gv(e))}function HI(o){if(!(!o||UI(o)))return o?.photo}function VI(o){let e="";return o&&(e=o.title??[o.first_name,o.last_name].filter(Boolean).join(" ")),Ah(e)}function jt(...o){return o.filter(Boolean).join(" ")}function Ml(o){const e=new Array(o.childNodes.length);let t=o.firstChild,s=0;for(;t;)e[s++]=t.nodeType===t.TEXT_NODE?t.nodeValue:t,t=t.nextSibling;return e}class $I{constructor(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.dpr=window.devicePixelRatio}prepare(e){this.canvas.width=this.width=e.width*this.dpr,this.canvas.height=this.height=e.height*this.dpr,this.centerX=this.width/2,this.centerY=this.height/2,this.radius=e.radius*this.dpr,this.gapLength=e.gap*this.dpr,this.totalLength=Math.PI*this.radius*2,this.startAngle=-1.5}render(e){this.context.clearRect(0,0,this.width,this.height);const t=e.reduce((n,a)=>n+a.length,0),s=e.length;this.context.lineCap="round",e.length===1&&e[0].length===1?this.context.setLineDash([]):this.context.setLineDash([this.totalLength/t-this.gapLength,this.gapLength]);let i=0;for(let n=0;n<s;++n){const a=e[n],r=a.length/t,l=this.startAngle+i*2*Math.PI,c=l+r*2*Math.PI;this.context.beginPath(),this.context.arc(this.centerX,this.centerY,this.radius,l,c,!1),this.context.strokeStyle=a.color,this.context.lineWidth=a.lineWidth*this.dpr,this.context.stroke(),i+=r}}}function Iv({container:o,media:e,url:t,needFadeIn:s,aspecter:i=o,thumbImage:n,fadeInElement:a=e,onRender:r,onRenderFinish:l,useRenderCache:c}){return s&&a.classList.add("fade-in"),cn(e,t,c).then(()=>Vd.mutateElement(o,()=>{i?.append(e),s?(r?.(),a.addEventListener("animationend",()=>{Vd.mutate(()=>{a.classList.remove("fade-in"),n?.remove(),o.classList.add("no-background"),l?.()})},{once:!0})):(n?.remove(),o.classList.add("no-background"),r?.(),l?.())}))}const dd=Symbol("RAF"),Cu=Symbol("TIMEOUT"),vt=o=>{const{element:e,className:t,forwards:s,duration:i,onTransitionEnd:n,onTransitionStart:a,useRafs:r}=o,l=t&&t.split(" "),c=e[Cu],d=e[dd];if(c!==void 0&&clearTimeout(+c),d!==void 0&&(window.cancelAnimationFrame(+d),r||delete e[dd]),r&&et.isAvailable("animations")&&i){e[dd]=""+window.requestAnimationFrame(()=>{delete e[dd],vt({...o,useRafs:r-1})});return}s&&t&&e.classList.add(...l);const h=()=>{delete e[Cu],!s&&t&&e.classList.remove("backwards",...l),e.classList.remove("animating"),n?.()};if(a?.(),!et.isAvailable("animations")||!i){e.classList.remove("animating","backwards"),h();return}e.classList.add("animating"),e.classList.toggle("backwards",!s),e[Cu]=""+setTimeout(h,i)},Iu=200;class Qi{constructor(e){this.tempId=0,this.detached=!0,this.promise=null,this.isUpload=!1,this.cancelable=!0,this.streamable=!1,this.tryAgainOnFail=!0,this.attachMethod="append",this.onClick=t=>{t&&X(t),this.preloader.classList.contains("manual")?this.loadFunc?.(t):this.promise?.cancel?.()},e&&Lt(this,e),this.isUpload&&(this.tryAgainOnFail=!1)}constructContainer(e={}){this.preloader||(this.preloader=document.createElement("div"),this.preloader.classList.add("preloader-container"),e.color&&this.preloader.classList.add("preloader-"+e.color),e.bold&&this.preloader.classList.add("preloader-bold"),this.streamable&&this.preloader.classList.add("preloader-streamable"))}constructDownloadIcon(){this.constructContainer()}construct(){this.construct=null,this.constructContainer(),this.preloader.innerHTML=`