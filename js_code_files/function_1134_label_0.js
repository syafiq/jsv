mxEvent.getClientX(K),mxEvent.getClientY(K))},v=function(K){for(g.push(K);g.length>f;)g.shift()},E=function(K){var M=g.length;if(1===M%2||M>=f){var H=0,N=0,P,O=0;for(P=K;P<M;P++)O++,K=g[P],H+=K.x,N+=K.y;return{x:H/O,y:N/O}}return null}}}mxFreehand.prototype.NO_SMOOTHING=1;mxFreehand.prototype.MILD_SMOOTHING=4;mxFreehand.prototype.NORMAL_SMOOTHING=8;mxFreehand.prototype.VERY_SMOOTH_SMOOTHING=12;mxFreehand.prototype.SUPER_SMOOTH_SMOOTHING=16;mxFreehand.prototype.HYPER_SMOOTH_SMOOTHING=20;function P2PCollab(b,e,f){function c(O,V){try{if(!E){var p=e.file.getCurrentUser();if(v&&null!=p&&null!=p.displayName){var B={from:I,id:n,type:O,sessionId:e.clientId,userId:p.id,username:p.displayName,data:V,protocol:DrawioFileSync.PROTOCOL,editor:EditorUi.VERSION};B={bytes:e.objectToString(B),data:"aes"};B=JSON.stringify(B);K&&"cursor"!=O&&EditorUi.debug("P2PCollab: sending to socket server",[B]);n++;O=!K&&("cursor"==O||"selectionChange"==O);q&&!O&&P("message",B);if(O)for(p2pId in U)U[p2pId].send(B)}}}catch(L){null!=