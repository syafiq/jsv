function(e,g,k,n){e=null!=e?e:!0;g=null!=g?g:!1;k=null!=k?k:!Editor.compressXml;var u=this.editor.getGraphXml(e,n);if(e&&null!=this.fileNode&&null!=this.currentPage)if(e=function(H){var F=H.getElementsByTagName("mxGraphModel");F=0<F.length?F[0]:null;null==F&&k?(F=mxUtils.trim(mxUtils.getTextContent(H)),H=H.cloneNode(!1),0<F.length&&(F=Graph.decompress(F),null!=F&&0<F.length&&H.appendChild(mxUtils.parseXml(F).documentElement))):null==F||k?H=H.cloneNode(!0):(H=H.cloneNode(!1),mxUtils.setTextContent(H,
Graph.compressNode(F)));u.appendChild(H)},EditorUi.removeChildNodes(this.currentPage.node),mxUtils.setTextContent(this.currentPage.node,Graph.compressNode(u)),u=this.fileNode.cloneNode(!1),g)e(this.currentPage.node);else for(g=0;g<this.pages.length;g++){var v=this.pages[g],E=v.node;if(v!=this.currentPage)if(v.needsUpdate){var C=new mxCodec(mxUtils.createXmlDocument());C=C.encode(new mxGraphModel(v.root));this.editor.graph.saveViewState(v.viewState,C,null,n);EditorUi.removeChildNodes(E);mxUtils.setTextContent(E,