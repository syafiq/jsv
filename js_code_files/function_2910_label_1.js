EditorUi.prototype.createPageMenuTab=function(b,e){b=this.createControlTab(3,'<div class="geSprite geSprite-dots"></div>',b);b.setAttribute("title",mxResources.get("pages"));b.style.position="absolute";b.style.marginLeft="0px";b.style.top="0px";b.style.left="1px";var k=b.getElementsByTagName("div")[0];k.style.display="inline-block";k.style.marginTop="5px";k.style.width="21px";k.style.height="21px";mxEvent.addListener(b,"click",mxUtils.bind(this,function(l){this.editor.graph.popupMenuHandler.hideMenu();
var C=new mxPopupMenu(mxUtils.bind(this,function(M,R){var G=mxUtils.bind(this,function(){for(var f=0;f<this.pages.length;f++)mxUtils.bind(this,function(g){var v=M.addItem(this.getShortPageName(this.pages[g]),null,mxUtils.bind(this,function(){this.selectPage(this.pages[g])}),R),x=this.pages[g].getId();v.setAttribute("title",this.pages[g].getName()+" ("+(g+1)+"/"+this.pages.length+")"+(null!=x?" ["+x+"]":""));this.pages[g]==this.currentPage&&M.addCheckmark(v,Editor.checkmarkImage)})(f)}),L=mxUtils.bind(this,
function(){M.addItem(mxResources.get("insertPage"),null,mxUtils.bind(this,function(){this.insertPage()}),R)});e||G();if(this.editor.graph.isEnabled()){e||(M.addSeparator(R),L());var Q=this.currentPage;if(null!=Q){M.addSeparator(R);if("sketch"==Editor.currentTheme||"simple"==Editor.currentTheme)null!=this.getLinkForPage(Q)&&(M.addItem(mxResources.get("link")+"...",null,mxUtils.bind(this,function(){this.showPageLinkDialog(Q)})),M.addSeparator(R)),1<this.pages.length&&(this.menus.addSubmenu("movePage",
M,R,mxResources.get("move")),M.addSeparator(R));var d=this.getShortPageName(Q);M.addItem(mxResources.get("removeIt",[d]),null,mxUtils.bind(this,function(){this.removePage(Q)}),R);M.addItem(mxResources.get("renameIt",[d])+"...",null,mxUtils.bind(this,function(){this.renamePage(Q,Q.getName())}),R);e||M.addSeparator(R);M.addItem(mxResources.get("duplicateIt",[d]),null,mxUtils.bind(this,function(){this.duplicatePage(Q,mxResources.get("copyOf",[Q.getName()]))}),R)}}e&&(M.addSeparator(R),L(),M.addSeparator(R),
G())}));C.div.className+=" geMenubarMenu";C.smartSeparators=!0;C.showDisabled=!0;C.autoExpand=!0;C.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(C,arguments);C.destroy()});var p=mxEvent.getClientX(l),D=mxEvent.getClientY(l);C.popup(p,D,null,l);this.setCurrentMenu(C);mxEvent.consume(l)}));return b};