this.ui.handleError(A)}}))}catch(m){this.ui.handleError(m)}});c?l():this.ui.confirm(mxResources.get("useRootFolder"),mxUtils.bind(this,function(){this.folderPickerCallback({action:google.picker.Action.PICKED,docs:[{type:"folder",id:"root"}]})}),mxUtils.bind(this,function(){l()}),mxResources.get("yes"),mxResources.get("noPickFolder")+"...",!0)};DriveClient.prototype.pickLibrary=function(f){this.filePickerCallback=f;this.filePicked=mxUtils.bind(this,function(c){c.action==google.picker.Action.PICKED?
this.filePickerCallback(c.docs[0].id):c.action==google.picker.Action.CANCEL&&null==this.ui.getCurrentFile()&&this.ui.showSplash()});this.ui.spinner.spin(document.body,mxResources.get("authorizing"))&&this.execute(mxUtils.bind(this,function(){try{this.ui.spinner.stop();var c=mxUtils.bind(this,function(z){"picker modal-dialog-bg picker-dialog-bg"==mxEvent.getSource(z).className&&(mxEvent.removeListener(document,"click",c),d.libraryPicker.setVisible(!1))});if(null==d.libraryPicker||d.libraryPickerToken!=
b){d.libraryPickerToken=b;var l=(new google.picker.DocsView(google.picker.ViewId.FOLDERS)).setParent("root").setIncludeFolders(!0).setMimeTypes(this.libraryMimeType+",application/xml,text/plain,application/octet-stream"),m=(new google.picker.DocsView).setIncludeFolders(!0).setMimeTypes(this.libraryMimeType+",application/xml,text/plain,application/octet-stream"),t=(new google.picker.DocsView).setEnableDrives(!0).setIncludeFolders(!0).setMimeTypes(this.libraryMimeType+",application/xml,text/plain,application/octet-stream"),
y=(new google.picker.DocsUploadView).setIncludeFolders(!0);d.libraryPicker=(new google.picker.PickerBuilder).setOAuthToken(d.libraryPickerToken).setLocale(mxLanguage).setAppId(this.appId).enableFeature(google.picker.Feature.SUPPORT_DRIVES).addView(l).addView(m).addView(t).addView(google.picker.ViewId.RECENTLY_PICKED).addView(y);if(urlParams.gPickerSize){var B=urlParams.gPickerSize.split(",");d.libraryPicker=d.libraryPicker.setSize(B[0],B[1])}urlParams.topBaseUrl&&(d.libraryPicker=d.libraryPicker.setOrigin(decodeURIComponent(urlParams.topBaseUrl)));
d.libraryPicker=d.libraryPicker.setCallback(mxUtils.bind(this,function(z){z.action!=google.picker.Action.PICKED&&z.action!=google.picker.Action.CANCEL||mxEvent.removeListener(document,"click",c);z.action==google.picker.Action.PICKED&&this.filePicked(z)})).build()}mxEvent.addListener(document,"click",c);d.libraryPicker.setVisible(!0)}catch(z){this.ui.spinner.stop(),this.ui.handleError(z)}}))};DriveClient.prototype.showPermissions=function(f){var c=mxUtils.bind(this,function(){var l=new ConfirmDialog(this.ui,