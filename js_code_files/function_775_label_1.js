desc:b.getResource(I.desc),image:I.preview})}t.push(G)}for(v=0;v<k.length;v++)if(null==b.sidebar.enabledLibraries)t.push(k[v]);else{G={title:k[v].title,entries:[]};for(H=0;H<k[v].entries.length;H++)0<=mxUtils.indexOf(b.sidebar.enabledLibraries,k[v].entries[H].id)&&G.entries.push(k[v].entries[H]);0<G.entries.length&&t.push(G)}k=t;if(g){v=mxUtils.bind(this,function(S){for(var l=0;l<S.length;l++)(function(u){var C=f.cloneNode(!1);C.style.fontWeight="bold";C.style.backgroundColor=Editor.isDarkMode()?
"#505759":"#e5e5e5";C.style.padding="6px 0px 6px 20px";mxUtils.write(C,u.title);D.appendChild(C);for(var J=0;J<u.entries.length;J++)(function(M){var F=f.cloneNode(!1);F.style.cursor="pointer";F.style.padding="4px 0px 4px 20px";F.style.whiteSpace="nowrap";F.style.overflow="hidden";F.style.textOverflow="ellipsis";F.setAttribute("title",M.title+" ("+M.id+")");var L=document.createElement("input");L.setAttribute("type","checkbox");L.checked=b.sidebar.isEntryVisible(M.id);L.defaultChecked=L.checked;F.appendChild(L);
mxUtils.write(F," "+M.title);D.appendChild(F);var P=function(U){if(null==U||"INPUT"!=mxEvent.getSource(U).nodeName){N.style.textAlign="center";N.style.padding="0px";N.style.color="";N.innerText="";if(null!=M.desc){var V=document.createElement("pre");V.style.boxSizing="border-box";V.style.fontFamily="inherit";V.style.margin="20px";V.style.right="0px";V.style.textAlign="left";mxUtils.write(V,M.desc);N.appendChild(V)}null!=M.imageCallback?M.imageCallback(N):null!=M.image?N.innerHTML+='<img border="0" style="max-width:100%;" src="'+
M.image+'"/>':null==M.desc&&(N.style.padding="20px",N.style.color="rgb(179, 179, 179)",mxUtils.write(N,mxResources.get("noPreview")));null!=c&&(c.style.backgroundColor="");c=F;c.style.backgroundColor=Editor.isDarkMode()?"#000000":"#ebf2f9";null!=U&&mxEvent.consume(U)}};mxEvent.addListener(F,"click",P);mxEvent.addListener(F,"dblclick",function(U){L.checked=!L.checked;mxEvent.consume(U)});e.push(function(){return L.checked?M.id:null});0==l&&0==J&&P()})(u.entries[J])})(S[l])});H=document.createElement("div");
H.className="geDialogTitle";mxUtils.write(H,mxResources.get("shapes"));H.style.position="absolute";H.style.top="0px";H.style.left="0px";H.style.lineHeight="40px";H.style.height="40px";H.style.right="0px";var D=document.createElement("div"),N=document.createElement("div");D.style.position="absolute";D.style.top="40px";D.style.left="0px";D.style.width="202px";D.style.bottom="60px";D.style.overflow="auto";N.style.position="absolute";N.style.left="202px";N.style.right="0px";N.style.top="40px";N.style.bottom=
"60px";N.style.overflow="auto";N.style.borderLeft="1px solid rgb(211, 211, 211)";N.style.textAlign="center";var c=null,e=[],f=document.createElement("div");f.style.position="relative";f.style.left="0px";f.style.right="0px";v(k);d.style.padding="30px";d.appendChild(H);d.appendChild(D);d.appendChild(N);k=document.createElement("div");k.className="geDialogFooter";k.style.position="absolute";k.style.paddingRight="16px";k.style.color="gray";k.style.left="0px";k.style.right="0px";k.style.bottom="0px";k.style.height=
"60px";k.style.lineHeight="52px";var n=document.createElement("input");n.setAttribute("type","checkbox");n.style.position="relative";n.style.top="1px";n.checked=b.sidebar.sidebarTitles;n.defaultChecked=n.checked;k.appendChild(n);v=document.createElement("span");mxUtils.write(v," "+mxResources.get("labels"));v.style.paddingRight="20px";k.appendChild(v);mxEvent.addListener(v,"click",function(S){n.checked=!n.checked;mxEvent.consume(S)});var p=document.createElement("input");p.setAttribute("type","checkbox");
if(isLocalStorage||mxClient.IS_CHROMEAPP)v=document.createElement("span"),v.style.paddingRight="20px",v.appendChild(p),mxUtils.write(v," "+mxResources.get("rememberThisSetting")),p.style.position="relative",p.style.top="1px",p.checked=!0,p.defaultChecked=!0,mxEvent.addListener(v,"click",function(S){mxEvent.getSource(S)!=p&&(p.checked=!p.checked,mxEvent.consume(S))}),k.appendChild(v);v=mxUtils.button(mxResources.get("cancel"),function(){b.hideDialog()});v.className="geBtn";H=mxUtils.button(mxResources.get("apply"),
function(){b.hideDialog();for(var S=[],l=0;l<e.length;l++){var u=e[l].apply(this,arguments);null!=u&&S.push(u)}"1"==urlParams.sketch&&b.isSettingsEnabled()&&(l=mxUtils.indexOf(S,".scratchpad"),null!=b.scratchpad!=(0<=l&&0<S.splice(l,1).length)&&b.toggleScratchpad(),l=mxUtils.indexOf(S,"search"),mxSettings.settings.search=0<=l&&0<S.splice(l,1).length,b.sidebar.showPalette("search",mxSettings.settings.search),p.checked&&mxSettings.save());b.sidebar.showEntries(S.join(";"),p.checked,!0);b.setSidebarTitles(n.checked,
p.checked)});H.className="geBtn gePrimaryBtn"}else{var q=document.createElement("table");v=document.createElement("tbody");d.style.height="100%";d.style.overflow="auto";H=document.createElement("tr");q.style.width="100%";g=document.createElement("td");t=document.createElement("td");B=document.createElement("td");var y=mxUtils.bind(this,function(S,l,u){var C=document.createElement("input");C.type="checkbox";q.appendChild(C);C.checked=b.sidebar.isEntryVisible(u);var J=document.createElement("span");
mxUtils.write(J,l);l=document.createElement("div");l.style.display="block";l.appendChild(C);l.appendChild(J);mxEvent.addListener(J,"click",function(M){C.checked=!C.checked;mxEvent.consume(M)});S.appendChild(l);return function(){return C.checked?u:null}});H.appendChild(g);H.appendChild(t);H.appendChild(B);v.appendChild(H);q.appendChild(v);e=[];var x=0;for(v=0;v<k.length;v++)for(H=0;H<k[v].entries.length;H++)x++;var E=[g,t,B],A=0;for(v=0;v<k.length;v++)(function(S){for(var l=0;l<S.entries.length;l++){var u=
S.entries[l];e.push(y(E[Math.floor(A/(x/3))],u.title,u.id));A++}})(k[v]);d.appendChild(q);k=document.createElement("div");k.style.marginTop="18px";k.style.textAlign="center";p=document.createElement("input");isLocalStorage&&(p.setAttribute("type","checkbox"),p.checked=!0,p.defaultChecked=!0,k.appendChild(p),v=document.createElement("span"),mxUtils.write(v," "+mxResources.get("rememberThisSetting")),k.appendChild(v),mxEvent.addListener(v,"click",function(S){p.checked=!p.checked;mxEvent.consume(S)}));
d.appendChild(k);v=mxUtils.button(mxResources.get("cancel"),function(){b.hideDialog()});v.className="geBtn";H=mxUtils.button(mxResources.get("apply"),function(){for(var S=["search"],l=0;l<e.length;l++){var u=e[l].apply(this,arguments);null!=u&&S.push(u)}b.sidebar.showEntries(0<S.length?S.join(";"):"",p.checked);b.hideDialog()});H.className="geBtn gePrimaryBtn";k=document.createElement("div");k.style.marginTop="26px";k.style.textAlign="right"}b.editor.cancelFirst?(k.appendChild(v),k.appendChild(H)):
(k.appendChild(H),k.appendChild(v));d.appendChild(k);this.container=d},PluginsDialog=function(b,g,k,d){function t(){H=!0;if(0==G.length)B.innerText=mxResources.get("noPlugins");else{B.innerText="";for(var f=0;f<G.length;f++){var n=document.createElement("span");n.style.whiteSpace="nowrap";var p=document.createElement("span");p.className="geSprite geSprite-delete";p.style.position="relative";p.style.cursor="pointer";p.style.top="5px";p.style.marginRight="4px";p.style.display="inline-block";n.appendChild(p);