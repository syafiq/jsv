var E=mxText.prototype.redraw;mxText.prototype.redraw=function(){E.apply(this,arguments);null!=this.node&&"DIV"==this.node.nodeName&&Graph.processFontAttributes(this.node)};Graph.prototype.createTagsDialog=function(q,D,L){function U(){for(var ea=R.getSelectionCells(),ka=[],sa=0;sa<ea.length;sa++)R.isCellVisible(ea[sa])&&ka.push(ea[sa]);R.setSelectionCells(ka)}function O(ea){R.setHiddenTags(ea?[]:X.slice());U();R.refresh()}function S(ea,ka){ba.innerText="";if(0<ea.length){var sa=document.createElement("table");
sa.setAttribute("cellpadding","2");sa.style.boxSizing="border-box";sa.style.tableLayout="fixed";sa.style.width="100%";var xa=document.createElement("tbody");if(null!=ea&&0<ea.length)for(var ta=0;ta<ea.length;ta++)(function(ha){var Oa=0>mxUtils.indexOf(R.hiddenTags,ha),Ia=document.createElement("tr"),Ca=document.createElement("td");Ca.style.align="center";Ca.style.width="16px";var Fa=document.createElement("img");Fa.setAttribute("src",Oa?Editor.visibleImage:Editor.hiddenImage);Fa.setAttribute("title",
mxResources.get(Oa?"hideIt":"show",[ha]));mxUtils.setOpacity(Fa,Oa?75:25);Fa.style.verticalAlign="middle";Fa.style.cursor="pointer";Fa.style.width="16px";if(D||Editor.isDarkMode())Fa.style.filter="invert(100%)";Ca.appendChild(Fa);mxEvent.addListener(Fa,"click",function(Ja){mxEvent.isShiftDown(Ja)?O(0<=mxUtils.indexOf(R.hiddenTags,ha)):(R.toggleHiddenTag(ha),U(),R.refresh());mxEvent.consume(Ja)});Ia.appendChild(Ca);Ca=document.createElement("td");Ca.style.overflow="hidden";Ca.style.whiteSpace="nowrap";
Ca.style.textOverflow="ellipsis";Ca.style.verticalAlign="middle";Ca.style.cursor="pointer";Ca.setAttribute("title",ha);a=document.createElement("a");mxUtils.write(a,ha);a.style.textOverflow="ellipsis";a.style.position="relative";mxUtils.setOpacity(a,Oa?100:40);Ca.appendChild(a);mxEvent.addListener(Ca,"click",function(Ja){if(mxEvent.isShiftDown(Ja)){O(!0);var oa=R.getCellsForTags([ha],null,null,!0);R.isEnabled()?R.setSelectionCells(oa):R.highlightCells(oa)}else if(Oa&&0<R.hiddenTags.length)O(!0);else{oa=
X.slice();var Ba=mxUtils.indexOf(oa,ha);oa.splice(Ba,1);R.setHiddenTags(oa);U();R.refresh()}mxEvent.consume(Ja)});Ia.appendChild(Ca);if(R.isEnabled()){Ca=document.createElement("td");Ca.style.verticalAlign="middle";Ca.style.textAlign="center";Ca.style.width="18px";if(null==ka){Ca.style.align="center";Ca.style.width="16px";Fa=document.createElement("img");Fa.setAttribute("src",Editor.crossImage);Fa.setAttribute("title",mxResources.get("removeIt",[ha]));mxUtils.setOpacity(Fa,Oa?75:25);Fa.style.verticalAlign=
"middle";Fa.style.cursor="pointer";Fa.style.width="16px";if(D||Editor.isDarkMode())Fa.style.filter="invert(100%)";mxEvent.addListener(Fa,"click",function(Ja){var oa=mxUtils.indexOf(X,ha);0<=oa&&X.splice(oa,1);R.removeTagsForCells(R.model.getDescendants(R.model.getRoot()),[ha]);R.refresh();mxEvent.consume(Ja)});Ca.appendChild(Fa)}else{var la=document.createElement("input");la.setAttribute("type","checkbox");la.style.margin="0px";la.defaultChecked=null!=ka&&0<=mxUtils.indexOf(ka,ha);la.checked=la.defaultChecked;
la.style.background="transparent";la.setAttribute("title",mxResources.get(la.defaultChecked?"removeIt":"add",[ha]));mxEvent.addListener(la,"change",function(Ja){la.checked?R.addTagsForCells(R.getSelectionCells(),[ha]):R.removeTagsForCells(R.getSelectionCells(),[ha]);mxEvent.consume(Ja)});Ca.appendChild(la)}Ia.appendChild(Ca)}xa.appendChild(Ia)})(ea[ta]);sa.appendChild(xa);ba.appendChild(sa)}}var R=this,X=R.hiddenTags.slice(),Z=document.createElement("div");Z.style.userSelect="none";Z.style.overflow=