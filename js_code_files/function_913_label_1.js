this.linkTarget);mxUtils.write(E,A(z,40));this.isCustomLink(t)&&mxEvent.addListener(E,"click",mxUtils.bind(this,function(G){this.customLinkClicked(t);mxEvent.consume(G)}));return E};Graph.prototype.initTouch=function(){this.connectionHandler.marker.isEnabled=function(){return null!=this.graph.connectionHandler.first};this.addListener(mxEvent.START_EDITING,function(L,Y){this.popupMenuHandler.hideMenu()});var t=this.updateMouseEvent;this.updateMouseEvent=function(L){L=t.apply(this,arguments);if(mxEvent.isTouchEvent(L.getEvent())&&
null==L.getState()){var Y=this.getCellAt(L.graphX,L.graphY);null!=Y&&this.isSwimlane(Y)&&this.hitsSwimlaneContent(Y,L.graphX,L.graphY)||(L.state=this.view.getState(Y),null!=L.state&&null!=L.state.shape&&(this.container.style.cursor=L.state.shape.node.style.cursor))}null==L.getState()&&this.isEnabled()&&(this.container.style.cursor="default");return L};var z=!1,A=!1,E=!1,G=this.fireMouseEvent;this.fireMouseEvent=function(L,Y,ha){L==mxEvent.MOUSE_DOWN&&(Y=this.updateMouseEvent(Y),z=this.isCellSelected(Y.getCell()),
A=this.isSelectionEmpty(),E=this.popupMenuHandler.isMenuShowing());G.apply(this,arguments)};this.popupMenuHandler.mouseUp=mxUtils.bind(this,function(L,Y){var ha=mxEvent.isMouseEvent(Y.getEvent());this.popupMenuHandler.popupTrigger=!this.isEditing()&&this.isEnabled()&&(null==Y.getState()||!Y.isSource(Y.getState().control))&&(this.popupMenuHandler.popupTrigger||!E&&!ha&&(A&&null==Y.getCell()&&this.isSelectionEmpty()||z&&this.isCellSelected(Y.getCell())));ha=!z||ha?null:mxUtils.bind(this,function(ea){window.setTimeout(mxUtils.bind(this,
function(){if(!this.isEditing()){var ka=mxUtils.getScrollOrigin();this.popupMenuHandler.popup(Y.getX()+ka.x+1,Y.getY()+ka.y+1,ea,Y.getEvent())}}),500)});mxPopupMenuHandler.prototype.mouseUp.apply(this.popupMenuHandler,[L,Y,ha])})};mxCellEditor.prototype.isContentEditing=function(){var t=this.graph.view.getState(this.editingCell);return null!=t&&1==t.style.html};mxCellEditor.prototype.isTableSelected=function(){return null!=this.graph.getParentByName(this.graph.getSelectedElement(),"TABLE",this.textarea)};