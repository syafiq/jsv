(f.appendChild(C),f.appendChild(m));c.appendChild(f);this.container=c},PluginsDialog=function(b,e,f,c){function l(){C=!0;if(0==y.length)t.innerText=mxResources.get("noPlugins");else{t.innerText="";for(var k=0;k<y.length;k++){var n=document.createElement("span");n.style.whiteSpace="nowrap";var x=document.createElement("span");x.className="geSprite geSprite-delete";x.style.position="relative";x.style.cursor="pointer";x.style.top="5px";x.style.marginRight="4px";x.style.display="inline-block";n.appendChild(x);
mxUtils.write(n,y[k]);t.appendChild(n);mxUtils.br(t);mxEvent.addListener(x,"click",function(u){return function(){b.confirm(mxResources.get("delete")+' "'+y[u]+'"?',function(){null!=f&&f(y[u]);y.splice(u,1);l()})}}(k))}}}var m=document.createElement("div"),t=document.createElement("div");t.style.height="180px";t.style.overflow="auto";var y=mxSettings.getPlugins().slice(),C=!1;m.appendChild(t);l();C=!1;var z=mxUtils.button(mxResources.get("add"),null!=e?function(){e(function(k){k&&0>mxUtils.indexOf(y,
k)&&y.push(k);l()})}:function(){var k=document.createElement("div"),n=document.createElement("span");n.style.marginTop="6px";mxUtils.write(n,mxResources.get("builtinPlugins")+": ");k.appendChild(n);var x=document.createElement("select");x.style.width="150px";for(n=0;n<App.publicPlugin.length;n++){var u=document.createElement("option");mxUtils.write(u,App.publicPlugin[n]);u.value=App.publicPlugin[n];x.appendChild(u)}k.appendChild(x);mxUtils.br(k);mxUtils.br(k);n=mxUtils.button(mxResources.get("custom")+
"...",function(){var D=new FilenameDialog(b,"",mxResources.get("add"),function(F){b.hideDialog();if(null!=F&&0<F.length){F=F.split(";");for(var I=0;I<F.length;I++){var G=F[I],U=App.pluginRegistry[G];null!=U&&(G=U);0<G.length&&0>mxUtils.indexOf(y,G)&&y.push(G)}l()}},mxResources.get("enterValue")+" ("+mxResources.get("url")+")");b.showDialog(D.container,300,80,!0,!0);D.init()});n.className="geBtn";k=new CustomDialog(b,k,mxUtils.bind(this,function(){var D=App.pluginRegistry[x.value];0>mxUtils.indexOf(y,
D)&&(y.push(D),l())}),null,null,null,n);b.showDialog(k.container,360,100,!0,!0)});z.className="geBtn";var A=mxUtils.button(mxResources.get("cancel"),function(){b.hideDialog()});A.className="geBtn";var J=mxUtils.button(c?mxResources.get("close"):mxResources.get("apply"),function(){C?(mxSettings.setPlugins(y),mxSettings.save(),b.hideDialog(),b.alert(mxResources.get("restartForChangeRequired"))):b.hideDialog()});J.className="geBtn gePrimaryBtn";var d=document.createElement("div");d.style.marginTop="14px";
d.style.textAlign="right";var g=mxUtils.button(mxResources.get("help"),function(){b.openLink("https://www.diagrams.net/doc/faq/plugins")});g.className="geBtn";b.isOffline()&&!mxClient.IS_CHROMEAPP&&(g.style.display="none");d.appendChild(g);b.editor.cancelFirst?(c||d.appendChild(A),d.appendChild(z),d.appendChild(J)):(d.appendChild(z),d.appendChild(J),c||d.appendChild(A));m.appendChild(d);this.container=m},CropImageDialog=function(b,e,f,c){function l(){var U=x.checked,q=u.checked,v=g.geometry,E=C.width,