W);var Y=N.getContext("2d");null!=Ka&&(Y.beginPath(),Y.rect(0,0,P,W),Y.fillStyle=Ka,Y.fill());1!=pa&&Y.scale(pa,pa);if(wa){var ha=Aa.view,ma=ha.scale;ha.scale=1;var xa=btoa(unescape(encodeURIComponent(ha.createSvgGrid(ha.gridColor))));ha.scale=ma;xa="data:image/svg+xml;base64,"+xa;var ta=Aa.gridSize*ha.gridSteps*pa,za=Aa.getGraphBounds(),Ga=ha.translate.x*ma,Oa=ha.translate.y*ma,Na=Ga+(za.x-Ga)/ma-na,Sa=Oa+(za.y-Oa)/ma-na,Qa=new Image;Qa.onload=function(){try{for(var Ea=-Math.round(ta-mxUtils.mod((Ga-
Na)*pa,ta)),Ja=-Math.round(ta-mxUtils.mod((Oa-Sa)*pa,ta));Ea<P;Ea+=ta)for(var Pa=Ja;Pa<W;Pa+=ta)Y.drawImage(Qa,Ea/pa,Pa/pa);y()}catch($a){null!=U&&U($a)}};Qa.onerror=function(Ea){null!=U&&U(Ea)};Qa.src=xa}else y()}catch(Ea){null!=U&&U(Ea)}});ab.onerror=function(y){null!=U&&U(y)};ua&&this.graph.addSvgShadow(Ba);this.graph.mathEnabled&&this.addMathCss(Ba);var Ya=mxUtils.bind(this,function(){try{null!=this.resolvedFontCss&&this.addFontCss(Ba,this.resolvedFontCss),ab.src=Editor.createSvgDataUri(mxUtils.getXml(Ba))}catch(y){null!=