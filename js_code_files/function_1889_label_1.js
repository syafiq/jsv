App.prototype.showNotification=function(b,d){function f(z){var A=document.querySelector(".geNotification-count");null!=A&&(A.innerHTML=z,A.style.display=0==z?"none":"",A=document.querySelector(".geNotification-bell"),A.style.animation=0==z?"none":"",A.className="geNotification-bell"+(0==z?" geNotification-bellOff":""),document.querySelector(".geBell-rad").style.animation=0==z?"none":"")}var c=b.length;if("min"==uiTheme)for(var l=c=0;l<b.length;l++)b[l].isNew&&c++;if(0==c)null!=this.notificationBtn&&
(this.notificationBtn.style.display="none",this.editor.fireEvent(new mxEventObject("statusChanged")));else{var m=mxUtils.bind(this,function(){this.notificationWin.style.display="none";for(var z=this.notificationWin.querySelectorAll(".circle.active"),A=0;A<z.length;A++)z[A].className="circle";isLocalStorage&&b[0]&&localStorage.setItem(d,b[0].timestamp)});if(null==this.notificationBtn){this.notificationBtn=document.createElement("div");this.notificationBtn.className="geNotification-box";c=document.createElement("span");
c.className="geNotification-count";this.notificationBtn.appendChild(c);if("simple"==Editor.currentTheme||"sketch"==Editor.currentTheme||"min"==Editor.currentTheme){if("min"!=Editor.currentTheme||"sketch"==Editor.currentTheme)this.notificationBtn.style.width="30px",c.style.marginRight="-10px";this.notificationBtn.style.top="simple"==Editor.currentTheme||"sketch"==Editor.currentTheme?"7px":"4px"}else"1"==urlParams.atlas&&(this.notificationBtn.style.top="2px");c=document.createElement("div");c.className=
"geNotification-bell";c.style.opacity="min"==uiTheme?"0.5":"";l=document.createElement("span");l.className="geBell-top";c.appendChild(l);l=document.createElement("span");l.className="geBell-middle";c.appendChild(l);l=document.createElement("span");l.className="geBell-bottom";c.appendChild(l);l=document.createElement("span");l.className="geBell-rad";c.appendChild(l);this.notificationBtn.appendChild(c);this.buttonContainer.insertBefore(this.notificationBtn,this.buttonContainer.firstChild);this.notificationWin=
document.createElement("div");this.notificationWin.className="geNotifPanel";this.notificationWin.style.display="none";document.body.appendChild(this.notificationWin);l=document.createElement("div");l.className="header";c=document.createElement("span");c.className="title";c.textContent=mxResources.get("notifications");l.appendChild(c);c=document.createElement("span");c.className="closeBtn";c.textContent="x";l.appendChild(c);this.notificationWin.appendChild(l);l=document.createElement("div");l.className=
"notifications clearfix";var t=document.createElement("div");t.setAttribute("id","geNotifList");t.style.position="relative";l.appendChild(t);this.notificationWin.appendChild(l);mxEvent.addListener(this.notificationBtn,"click",mxUtils.bind(this,function(){if("none"==this.notificationWin.style.display){this.notificationWin.style.display="";document.querySelector(".notifications").scrollTop=0;var z=this.notificationBtn.getBoundingClientRect();this.notificationWin.style.top=z.top+this.notificationBtn.clientHeight+
"px";this.notificationWin.style.left=z.right-this.notificationWin.clientWidth+"px";f(0)}else m()}));mxEvent.addListener(c,"click",m)}else this.notificationBtn.style.display="";var y=0,B=document.getElementById("geNotifList");if(null!=B){B.innerHTML='<div class="line"></div>';for(l=0;l<b.length;l++)(function(z,A){A.isNew&&y++;var J=document.createElement("div");J.className="notification";z=z.timeSince(new Date(A.timestamp));null==z&&(z=mxResources.get("lessThanAMinute"));J.innerHTML='<div class="circle'+
(A.isNew?" active":"")+'"></div><span class="time">'+mxUtils.htmlEntities(mxResources.get("timeAgo",[z],"{1} ago"))+"</span><p>"+mxUtils.htmlEntities(A.content)+"</p>";A.link&&mxEvent.addListener(J,"click",function(){window.open(A.link,"notifWin")});B.appendChild(J)})(this,b[l]);f(y)}}};