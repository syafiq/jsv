x.pasteCounter=0);var H=x.pasteCounter*x.gridSize;if(g||this.isCompatibleString(d))A=this.importXml(d,H,H),x.setSelectionCells(A);else if(f&&1==x.getSelectionCount()){H=x.getStartEditingCell(x.getSelectionCell(),u);if(/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(d)&&"image"==x.getCurrentCellStyle(H)[mxConstants.STYLE_SHAPE])x.setCellStyles(mxConstants.STYLE_IMAGE,d,[H]);else{x.model.beginUpdate();try{x.labelChanged(H,d),Graph.isLink(d)&&x.setLinkForCell(H,d)}finally{x.model.endUpdate()}}x.setSelectionCell(H)}else A=
x.getInsertPoint(),x.isMouseInsertPoint()&&(H=0,x.lastPasteXml==d&&0<x.pasteCounter&&x.pasteCounter--),A=this.insertTextAt(d,A.x+H,A.y+H,!0),x.setSelectionCells(A);x.isSelectionEmpty()||(x.scrollCellToVisible(x.getSelectionCell()),null!=this.hoverIcons&&this.hoverIcons.update(x.view.getState(x.getSelectionCell())));return A};EditorUi.prototype.pasteCells=function(d,f,g,u){if(!mxEvent.isConsumed(d)){var x=f,A=!1;if(g&&null!=d.clipboardData&&d.clipboardData.getData){var H=d.clipboardData.getData("text/plain"),