DrawioFileSync.prototype.start=function(){null==this.channelId&&(this.channelId=this.file.getChannelId());null==this.key&&(this.key=this.file.getChannelKey());var b=!1;if(DrawioFileSync.PULLING_MODE&&null==this.puller&&"hidden"!=document.visibilityState)null==this.puller&&(this.puller=new DrawioFilePuller(this.file,this)),this.puller.start(this.file.getPullingInterval()),EditorUi.debug("DrawioFileSync.start (Pulling)",[this,"v"+DrawioFileSync.PROTOCOL],"rev",this.file.getCurrentRevisionId()),b=!0;
else if(!DrawioFileSync.PULLING_MODE&&null==this.pusher&&null!=this.channelId&&"hidden"!=document.visibilityState){this.pusher=this.ui.getPusher();if(null!=this.pusher){try{null!=this.pusher.connection&&this.pusher.connection.bind("error",this.pusherErrorListener)}catch(d){}try{this.pusher.connect(),this.channel=this.pusher.subscribe(this.channelId),EditorUi.debug("DrawioFileSync.start",[this,"v"+DrawioFileSync.PROTOCOL],"rev",this.file.getCurrentRevisionId())}catch(d){}this.installListeners()}b=
!0}b&&window.setTimeout(mxUtils.bind(this,function(){this.lastModified=this.file.getLastModifiedDate();this.lastActivity=Date.now();this.resetUpdateStatusThread();this.updateOnlineState();this.updateStatus()},0));this.updateRealtime()};