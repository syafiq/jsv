function(d,f,g,u,x){var A=document.createElement("div");A.style.whiteSpace="nowrap";var H=this.editor.graph;if(null!=f){var P=document.createElement("h3");mxUtils.write(P,f);P.style.cssText="width:100%;text-align:center;margin-top:0px;margin-bottom:4px";A.appendChild(P)}var M=this.addCheckbox(A,mxResources.get("fit"),!0),G=this.addCheckbox(A,mxResources.get("shadow"),H.shadowVisible&&u,!u),ia=this.addCheckbox(A,g),ja=this.addCheckbox(A,mxResources.get("lightbox"),!0),ha=this.addEditButton(A,ja),ba=
ha.getEditInput(),oa=1<H.model.getChildCount(H.model.getRoot()),sa=this.addCheckbox(A,mxResources.get("layers"),oa,!oa);sa.style.marginLeft=ba.style.marginLeft;sa.style.marginBottom="12px";sa.style.marginTop="8px";mxEvent.addListener(ja,"change",function(){ja.checked?(oa&&sa.removeAttribute("disabled"),ba.removeAttribute("disabled")):(sa.setAttribute("disabled","disabled"),ba.setAttribute("disabled","disabled"));ba.checked&&ja.checked?ha.getEditSelect().removeAttribute("disabled"):ha.getEditSelect().setAttribute("disabled",
"disabled")});f=new CustomDialog(this,A,mxUtils.bind(this,function(){d(M.checked,G.checked,ia.checked,ja.checked,ha.getLink(),sa.checked)}),null,mxResources.get("embed"),x);this.showDialog(f.container,280,300,!0,!0)};EditorUi.prototype.createEmbedImage=function(d,f,g,u,x,A,H,P){function M(ba){var oa=" ",sa="";u&&(oa=" onclick=\"(function(img){if(img.wnd!=null&&!img.wnd.closed){img.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==img.wnd){img.wnd.postMessage(decodeURIComponent(img.getAttribute('src')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);img.wnd=window.open('"+