function Dialog(b,e,k,l,B,q,D,N,S,F,K){var R=S?57:0,d=k,f=l,g=S?0:64,u=Editor.inlineFullscreen||null==b.embedViewport?mxUtils.getDocumentSize():mxUtils.clone(b.embedViewport);null==b.embedViewport&&null!=window.innerHeight&&(u.height=window.innerHeight);var x=u.height,A=Math.max(1,Math.round((u.width-k-g)/2)),H=Math.max(1,Math.round((x-l-b.footerHeight)/3));e.style.maxHeight="100%";k=null!=document.body?Math.min(k,document.body.scrollWidth-g):k;l=Math.min(l,x-g);0<b.dialogs.length&&(this.zIndex+=
2*b.dialogs.length);null==this.bg&&(this.bg=b.createDiv("background"),this.bg.style.position="absolute",this.bg.style.background=Dialog.backdropColor,this.bg.style.height=x+"px",this.bg.style.right="0px",this.bg.style.zIndex=this.zIndex-2,mxUtils.setOpacity(this.bg,this.bgOpacity));u=mxUtils.getDocumentScrollOrigin(document);this.bg.style.left=u.x+"px";this.bg.style.top=u.y+"px";A+=u.x;H+=u.y;Editor.inlineFullscreen||null==b.embedViewport||(this.bg.style.height=mxUtils.getDocumentSize().height+"px",
H+=b.embedViewport.y,A+=b.embedViewport.x);B&&document.body.appendChild(this.bg);var P=b.createDiv(S?"geTransDialog":"geDialog");B=this.getPosition(A,H,k,l);A=B.x;H=B.y;P.style.width=k+"px";P.style.height=l+"px";P.style.left=A+"px";P.style.top=H+"px";P.style.zIndex=this.zIndex;P.appendChild(e);document.body.appendChild(P);!N&&e.clientHeight>P.clientHeight-g&&(e.style.overflowY="auto");e.style.overflowX="hidden";if(q&&(q=document.createElement("img"),q.setAttribute("src",Dialog.prototype.closeImage),
q.setAttribute("title",mxResources.get("close")),q.className="geDialogClose",q.style.top=H+14+"px",q.style.left=A+k+38-R+"px",q.style.zIndex=this.zIndex,mxEvent.addListener(q,"click",mxUtils.bind(this,function(){b.hideDialog(!0)})),document.body.appendChild(q),this.dialogImg=q,!K)){var M=!1;mxEvent.addGestureListeners(this.bg,mxUtils.bind(this,function(G){M=!0}),null,mxUtils.bind(this,function(G){M&&(b.hideDialog(!0),M=!1)}))}this.resizeListener=mxUtils.bind(this,function(){if(null!=F){var G=F();
null!=G&&(d=k=G.w,f=l=G.h)}G=mxUtils.getDocumentSize();x=G.height;this.bg.style.height=x+"px";Editor.inlineFullscreen||null==b.embedViewport||(this.bg.style.height=mxUtils.getDocumentSize().height+"px");A=Math.max(1,Math.round((G.width-k-g)/2));H=Math.max(1,Math.round((x-l-b.footerHeight)/3));k=null!=document.body?Math.min(d,document.body.scrollWidth-g):d;l=Math.min(f,x-g);G=this.getPosition(A,H,k,l);A=G.x;H=G.y;P.style.left=A+"px";P.style.top=H+"px";P.style.width=k+"px";P.style.height=l+"px";!N&&
e.clientHeight>P.clientHeight-g&&(e.style.overflowY="auto");null!=this.dialogImg&&(this.dialogImg.style.top=H+14+"px",this.dialogImg.style.left=A+k+38-R+"px")});mxEvent.addListener(window,"resize",this.resizeListener);this.onDialogClose=D;this.container=P;b.editor.fireEvent(new mxEventObject("showDialog"))}Dialog.backdropColor="white";Dialog.prototype.zIndex=mxPopupMenu.prototype.zIndex-2;