X.documentElement.getElementsByTagName("diagram");for(Z=0;Z<ba.length;Z++){m=mxUtils.getTextContent(ba[Z]);O=b.stringToCells(Graph.decompress(m));var aa=b.editor.graph.getBoundingBoxFromGeometry(O);G(null,null,0,0,0,0,{xml:m,w:aa.width,h:aa.height})}M=!0}}catch(ca){}M||(b.spinner.stop(),b.handleError({message:mxResources.get("errorLoadingFile")}))}}catch(ca){}return null}function H(l){l.dataTransfer.dropEffect=null!=p?"move":"copy";l.stopPropagation();l.preventDefault()}function I(l){l.stopPropagation();
l.preventDefault();E=!1;q=B(l);if(null!=p)null!=q&&q<e.children.length?(D.splice(q>p?q-1:q,0,D.splice(p,1)[0]),e.insertBefore(e.children[p],e.children[q])):(D.push(D.splice(p,1)[0]),e.appendChild(e.children[p]));else if(0<l.dataTransfer.files.length)b.importFiles(l.dataTransfer.files,0,0,b.maxImageSize,A(l));else if(0<=mxUtils.indexOf(l.dataTransfer.types,"text/uri-list")){var u=decodeURIComponent(l.dataTransfer.getData("text/uri-list"));(/(\.jpg)($|\?)/i.test(u)||/(\.png)($|\?)/i.test(u)||/(\.gif)($|\?)/i.test(u)||
/(\.svg)($|\?)/i.test(u))&&b.loadImage(u,function(C){G(u,null,0,0,C.width,C.height);e.scrollTop=e.scrollHeight})}l.stopPropagation();l.preventDefault()}var D=[];k=document.createElement("div");k.style.height="100%";var N=document.createElement("div");N.style.whiteSpace="nowrap";N.style.height="40px";k.appendChild(N);mxUtils.write(N,mxResources.get("filename")+":");null==g&&(g=b.defaultLibraryName+".xml");var c=document.createElement("input");c.setAttribute("value",g);c.style.marginRight="20px";c.style.marginLeft=