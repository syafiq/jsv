c,l)}),l):this.loadDescriptor(f,mxUtils.bind(this,function(y){try{if(null!=this.user){var C=/\.png$/i.test(y.title);/\.v(dx|sdx?)$/i.test(y.title)||/\.gliffy$/i.test(y.title)||!this.ui.useCanvasForExport&&C?this.ui.convertFile(y.downloadUrl,y.title,y.mimeType,this.extension,c,l,null,{Authorization:"Bearer "+b}):m||t||y.mimeType==this.libraryMimeType||y.mimeType==this.xmlMimeType?this.getXmlFile(y,c,l,!0,t):this.getXmlFile(y,c,l)}else l({message:mxResources.get("loggedOut")})}catch(z){if(null!=l)l(z);
else throw z;}}),l)};DriveClient.prototype.isGoogleRealtimeMimeType=function(f){return null!=f&&"application/vnd.jgraph.mxfile."==f.substring(0,30)};DriveClient.prototype.getXmlFile=function(f,c,l,m,t){try{var y={Authorization:"Bearer "+b},C=f.downloadUrl;if(null==C)null!=l&&l({message:mxResources.get("exportOptionsDisabledDetails")});else{var z=0,A=mxUtils.bind(this,function(){this.ui.editor.loadUrl(C,mxUtils.bind(this,function(J){try{if(null==J)l({message:mxResources.get("invalidOrMissingFile")});