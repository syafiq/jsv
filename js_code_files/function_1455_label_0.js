var StorageDialog=function(b,e,f){function c(J,d,g,k,n,x){function u(){mxEvent.addListener(D,"click",null!=x?x:function(){g!=App.MODE_GOOGLE||b.isDriveDomain()?g==App.MODE_GOOGLE&&b.spinner.spin(document.body,mxResources.get("authorizing"))?b.drive.checkToken(mxUtils.bind(this,function(){b.spinner.stop();b.setMode(g,!0);e()})):g==App.MODE_ONEDRIVE&&b.spinner.spin(document.body,mxResources.get("authorizing"))?b.oneDrive.checkToken(mxUtils.bind(this,function(){b.spinner.stop();b.setMode(g,!0);e()}),
function(q){b.spinner.stop();b.handleError(q)}):(b.setMode(g,!0),e()):window.location.hostname=DriveClient.prototype.newAppHostname})}y++;++t>f&&(mxUtils.br(C),t=1);var D=document.createElement("a");D.style.overflow="hidden";D.style.display="inline-block";D.className="geBaseButton";D.style.boxSizing="border-box";D.style.fontSize="11px";D.style.position="relative";D.style.margin="4px";D.style.marginTop="8px";D.style.marginBottom="0px";D.style.padding="8px 10px 8px 10px";D.style.width="88px";D.style.height=
"100px";D.style.whiteSpace="nowrap";D.setAttribute("title",d);var F=document.createElement("div");F.style.textOverflow="ellipsis";F.style.overflow="hidden";F.style.position="absolute";F.style.bottom="8px";F.style.left="0px";F.style.right="0px";mxUtils.write(F,d);D.appendChild(F);if(null!=J){var I=document.createElement("img");I.setAttribute("src",J);I.setAttribute("border","0");I.setAttribute("align","absmiddle");I.style.width="60px";I.style.height="60px";I.style.paddingBottom="6px";D.appendChild(I)}else F.style.paddingTop=
"5px",F.style.whiteSpace="normal",mxClient.IS_IOS?(D.style.padding="0px 10px 20px 10px",D.style.top="6px"):mxClient.IS_FF&&(F.style.paddingTop="0px",F.style.marginTop="-2px");if(null!=n)for(J=0;J<n.length;J++)mxUtils.br(F),mxUtils.write(F,n[J]);if(null!=k&&null==b[k]){I.style.visibility="hidden";mxUtils.setOpacity(F,10);var G=new Spinner({lines:12,length:12,width:5,radius:10,rotate:0,color:Editor.isDarkMode()?"#c0c0c0":"#000",speed:1.5,trail:60,shadow:!1,hwaccel:!1,top:"40%",zIndex:2E9});G.spin(D);
var U=window.setTimeout(function(){null==b[k]&&(G.stop(),D.style.display="none")},3E4);b.addListener("clientLoaded",mxUtils.bind(this,function(q,v){null!=b[k]&&v.getProperty("client")==b[k]&&(window.clearTimeout(U),mxUtils.setOpacity(F,100),I.style.visibility="",G.stop(),u(),"drive"==k&&null!=z.parentNode&&z.parentNode.removeChild(z))}))}else u();C.appendChild(D)}f=null!=f?f:2;var l=document.createElement("div");l.style.textAlign="center";l.style.whiteSpace="nowrap";l.style.paddingTop="0px";l.style.paddingBottom=
"20px";var m=document.createElement("div");m.style.border="1px solid #d3d3d3";m.style.borderWidth="1px 0px 1px 0px";m.style.padding="10px 0px 20px 0px";var t=0,y=0,C=document.createElement("div");C.style.paddingTop="2px";m.appendChild(C);var z=document.createElement("p"),A=document.createElement("p");A.style.cssText="font-size:22px;padding:4px 0 16px 0;margin:0;color:gray;";mxUtils.write(A,mxResources.get("saveDiagramsTo")+":");l.appendChild(A);l.appendChild(m);t=0;"function"===typeof window.DriveClient&&
c(IMAGE_PATH+"/google-drive-logo.svg",mxResources.get("googleDrive"),App.MODE_GOOGLE,"drive");"function"===typeof window.OneDriveClient&&c(IMAGE_PATH+"/onedrive-logo.svg",mxResources.get("oneDrive"),App.MODE_ONEDRIVE,"oneDrive");"1"!=urlParams.noDevice&&c(IMAGE_PATH+"/osa_drive-harddisk.png",mxResources.get("device"),App.MODE_DEVICE);!isLocalStorage||"1"!=urlParams.browser&&"1"!=urlParams.offline||c(IMAGE_PATH+"/osa_database.png",mxResources.get("browser"),App.MODE_BROWSER);"function"===typeof window.DropboxClient&&
c(IMAGE_PATH+"/dropbox-logo.svg",mxResources.get("dropbox"),App.MODE_DROPBOX,"dropbox");null!=b.gitHub&&c(IMAGE_PATH+"/github-logo.svg",mxResources.get("github"),App.MODE_GITHUB,"gitHub");null!=b.gitLab&&c(IMAGE_PATH+"/gitlab-logo.svg",mxResources.get("gitlab"),App.MODE_GITLAB,"gitLab");m=document.createElement("span");m.style.position="absolute";m.style.cursor="pointer";m.style.bottom="27px";m.style.color="gray";m.style.userSelect="none";m.style.textAlign="center";m.style.left="50%";mxUtils.setPrefixedStyle(m.style,
"transform","translate(-50%,0)");mxUtils.write(m,mxResources.get("decideLater"));l.appendChild(m);mxEvent.addListener(m,"click",function(){b.hideDialog();var J=Editor.useLocalStorage;b.createFile(b.defaultFilename,null,null,null,null,null,null,!0);Editor.useLocalStorage=J});mxClient.IS_SVG&&isLocalStorage&&"0"!=urlParams.gapi&&(null==document.documentMode||10<=document.documentMode)&&window.setTimeout(function(){null==b.drive&&(z.style.padding="7px",z.style.fontSize="9pt",z.style.marginTop="-14px",
z.innerHTML='<a style="background-color:#dcdcdc;padding:6px;color:black;text-decoration:none;" href="https://desk.draw.io/a/solutions/articles/16000074659" target="_blank"><img border="0" src="'+mxGraph.prototype.warningImage.src+'" align="absmiddle" style="margin-top:-4px"> '+mxResources.get("googleDriveMissingClickHere")+"</a>",l.appendChild(z))},5E3);this.container=l},SplashDialog=function(b){var e=document.createElement("div");e.style.textAlign="center";if(mxClient.IS_CHROMEAPP||EditorUi.isElectronApp){var f=