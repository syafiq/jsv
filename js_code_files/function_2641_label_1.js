e){if(e.hasAttribute("scale")){var n=parseFloat(e.getAttribute("scale"));!isNaN(n)&&0<n&&(g=n)}e.hasAttribute("border")&&(n=parseInt(e.getAttribute("border")),!isNaN(n)&&0<n&&(k=n))}return{scale:g,border:k}};EditorUi.prototype.getEmbeddedPng=function(e,g,k,n,u){try{var v=this.editor.graph,E=null!=v.themes&&"darkTheme"==v.defaultThemeName,C=null;if(null!=k&&0<k.length)v=this.createTemporaryGraph(E?v.getDefaultStylesheet():v.getStylesheet()),document.body.appendChild(v.container),this.decodeNodeIntoGraph(this.editor.extractGraphModel(mxUtils.parseXml(k).documentElement,
!0),v),C=k;else if(E||null!=this.pages&&this.currentPage!=this.pages[0]){v=this.createTemporaryGraph(E?v.getDefaultStylesheet():v.getStylesheet());var H=v.getGlobalVariable;v.setBackgroundImage=this.editor.graph.setBackgroundImage;var F=this.pages[0];this.currentPage==F?v.setBackgroundImage(this.editor.graph.backgroundImage):null!=F.viewState&&null!=F.viewState&&v.setBackgroundImage(F.viewState.backgroundImage);v.getGlobalVariable=function(T){return"page"==T?F.getName():"pagenumber"==T?1:H.apply(this,
arguments)};document.body.appendChild(v.container);v.model.setRoot(F.root)}this.editor.exportToCanvas(mxUtils.bind(this,function(T){try{null==C&&(C=this.getFileData(!0,null,null,null,null,null,null,null,null,!1));var p=T.toDataURL("image/png");p=Editor.writeGraphModelToPng(p,"tEXt","mxfile",encodeURIComponent(C));e(p.substring(p.lastIndexOf(",")+1));v!=this.editor.graph&&v.container.parentNode.removeChild(v.container)}catch(x){null!=g&&g(x)}}),null,null,null,mxUtils.bind(this,function(T){null!=g&&
g(T)}),null,null,n,null,v.shadowVisible,null,v,u,null,null,null,"diagram",null)}catch(T){null!=g&&g(T)}};EditorUi.prototype.getEmbeddedSvg=function(e,g,k,n,u,v,E,C,H,F,T,p,x){C=null!=C?C:!0;T=null!=T?T:0;E=null!=H?H:g.background;E==mxConstants.NONE&&(E=null);v=g.getSvg(E,F,T,null,null,v,null,null,null,g.shadowVisible||p,null,x,"diagram");(g.shadowVisible||p)&&g.addSvgShadow(v,null,null,0==T);null!=e&&v.setAttribute("content",e);null!=k&&v.setAttribute("resource",k);var G=mxUtils.bind(this,function(K){K=