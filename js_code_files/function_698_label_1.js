arguments)});k=k||{};k.callbackId=this.remoteInvokeCallbacks.length;this.remoteInvokeCallbacks.push({callback:C,error:H});e=JSON.stringify({event:"remoteInvoke",funtionName:e,functionArgs:g,msgMarkers:k});null!=this.remoteWin?this.remoteWin.postMessage(e,"*"):this.remoteInvokeQueue.push(e)};EditorUi.prototype.handleRemoteInvoke=function(e,g){var k=mxUtils.bind(this,function(F,T){var p={event:"remoteInvokeResponse",msgMarkers:e.msgMarkers};null!=T?p.error={errResp:T}:null!=F&&(p.resp=F);this.remoteWin.postMessage(JSON.stringify(p),
"*")});try{var n=e.funtionName,u=this.remoteInvokableFns[n];if(null!=u&&"function"===typeof this[n]){if(u.allowedDomains){for(var v=!1,E=0;E<u.allowedDomains.length;E++)if(g=="https://"+u.allowedDomains[E]){v=!0;break}if(!v){k(null,"Invalid Call: "+n+" is not allowed.");return}}var C=e.functionArgs;Array.isArray(C)||(C=[]);if(u.isAsync)C.push(function(){k(Array.prototype.slice.apply(arguments))}),C.push(function(F){k(null,F||"Unkown Error")}),this[n].apply(this,C);else{var H=this[n].apply(this,C);
k([H])}}else k(null,"Invalid Call: "+n+" is not found.")}catch(F){k(null,"Invalid Call: An error occurred, "+F.message)}};EditorUi.prototype.openDatabase=function(e,g){if(null==this.database){var k=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB;if(null!=k)try{var n=k.open("database",2);n.onupgradeneeded=function(u){try{var v=n.result;1>u.oldVersion&&v.createObjectStore("objects",{keyPath:"key"});2>u.oldVersion&&(v.createObjectStore("files",{keyPath:"title"}),v.createObjectStore("filesInfo",