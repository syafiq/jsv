this.getAbsoluteUrl(ea[ka].getAttribute("href"));null!=wa&&(ea[ka].setAttribute("rel",this.linkRelation),ea[ka].setAttribute("href",wa),null!=z&&mxEvent.addGestureListeners(ea[ka],null,null,z))}});this.model.addListener(mxEvent.CHANGE,E);E();var G=this.container.style.cursor,L=this.getTolerance(),Y=this,ha={currentState:null,currentLink:null,currentTarget:null,highlight:null!=t&&""!=t&&t!=mxConstants.NONE?new mxCellHighlight(Y,t,4):null,startX:0,startY:0,scrollLeft:0,scrollTop:0,updateCurrentState:function(ea){var ka=
ea.sourceState;if(null==ka||null==Y.getLinkForCell(ka.cell))ea=Y.getCellAt(ea.getGraphX(),ea.getGraphY(),null,null,null,function(wa,za,Da){return null==Y.getLinkForCell(wa.cell)}),ka=null==ka||Y.model.isAncestor(ea,ka.cell)?Y.view.getState(ea):null;ka!=this.currentState&&(null!=this.currentState&&this.clear(),this.currentState=ka,null!=this.currentState&&this.activate(this.currentState))},mouseDown:function(ea,ka){this.startX=ka.getGraphX();this.startY=ka.getGraphY();this.scrollLeft=Y.container.scrollLeft;
this.scrollTop=Y.container.scrollTop;null==this.currentLink&&"auto"==Y.container.style.overflow&&(Y.container.style.cursor="move");this.updateCurrentState(ka)},mouseMove:function(ea,ka){if(Y.isMouseDown)null!=this.currentLink&&(ea=Math.abs(this.startX-ka.getGraphX()),ka=Math.abs(this.startY-ka.getGraphY()),(ea>L||ka>L)&&this.clear());else{for(ea=ka.getSource();null!=ea&&"a"!=ea.nodeName.toLowerCase();)ea=ea.parentNode;null!=ea?this.clear():(null!=Y.tooltipHandler&&null!=this.currentLink&&null!=this.currentState&&
Y.tooltipHandler.reset(ka,!0,this.currentState),(null==this.currentState||ka.getState()!=this.currentState&&null!=ka.sourceState||!Y.intersects(this.currentState,ka.getGraphX(),ka.getGraphY()))&&this.updateCurrentState(ka))}},mouseUp:function(ea,ka){var wa=ka.getSource();for(ea=ka.getEvent();null!=wa&&"a"!=wa.nodeName.toLowerCase();)wa=wa.parentNode;null==wa&&Math.abs(this.scrollLeft-Y.container.scrollLeft)<L&&Math.abs(this.scrollTop-Y.container.scrollTop)<L&&(null==ka.sourceState||!ka.isSource(ka.sourceState.control))&&
((mxEvent.isLeftMouseButton(ea)||mxEvent.isMiddleMouseButton(ea))&&!mxEvent.isPopupTrigger(ea)||mxEvent.isTouchEvent(ea))&&(null!=this.currentLink?(wa=Y.isBlankLink(this.currentLink),"data:"!==this.currentLink.substring(0,5)&&wa||null==z||z(ea,this.currentLink),mxEvent.isConsumed(ea)||(ea=null!=this.currentTarget?this.currentTarget:mxEvent.isMiddleMouseButton(ea)?"_blank":wa?Y.linkTarget:"_top",Y.openLink(this.currentLink,ea),ka.consume())):null!=A&&!ka.isConsumed()&&Math.abs(this.scrollLeft-Y.container.scrollLeft)<
L&&Math.abs(this.scrollTop-Y.container.scrollTop)<L&&Math.abs(this.startX-ka.getGraphX())<L&&Math.abs(this.startY-ka.getGraphY())<L&&A(ka.getEvent()));this.clear()},activate:function(ea){this.currentLink=Y.getAbsoluteUrl(Y.getLinkForCell(ea.cell));null!=this.currentLink&&(this.currentTarget=Y.getLinkTargetForCell(ea.cell),Y.container.style.cursor="pointer",null!=this.highlight&&this.highlight.highlight(ea))},clear:function(){null!=Y.container&&(Y.container.style.cursor=G);this.currentLink=this.currentState=
this.currentTarget=null;null!=this.highlight&&this.highlight.hide();null!=Y.tooltipHandler&&Y.tooltipHandler.hide()}};Y.click=function(ea){};Y.addMouseListener(ha);mxEvent.addListener(document,"mouseleave",function(ea){ha.clear()})};Graph.prototype.duplicateCells=function(t,z){t=null!=t?t:this.getSelectionCells();z=null!=z?z:!0;for(var A=0;A<t.length;A++)this.isTableCell(t[A])&&(t[A]=this.model.getParent(t[A]));t=this.model.getTopmostCells(t);var E=this.getModel(),G=this.gridSize,L=[];E.beginUpdate();