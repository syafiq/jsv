la);Z.editorUi.fireEvent(new mxEventObject("styleChanged","keys",Ia,"values",ia,"cells",ea.getSelectionCells()))}finally{ea.getModel().endUpdate()}}function S(ta,la,ua){var Ma=mxUtils.getOffset(p,!0),Ia=mxUtils.getOffset(ta,!0);la.style.position="absolute";la.style.left=Ia.x-Ma.x+"px";la.style.top=Ia.y-Ma.y+"px";la.style.width=ta.offsetWidth+"px";la.style.height=ta.offsetHeight-(ua?4:0)+"px";la.style.zIndex=5}function R(ta,la,ua){var Ma=document.createElement("div");Ma.style.width="32px";Ma.style.height=
"4px";Ma.style.margin="2px";Ma.style.border="1px solid black";Ma.style.background=la&&"none"!=la?la:"url('"+Dialog.prototype.noColorImage+"')";btn=mxUtils.button("",mxUtils.bind(Z,function(Ia){this.editorUi.pickColor(la,function(ia){Ma.style.background="none"==ia?"url('"+Dialog.prototype.noColorImage+"')":ia;Q(ta,ia,ua)});mxEvent.consume(Ia)}));btn.style.height="12px";btn.style.width="40px";btn.className="geColorBtn";btn.appendChild(Ma);return btn}function T(ta,la,ua,Ma,Ia,ia,va){null!=la&&(la=la.split(","),
ca.push({name:ta,values:la,type:ua,defVal:Ma,countProperty:Ia,parentRow:ia,isDeletable:!0,flipBkg:va}));btn=mxUtils.button("+",mxUtils.bind(Z,function(sa){for(var na=ia,oa=0;null!=na.nextSibling;)if(na.nextSibling.getAttribute("data-pName")==ta)na=na.nextSibling,oa++;else break;var Ca={type:ua,parentRow:ia,index:oa,isDeletable:!0,defVal:Ma,countProperty:Ia};oa=Y(ta,"",Ca,0==oa%2,va);Q(ta,Ma,Ca);na.parentNode.insertBefore(oa,na.nextSibling);mxEvent.consume(sa)}));btn.style.height="16px";btn.style.width=
"25px";btn.className="geColorBtn";return btn}function W(ta,la,ua,Ma,Ia,ia,va){if(0<Ia){var sa=Array(Ia);la=null!=la?la.split(","):[];for(var na=0;na<Ia;na++)sa[na]=null!=la[na]?la[na]:null!=Ma?Ma:"";ca.push({name:ta,values:sa,type:ua,defVal:Ma,parentRow:ia,flipBkg:va,size:Ia})}return document.createElement("div")}function X(ta,la,ua){var Ma=document.createElement("input");Ma.type="checkbox";Ma.checked="1"==la;mxEvent.addListener(Ma,"change",function(){Q(ta,Ma.checked?"1":"0",ua)});return Ma}function Y(ta,
la,ua,Ma,Ia){var ia=ua.dispName,va=ua.type,sa=document.createElement("tr");sa.className="gePropRow"+(Ia?"Dark":"")+(Ma?"Alt":"")+" gePropNonHeaderRow";sa.setAttribute("data-pName",ta);sa.setAttribute("data-pValue",la);Ma=!1;null!=ua.index&&(sa.setAttribute("data-index",ua.index),ia=(null!=ia?ia:"")+"["+ua.index+"]",Ma=!0);var na=document.createElement("td");na.className="gePropRowCell";ia=mxResources.get(ia,null,ia);mxUtils.write(na,ia);na.setAttribute("title",ia);Ma&&(na.style.textAlign="right");
sa.appendChild(na);na=document.createElement("td");na.className="gePropRowCell";if("color"==va)na.appendChild(R(ta,la,ua));else if("bool"==va||"boolean"==va)na.appendChild(X(ta,la,ua));else if("enum"==va){var oa=ua.enumList;for(Ia=0;Ia<oa.length;Ia++)if(ia=oa[Ia],ia.val==la){mxUtils.write(na,mxResources.get(ia.dispName,null,ia.dispName));break}mxEvent.addListener(na,"click",mxUtils.bind(Z,function(){var Ca=document.createElement("select");S(na,Ca);for(var da=0;da<oa.length;da++){var ja=oa[da],pa=
document.createElement("option");pa.value=mxUtils.htmlEntities(ja.val);mxUtils.write(pa,mxResources.get(ja.dispName,null,ja.dispName));Ca.appendChild(pa)}Ca.value=la;p.appendChild(Ca);mxEvent.addListener(Ca,"change",function(){var xa=mxUtils.htmlEntities(Ca.value);Q(ta,xa,ua)});Ca.focus();mxEvent.addListener(Ca,"blur",function(){p.removeChild(Ca)})}))}else"dynamicArr"==va?na.appendChild(T(ta,la,ua.subType,ua.subDefVal,ua.countProperty,sa,Ia)):"staticArr"==va?na.appendChild(W(ta,la,ua.subType,ua.subDefVal,
ua.size,sa,Ia)):"readOnly"==va?(Ia=document.createElement("input"),Ia.setAttribute("readonly",""),Ia.value=la,Ia.style.width="96px",Ia.style.borderWidth="0px",na.appendChild(Ia)):(na.innerHTML=mxUtils.htmlEntities(decodeURIComponent(la)),mxEvent.addListener(na,"click",mxUtils.bind(Z,function(){function Ca(){var ja=da.value;ja=0==ja.length&&"string"!=va?0:ja;ua.allowAuto&&(null!=ja.trim&&"auto"==ja.trim().toLowerCase()?(ja="auto",va="string"):(ja=parseFloat(ja),ja=isNaN(ja)?0:ja));null!=ua.min&&ja<
ua.min?ja=ua.min:null!=ua.max&&ja>ua.max&&(ja=ua.max);ja=encodeURIComponent(("int"==va?parseInt(ja):ja)+"");Q(ta,ja,ua)}var da=document.createElement("input");S(na,da,!0);da.value=decodeURIComponent(la);da.className="gePropEditor";"int"!=va&&"float"!=va||ua.allowAuto||(da.type="number",da.step="int"==va?"1":"any",null!=ua.min&&(da.min=parseFloat(ua.min)),null!=ua.max&&(da.max=parseFloat(ua.max)));p.appendChild(da);mxEvent.addListener(da,"keypress",function(ja){13==ja.keyCode&&Ca()});da.focus();mxEvent.addListener(da,
"blur",function(){Ca()})})));ua.isDeletable&&(Ia=mxUtils.button("-",mxUtils.bind(Z,function(Ca){Q(ta,"",ua,ua.index);mxEvent.consume(Ca)})),Ia.style.height="16px",Ia.style.width="25px",Ia.style.float="right",Ia.className="geColorBtn",na.appendChild(Ia));sa.appendChild(na);return sa}var Z=this,ea=this.editorUi.editor.graph,ca=[];p.style.position="relative";p.style.padding="0";var aa=document.createElement("table");aa.className="geProperties";aa.style.whiteSpace="nowrap";aa.style.width="100%";var ba=
document.createElement("tr");ba.className="gePropHeader";var fa=document.createElement("th");fa.className="gePropHeaderCell";var za=document.createElement("img");za.src=Sidebar.prototype.expandedImage;za.style.verticalAlign="middle";fa.appendChild(za);mxUtils.write(fa,mxResources.get("property"));ba.style.cursor="pointer";var ra=function(){var ta=aa.querySelectorAll(".gePropNonHeaderRow");if(Z.editorUi.propertiesCollapsed){za.src=Sidebar.prototype.collapsedImage;var la="none";for(var ua=p.childNodes.length-
1;0<=ua;ua--)try{var Ma=p.childNodes[ua],Ia=Ma.nodeName.toUpperCase();"INPUT"!=Ia&&"SELECT"!=Ia||p.removeChild(Ma)}catch(ia){}}else za.src=Sidebar.prototype.expandedImage,la="";for(ua=0;ua<ta.length;ua++)ta[ua].style.display=la};mxEvent.addListener(ba,"click",function(){Z.editorUi.propertiesCollapsed=!Z.editorUi.propertiesCollapsed;ra()});ba.appendChild(fa);fa=document.createElement("th");fa.className="gePropHeaderCell";fa.innerHTML=mxResources.get("value");ba.appendChild(fa);aa.appendChild(ba);var Aa=
!1,ma=!1;ba=null;1==L.vertices.length&&0==L.edges.length?ba=L.vertices[0].id:0==L.vertices.length&&1==L.edges.length&&(ba=L.edges[0].id);null!=ba&&aa.appendChild(Y("id",mxUtils.htmlEntities(ba),{dispName:"ID",type:"readOnly"},!0,!1));for(var ha in B)if(ba=B[ha],"function"!=typeof ba.isVisible||ba.isVisible(L,this)){var Pa=null!=L.style[ha]?mxUtils.htmlEntities(L.style[ha]+""):null!=ba.getDefaultValue?ba.getDefaultValue(L,this):ba.defVal;if("separator"==ba.type)ma=!ma;else{if("staticArr"==ba.type)ba.size=
parseInt(L.style[ba.sizeProperty]||B[ba.sizeProperty].defVal)||0;else if(null!=ba.dependentProps){var ya=ba.dependentProps,Ea=[],Fa=[];for(fa=0;fa<ya.length;fa++){var qa=L.style[ya[fa]];Fa.push(B[ya[fa]].subDefVal);Ea.push(null!=qa?qa.split(","):[])}ba.dependentPropsDefVal=Fa;ba.dependentPropsVals=Ea}aa.appendChild(Y(ha,Pa,ba,Aa,ma));Aa=!Aa}}for(fa=0;fa<ca.length;fa++)for(ba=ca[fa],B=ba.parentRow,L=0;L<ba.values.length;L++)ha=Y(ba.name,ba.values[L],{type:ba.type,parentRow:ba.parentRow,isDeletable:ba.isDeletable,
index:L,defVal:ba.defVal,countProperty:ba.countProperty,size:ba.size},0==L%2,ba.flipBkg),B.parentNode.insertBefore(ha,B.nextSibling),B=ha;p.appendChild(aa);ra();return p};StyleFormatPanel.prototype.addStyles=function(p){function B(ba){mxEvent.addListener(ba,"mouseenter",function(){ba.style.opacity="1"});mxEvent.addListener(ba,"mouseleave",function(){ba.style.opacity="0.5"})}var L=this.editorUi,Q=L.editor.graph,S=document.createElement("div");S.style.whiteSpace="nowrap";S.style.paddingLeft="24px";