DrawioFileSync.prototype.updateOnlineState=function(){if("1"!=urlParams.embedRT){var b=mxUtils.bind(this,function(c){mxEvent.addListener(c,"click",mxUtils.bind(this,function(l){if(this.file.isRealtimeEnabled()&&this.file.isRealtimeSupported()){l=this.file.getRealtimeState();var m=mxResources.get("disconnected");this.file.invalidChecksum?m=mxResources.get("error")+": "+mxResources.get("checksum"):this.ui.isOffline(!0)||!this.isConnected()?m=mxResources.get("offline"):1==l&&(m=mxResources.get("online"));
this.ui.showError(mxResources.get("realtimeCollaboration"),mxUtils.htmlEntities(m))}else this.enabled=!this.enabled,this.ui.updateButtonContainer(),this.resetUpdateStatusThread(),this.updateOnlineState(),this.updateStatus(),!this.file.inConflictState&&this.enabled&&this.fileChangedNotify()}))});if(null!=this.ui.toolbarContainer&&null==this.collaboratorsElement){var d=document.createElement("a");d.className="geButton geAdaptiveAsset";d.style.position="absolute";d.style.display="inline-block";d.style.verticalAlign=
"bottom";d.style.color="#666";d.style.top="6px";d.style.right="atlas"!=Editor.currentTheme?null!=this.ui.darkModeElement?"90px":"70px":"50px";d.style.padding="2px";d.style.fontSize="8pt";d.style.verticalAlign="middle";d.style.textDecoration="none";d.style.backgroundPosition="center center";d.style.backgroundRepeat="no-repeat";d.style.backgroundSize="16px 16px";d.style.width="16px";d.style.height="16px";mxUtils.setOpacity(d,60);mxEvent.addListener(d,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,
function(c){c.preventDefault()}));b(d);this.ui.toolbarContainer.appendChild(d);this.collaboratorsElement=d}if(null!=this.collaboratorsElement){this.collaboratorsElement.style.display="inline-block";var f=Editor.cloudImage;b="";this.enabled?this.file.invalidChecksum?(b=mxResources.get("error")+": "+mxResources.get("checksum"),f=Editor.syncProblemImage):this.ui.isOffline(!0)||!this.isConnected()?(b=mxResources.get("offline"),f=Editor.cloudOffImage):(b=mxResources.get("online"),this.file.isRealtimeEnabled()&&
this.file.isRealtimeSupported()&&(d=this.file.getRealtimeError(),f=this.file.getRealtimeState(),b=mxResources.get("realtimeCollaboration"),1==f?(this.collaboratorsElement.style.display="none",f=Editor.syncImage):(f=Editor.syncProblemImage,b=null!=d&&null!=d.message?b+(" ("+d.message+")"):b+(" ("+mxResources.get("disconnected")+")")))):(b=mxResources.get("disconnected"),f=Editor.cloudOffImage);this.collaboratorsElement.setAttribute("title",b);this.collaboratorsElement.style.backgroundImage="url("+
f+")"}}};