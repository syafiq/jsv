T.x)||V&&Math.min(ka.y+ka.height,T.y+T.height)>=Math.max(ka.y,T.y))&&Z.push(ka)}Z.sort(function(q,E){return V?q.x+q.width-E.x-E.width:q.y+q.height-E.y-E.height})}return Z}function d(K,V){var T=M(K),Z=V==mxConstants.DIRECTION_EAST||V==mxConstants.DIRECTION_WEST;(T==mxConstants.DIRECTION_EAST||T==mxConstants.DIRECTION_WEST)==Z&&T!=V?f.actions.get("selectParent").funct():T==V?(V=g.getOutgoingTreeEdges(K),null!=V&&0<V.length&&g.setSelectionCell(g.model.getTerminal(V[0],!1))):(T=g.getIncomingTreeEdges(K),
null!=T&&0<T.length&&(Z=Q(g.model.getTerminal(T[0],!0),Z,K),K=g.view.getState(K),null!=K&&(K=mxUtils.indexOf(Z,K),0<=K&&(K+=V==mxConstants.DIRECTION_NORTH||V==mxConstants.DIRECTION_WEST?-1:1,0<=K&&K<=Z.length-1&&g.setSelectionCell(Z[K].cell)))))}var f=this,g=f.editor.graph,v=g.getModel(),x=f.menus.createPopupMenu;f.menus.createPopupMenu=function(K,V,T){x.apply(this,arguments);if(1==g.getSelectionCount()){V=g.getSelectionCell();var Z=g.getOutgoingTreeEdges(V);K.addSeparator();0<Z.length&&(l(g.getSelectionCell())&&