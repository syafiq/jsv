(new mxXmlRequest(SAVE_URL,"format="+N+"&xml="+encodeURIComponent(J)+"&filename="+encodeURIComponent(b)+(v?"&binary=1":""))).simulate(document,"_blank")}else this.ui.handleError({message:mxResources.get("drawingTooLarge")},mxResources.get("error"),mxUtils.bind(this,function(){mxUtils.popup(J)}));F()}});v?(f=this.ui.getPngFileProperties(this.ui.fileNode),this.ui.getEmbeddedPng(mxUtils.bind(this,function(J){I(J)}),d,this.ui.getCurrentFile()!=this?A:null,f.scale,f.border)):I(A)};