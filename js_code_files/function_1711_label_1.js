Na=null;null==ra.viewState&&null==ra.root&&q.updatePageRoot(ra);null!=ra.viewState&&(na=ra.viewState.pageVisible,Ea=ra.viewState.mathEnabled,pa=ra.viewState.background,Na=ra.viewState.backgroundImage,ja.extFonts=ra.viewState.extFonts);null!=Na&&null!=Na.originalSrc&&(Na=q.createImageForPageLink(Na.originalSrc,ra));ja.background=pa;ja.backgroundImage=null!=Na?new mxImage(Na.src,Na.width,Na.height,Na.x,Na.y):null;ja.pageVisible=na;ja.mathEnabled=Ea;var Qa=ja.getGraphBounds;ja.getGraphBounds=function(){var Ga=
Qa.apply(this,arguments),Ka=this.backgroundImage;if(null!=Ka&&null!=Ka.width&&null!=Ka.height){var Ma=this.view.translate,Pa=this.view.scale;Ga=mxRectangle.fromRectangle(Ga);Ga.add(new mxRectangle((Ma.x+Ka.x)*Pa,(Ma.y+Ka.y)*Pa,Ka.width*Pa,Ka.height*Pa))}return Ga};var Va=ja.getGlobalVariable;ja.getGlobalVariable=function(Ga){return"page"==Ga?ra.getName():"pagenumber"==Ga?za+1:"pagecount"==Ga?null!=q.pages?q.pages.length:1:Va.apply(this,arguments)};document.body.appendChild(ja.container);q.updatePageRoot(ra);